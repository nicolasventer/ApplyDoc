var X9=Object.create;var{getPrototypeOf:Z9,defineProperty:o8,getOwnPropertyNames:Q9}=Object;var W9=Object.prototype.hasOwnProperty;var D$=($,X,Z)=>{Z=$!=null?X9(Z9($)):{};let Q=X||!$||!$.__esModule?o8(Z,"default",{value:$,enumerable:!0}):Z;for(let W of Q9($))if(!W9.call(Q,W))o8(Q,W,{get:()=>$[W],enumerable:!0});return Q};var fX=($,X)=>()=>(X||$((X={exports:{}}).exports,X),X.exports);var x2=($,X)=>{for(var Z in X)o8($,Z,{get:X[Z],enumerable:!0,configurable:!0,set:(Q)=>X[Z]=()=>Q})};var AX=fX((eQ)=>{Object.defineProperty(eQ,"__esModule",{value:!0});eQ.parse=Zw;eQ.serialize=Qw;var sB=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,rB=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,aB=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,eB=/^[\u0020-\u003A\u003D-\u007E]*$/,$w=Object.prototype.toString,Xw=(()=>{let $=function(){};return $.prototype=Object.create(null),$})();function Zw($,X){let Z=new Xw,Q=$.length;if(Q<2)return Z;let W=X?.decode||Ww,Y=0;do{let J=$.indexOf("=",Y);if(J===-1)break;let z=$.indexOf(";",Y),w=z===-1?Q:z;if(J>w){Y=$.lastIndexOf(";",J-1)+1;continue}let G=rQ($,Y,J),B=aQ($,J,G),H=$.slice(G,B);if(Z[H]===void 0){let O=rQ($,J+1,w),M=aQ($,w,O),F=W($.slice(O,M));Z[H]=F}Y=w+1}while(Y<Q);return Z}function rQ($,X,Z){do{let Q=$.charCodeAt(X);if(Q!==32&&Q!==9)return X}while(++X<Z);return Z}function aQ($,X,Z){while(X>Z){let Q=$.charCodeAt(--X);if(Q!==32&&Q!==9)return X+1}return Z}function Qw($,X,Z){let Q=Z?.encode||encodeURIComponent;if(!sB.test($))throw new TypeError(`argument name is invalid: ${$}`);let W=Q(X);if(!rB.test(W))throw new TypeError(`argument val is invalid: ${X}`);let Y=$+"="+W;if(!Z)return Y;if(Z.maxAge!==void 0){if(!Number.isInteger(Z.maxAge))throw new TypeError(`option maxAge is invalid: ${Z.maxAge}`);Y+="; Max-Age="+Z.maxAge}if(Z.domain){if(!aB.test(Z.domain))throw new TypeError(`option domain is invalid: ${Z.domain}`);Y+="; Domain="+Z.domain}if(Z.path){if(!eB.test(Z.path))throw new TypeError(`option path is invalid: ${Z.path}`);Y+="; Path="+Z.path}if(Z.expires){if(!Yw(Z.expires)||!Number.isFinite(Z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Z.expires}`);Y+="; Expires="+Z.expires.toUTCString()}if(Z.httpOnly)Y+="; HttpOnly";if(Z.secure)Y+="; Secure";if(Z.partitioned)Y+="; Partitioned";if(Z.priority)switch(typeof Z.priority==="string"?Z.priority.toLowerCase():Z.sameSite){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Z.priority}`)}if(Z.sameSite)switch(typeof Z.sameSite==="string"?Z.sameSite.toLowerCase():Z.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Z.sameSite}`)}return Y}function Ww($){if($.indexOf("%")===-1)return $;try{return decodeURIComponent($)}catch(X){return $}}function Yw($){return $w.call($)==="[object Date]"}});var d8=fX((WV,ZW)=>{var $W=12,Mw=0,HX=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function Bw($){var X=$.indexOf("%");if(X===-1)return $;var Z=$.length,Q="",W=0,Y=0,J=X,z=$W;while(X>-1&&X<Z){var w=XW($[X+1],4),G=XW($[X+2],0),B=w|G,H=HX[B];if(z=HX[256+z+H],Y=Y<<6|B&HX[364+H],z===$W)Q+=$.slice(W,J),Q+=Y<=65535?String.fromCharCode(Y):String.fromCharCode(55232+(Y>>10),56320+(Y&1023)),Y=0,W=X+3,X=J=$.indexOf("%",W);else if(z===Mw)return null;else{if(X+=3,X<Z&&$.charCodeAt(X)===37)continue;return null}}return Q+$.slice(W)}var ww={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function XW($,X){var Z=ww[$];return Z===void 0?255:Z<<X}ZW.exports=Bw});function N8($){return l0($)&&Symbol.asyncIterator in $}function D8($){return l0($)&&Symbol.iterator in $}function P0($){return l0($)&&(Object.getPrototypeOf($)===Object.prototype||Object.getPrototypeOf($)===null)}function L8($){return $ instanceof Promise}function G1($){return $ instanceof Date&&Number.isFinite($.getTime())}function b1($){return ArrayBuffer.isView($)}function $$($){return $ instanceof globalThis.Uint8Array}function s($,X){return X in $}function l0($){return $!==null&&typeof $==="object"}function p($){return Array.isArray($)&&!ArrayBuffer.isView($)}function C0($){return $===void 0}function U2($){return $===null}function s1($){return typeof $==="boolean"}function y($){return typeof $==="number"}function P8($){return Number.isInteger($)}function n0($){return typeof $==="bigint"}function o($){return typeof $==="string"}function O8($){return typeof $==="function"}function Y1($){return typeof $==="symbol"}function A1($){return n0($)||s1($)||U2($)||y($)||o($)||Y1($)||C0($)}var I0;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function X(J,z){return $.ExactOptionalPropertyTypes?z in J:J[z]!==void 0}$.IsExactOptionalProperty=X;function Z(J){let z=l0(J);return $.AllowArrayObject?z:z&&!p(J)}$.IsObjectLike=Z;function Q(J){return Z(J)&&!(J instanceof Date)&&!(J instanceof Uint8Array)}$.IsRecordLike=Q;function W(J){return $.AllowNaN?y(J):Number.isFinite(J)}$.IsNumberLike=W;function Y(J){let z=C0(J);return $.AllowNullVoid?z||J===null:z}$.IsVoidLike=Y})(I0||(I0={}));var N0={};x2(N0,{Set:()=>B9,Has:()=>M9,Get:()=>w9,Entries:()=>Y9,Delete:()=>z9,Clear:()=>J9});var X$=new Map;function Y9(){return new Map(X$)}function J9(){return X$.clear()}function z9($){return X$.delete($)}function M9($){return X$.has($)}function B9($,X){X$.set($,X)}function w9($){return X$.get($)}var b0={};x2(b0,{Set:()=>H9,Has:()=>A9,Get:()=>N9,Entries:()=>q9,Delete:()=>G9,Clear:()=>U9});var Z$=new Map;function q9(){return new Map(Z$)}function U9(){return Z$.clear()}function G9($){return Z$.delete($)}function A9($){return Z$.has($)}function H9($,X){Z$.set($,X)}function N9($){return Z$.get($)}var j0=Symbol.for("TypeBox.Transform"),r1=Symbol.for("TypeBox.Readonly"),s0=Symbol.for("TypeBox.Optional"),H1=Symbol.for("TypeBox.Hint"),N=Symbol.for("TypeBox.Kind");function L$($={}){return{...$,[N]:$[N]??"Unsafe"}}class m extends Error{constructor($){super($)}}class t8 extends m{constructor($){super(`Duplicate type kind '${$}' detected`)}}class s8 extends m{constructor($){super(`Duplicate string format '${$}' detected`)}}var a1;(function($){function X(Q,W){if(b0.Has(Q))throw new t8(Q);return b0.Set(Q,W),(Y={})=>L$({...Y,[N]:Q})}$.Type=X;function Z(Q,W){if(N0.Has(Q))throw new s8(Q);return N0.Set(Q,W),Q}$.Format=Z})(a1||(a1={}));function Z0($){return{[N]:"MappedResult",properties:$}}var z1={};x2(z1,{IsUndefined:()=>R0,IsUint8Array:()=>k2,IsSymbol:()=>Z6,IsString:()=>_0,IsRegExp:()=>X6,IsObject:()=>O0,IsNumber:()=>v1,IsNull:()=>$6,IsIterator:()=>e8,IsFunction:()=>a8,IsDate:()=>O$,IsBoolean:()=>C2,IsBigInt:()=>P$,IsAsyncIterator:()=>r8,IsArray:()=>J1});function r8($){return O0($)&&!J1($)&&!k2($)&&Symbol.asyncIterator in $}function J1($){return Array.isArray($)}function P$($){return typeof $==="bigint"}function C2($){return typeof $==="boolean"}function O$($){return $ instanceof globalThis.Date}function a8($){return typeof $==="function"}function e8($){return O0($)&&!J1($)&&!k2($)&&Symbol.iterator in $}function $6($){return $===null}function v1($){return typeof $==="number"}function O0($){return typeof $==="object"&&$!==null}function X6($){return $ instanceof globalThis.RegExp}function _0($){return typeof $==="string"}function Z6($){return typeof $==="symbol"}function k2($){return $ instanceof globalThis.Uint8Array}function R0($){return $===void 0}function D9($){return $.map((X)=>_8(X))}function L9($){return new Date($.getTime())}function P9($){return new Uint8Array($)}function O9($){return new RegExp($.source,$.flags)}function _9($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=_8($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=_8($[Z]);return X}function _8($){return J1($)?D9($):O$($)?L9($):k2($)?P9($):X6($)?O9($):O0($)?_9($):$}function yX($){return _8($)}function x0($){return $.map((X)=>C(X))}function C($,X={}){return{...yX($),...X}}function F9($,X){let{[X]:Z,...Q}=$;return Q}function k0($,X){return X.reduce((Z,Q)=>F9(Z,Q),$)}function _$($,X={}){return{...X,[N]:"Array",type:"array",items:C($)}}function F$($,X={}){return{...X,[N]:"AsyncIterator",type:"AsyncIterator",items:C($)}}function S$($,X,Z){return{...Z,[N]:"Constructor",type:"Constructor",parameters:x0($),returns:C(X)}}function G2($,X,Z){return{...Z,[N]:"Function",type:"Function",parameters:x0($),returns:C(X)}}function w0($={}){return{...$,[N]:"Never",not:{}}}function dX($){return O0($)&&$[r1]==="Readonly"}function e1($){return O0($)&&$[s0]==="Optional"}function S9($){return Q0($,"Any")}function A2($){return Q0($,"Array")}function K$($){return Q0($,"AsyncIterator")}function Q6($){return Q0($,"BigInt")}function W6($){return Q0($,"Boolean")}function j$($){return Q0($,"Constructor")}function K9($){return Q0($,"Date")}function C$($){return Q0($,"Function")}function T2($){return Q0($,"Integer")}function g0($){return Q0($,"Intersect")}function b$($){return Q0($,"Iterator")}function Q0($,X){return O0($)&&N in $&&$[N]===X}function H2($){return Q0($,"Literal")}function N1($){return Q0($,"MappedKey")}function K0($){return Q0($,"MappedResult")}function Q$($){return Q0($,"Never")}function j9($){return Q0($,"Not")}function C9($){return Q0($,"Null")}function g2($){return Q0($,"Number")}function v0($){return Q0($,"Object")}function f2($){return Q0($,"Promise")}function Y6($){return Q0($,"Record")}function J6($){return Q0($,"Ref")}function z6($){return Q0($,"RegExp")}function R$($){return Q0($,"String")}function b9($){return Q0($,"Symbol")}function D1($){return Q0($,"TemplateLiteral")}function R9($){return Q0($,"This")}function W$($){return O0($)&&j0 in $}function h1($){return Q0($,"Tuple")}function V9($){return Q0($,"Undefined")}function z0($){return Q0($,"Union")}function E9($){return Q0($,"Uint8Array")}function I9($){return Q0($,"Unknown")}function x9($){return Q0($,"Unsafe")}function k9($){return Q0($,"Void")}function T9($){return O0($)&&N in $&&_0($[N])}function L1($){return S9($)||A2($)||W6($)||Q6($)||K$($)||j$($)||K9($)||C$($)||T2($)||g0($)||b$($)||H2($)||N1($)||K0($)||Q$($)||j9($)||C9($)||g2($)||v0($)||f2($)||Y6($)||J6($)||z6($)||R$($)||b9($)||D1($)||R9($)||h1($)||V9($)||z0($)||E9($)||I9($)||x9($)||k9($)||T9($)}function f9($){return k0(C($),[s0])}function y9($){return{...C($),[s0]:"Optional"}}function d9($,X){return X===!1?f9($):y9($)}function X1($,X){let Z=X??!0;return K0($)?vX($,Z):d9($,Z)}function v9($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=X1($[Q],X);return Z}function h9($,X){return v9($.properties,X)}function vX($,X){let Z=h9($,X);return Z0(Z)}function V$($,X){let Z=$.every((W)=>v0(W)),Q=L1(X.unevaluatedProperties)?{unevaluatedProperties:C(X.unevaluatedProperties)}:{};return X.unevaluatedProperties===!1||L1(X.unevaluatedProperties)||Z?{...X,...Q,[N]:"Intersect",type:"object",allOf:x0($)}:{...X,...Q,[N]:"Intersect",allOf:x0($)}}function p9($){return $.every((X)=>e1(X))}function m9($){return k0($,[s0])}function hX($){return $.map((X)=>e1(X)?m9(X):X)}function u9($,X){return p9($)?X1(V$(hX($),X)):V$(hX($),X)}function F8($,X={}){if($.length===0)return w0(X);if($.length===1)return C($[0],X);if($.some((Z)=>W$(Z)))throw new Error("Cannot intersect transform types");return u9($,X)}function Z1($,X={}){if($.length===0)return w0(X);if($.length===1)return C($[0],X);if($.some((Z)=>W$(Z)))throw new Error("Cannot intersect transform types");return V$($,X)}function E$($,X){return{...X,[N]:"Union",anyOf:x0($)}}function c9($){return $.some((X)=>e1(X))}function pX($){return $.map((X)=>e1(X)?i9(X):X)}function i9($){return k0($,[s0])}function l9($,X){return c9($)?X1(E$(pX($),X)):E$(pX($),X)}function $2($,X={}){return $.length===0?w0(X):$.length===1?C($[0],X):l9($,X)}function q0($,X={}){return $.length===0?w0(X):$.length===1?C($[0],X):E$($,X)}class M6 extends m{}function n9($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function B6($,X,Z){return $[X]===Z&&$.charCodeAt(X-1)!==92}function N2($,X){return B6($,X,"(")}function I$($,X){return B6($,X,")")}function mX($,X){return B6($,X,"|")}function o9($){if(!(N2($,0)&&I$($,$.length-1)))return!1;let X=0;for(let Z=0;Z<$.length;Z++){if(N2($,Z))X+=1;if(I$($,Z))X-=1;if(X===0&&Z!==$.length-1)return!1}return!0}function t9($){return $.slice(1,$.length-1)}function s9($){let X=0;for(let Z=0;Z<$.length;Z++){if(N2($,Z))X+=1;if(I$($,Z))X-=1;if(mX($,Z)&&X===0)return!0}return!1}function r9($){for(let X=0;X<$.length;X++)if(N2($,X))return!0;return!1}function a9($){let[X,Z]=[0,0],Q=[];for(let Y=0;Y<$.length;Y++){if(N2($,Y))X+=1;if(I$($,Y))X-=1;if(mX($,Y)&&X===0){let J=$.slice(Z,Y);if(J.length>0)Q.push(Y$(J));Z=Y+1}}let W=$.slice(Z);if(W.length>0)Q.push(Y$(W));if(Q.length===0)return{type:"const",const:""};if(Q.length===1)return Q[0];return{type:"or",expr:Q}}function e9($){function X(W,Y){if(!N2(W,Y))throw new M6("TemplateLiteralParser: Index must point to open parens");let J=0;for(let z=Y;z<W.length;z++){if(N2(W,z))J+=1;if(I$(W,z))J-=1;if(J===0)return[Y,z]}throw new M6("TemplateLiteralParser: Unclosed group parens in expression")}function Z(W,Y){for(let J=Y;J<W.length;J++)if(N2(W,J))return[Y,J];return[Y,W.length]}let Q=[];for(let W=0;W<$.length;W++)if(N2($,W)){let[Y,J]=X($,W),z=$.slice(Y,J+1);Q.push(Y$(z)),W=J}else{let[Y,J]=Z($,W),z=$.slice(Y,J);if(z.length>0)Q.push(Y$(z));W=J-1}return Q.length===0?{type:"const",const:""}:Q.length===1?Q[0]:{type:"and",expr:Q}}function Y$($){return o9($)?Y$(t9($)):s9($)?a9($):r9($)?e9($):{type:"const",const:n9($)}}function J$($){return Y$($.slice(1,$.length-1))}class uX extends m{}function $4($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function X4($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function Z4($){return $.type==="const"&&$.const===".*"}function y2($){return $4($)||Z4($)?!1:X4($)?!0:$.type==="and"?$.expr.every((X)=>y2(X)):$.type==="or"?$.expr.every((X)=>y2(X)):$.type==="const"?!0:(()=>{throw new uX("Unknown expression type")})()}function S8($){let X=J$($.pattern);return y2(X)}class cX extends m{}function*iX($){if($.length===1)return yield*$[0];for(let X of $[0])for(let Z of iX($.slice(1)))yield`${X}${Z}`}function*Q4($){return yield*iX($.expr.map((X)=>[...x$(X)]))}function*W4($){for(let X of $.expr)yield*x$(X)}function*Y4($){return yield $.const}function*x$($){return $.type==="and"?yield*Q4($):$.type==="or"?yield*W4($):$.type==="const"?yield*Y4($):(()=>{throw new cX("Unknown expression")})()}function z$($){let X=J$($.pattern);return y2(X)?[...x$(X)]:[]}function M0($,X={}){return{...X,[N]:"Literal",const:$,type:typeof $}}function k$($={}){return{...$,[N]:"Boolean",type:"boolean"}}function d2($={}){return{...$,[N]:"BigInt",type:"bigint"}}function p1($={}){return{...$,[N]:"Number",type:"number"}}function P1($={}){return{...$,[N]:"String",type:"string"}}function*J4($){let X=$.trim().replace(/"|'/g,"");return X==="boolean"?yield k$():X==="number"?yield p1():X==="bigint"?yield d2():X==="string"?yield P1():yield(()=>{let Z=X.split("|").map((Q)=>M0(Q.trim()));return Z.length===0?w0():Z.length===1?Z[0]:$2(Z)})()}function*z4($){if($[1]!=="{"){let X=M0("$"),Z=w6($.slice(1));return yield*[X,...Z]}for(let X=2;X<$.length;X++)if($[X]==="}"){let Z=J4($.slice(2,X)),Q=w6($.slice(X+1));return yield*[...Z,...Q]}yield M0($)}function*w6($){for(let X=0;X<$.length;X++)if($[X]==="$"){let Z=M0($.slice(0,X)),Q=z4($.slice(X));return yield*[Z,...Q]}yield M0($)}function lX($){return[...w6($)]}var nX="(true|false)",K8="(0|[1-9][0-9]*)",oX="(.*)";var D2="^(0|[1-9][0-9]*)$",b2="^(.*)$";class tX extends m{}function M4($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sX($,X){return D1($)?$.pattern.slice(1,$.pattern.length-1):z0($)?`(${$.anyOf.map((Z)=>sX(Z,X)).join("|")})`:g2($)?`${X}${K8}`:T2($)?`${X}${K8}`:Q6($)?`${X}${K8}`:R$($)?`${X}${oX}`:H2($)?`${X}${M4($.const.toString())}`:W6($)?`${X}${nX}`:(()=>{throw new tX(`Unexpected Kind '${$[N]}'`)})()}function q6($){return`^${$.map((X)=>sX(X,"")).join("")}$`}function v2($){let Z=z$($).map((Q)=>M0(Q));return $2(Z)}function T$($,X={}){let Z=_0($)?q6(lX($)):q6($);return{...X,[N]:"TemplateLiteral",type:"string",pattern:Z}}function B4($){return z$($).map((Z)=>Z.toString())}function w4($){let X=[];for(let Z of $)X.push(...M1(Z));return X}function q4($){return[$.toString()]}function M1($){return[...new Set(D1($)?B4($):z0($)?w4($.anyOf):H2($)?q4($.const):g2($)?["[number]"]:T2($)?["[number]"]:[])]}function U4($,X,Z){let Q={};for(let W of Object.getOwnPropertyNames(X))Q[W]=h2($,M1(X[W]),Z);return Q}function G4($,X,Z){return U4($,X.properties,Z)}function rX($,X,Z){let Q=G4($,X,Z);return Z0(Q)}function eX($,X){return $.map((Z)=>$Z(Z,X))}function A4($){return $.filter((X)=>!Q$(X))}function H4($,X){return F8(A4(eX($,X)))}function N4($){return $.some((X)=>Q$(X))?[]:$}function D4($,X){return $2(N4(eX($,X)))}function L4($,X){return X in $?$[X]:X==="[number]"?$2($):w0()}function P4($,X){return X==="[number]"?$:w0()}function O4($,X){return X in $?$[X]:w0()}function $Z($,X){return g0($)?H4($.allOf,X):z0($)?D4($.anyOf,X):h1($)?L4($.items??[],X):A2($)?P4($.items,X):v0($)?O4($.properties,X):w0()}function g$($,X){return X.map((Z)=>$Z($,Z))}function aX($,X){return $2(g$($,X))}function h2($,X,Z={}){return K0(X)?C(rX($,X,Z)):N1(X)?C(XZ($,X,Z)):L1(X)?C(aX($,M1(X)),Z):C(aX($,X),Z)}function _4($,X,Z){return{[X]:h2($,[X],Z)}}function F4($,X,Z){return X.reduce((Q,W)=>{return{...Q,..._4($,W,Z)}},{})}function S4($,X,Z){return F4($,X.keys,Z)}function XZ($,X,Z){let Q=S4($,X,Z);return Z0(Q)}function f$($,X={}){return{...X,[N]:"Iterator",type:"Iterator",items:C($)}}function K4($,X={}){let Z=globalThis.Object.getOwnPropertyNames($),Q=Z.filter((z)=>e1($[z])),W=Z.filter((z)=>!Q.includes(z)),Y=L1(X.additionalProperties)?{additionalProperties:C(X.additionalProperties)}:{},J={};for(let z of Z)J[z]=C($[z]);return W.length>0?{...X,...Y,[N]:"Object",type:"object",properties:J,required:W}:{...X,...Y,[N]:"Object",type:"object",properties:J}}var U0=K4;function y$($,X={}){return{...X,[N]:"Promise",type:"Promise",item:C($)}}function j4($){return k0(C($),[r1])}function C4($){return{...C($),[r1]:"Readonly"}}function b4($,X){return X===!1?j4($):C4($)}function O1($,X){let Z=X??!0;return K0($)?ZZ($,Z):b4($,Z)}function R4($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=O1($[Q],X);return Z}function V4($,X){return R4($.properties,X)}function ZZ($,X){let Z=V4($,X);return Z0(Z)}function m1($,X={}){let[Z,Q,W]=[!1,$.length,$.length];return $.length>0?{...X,[N]:"Tuple",type:"array",items:x0($),additionalItems:Z,minItems:Q,maxItems:W}:{...X,[N]:"Tuple",type:"array",minItems:Q,maxItems:W}}function QZ($,X){return $.includes(X)}function WZ($){return[...new Set($)]}function E4($,X){return $.filter((Z)=>X.includes(Z))}function I4($,X){return $.reduce((Z,Q)=>{return E4(Z,Q)},X)}function YZ($){return $.length===1?$[0]:$.length>1?I4($.slice(1),$[0]):[]}function JZ($){let X=[];for(let Z of $)X.push(...Z);return X}function zZ($,X){return $ in X?R1($,X[$]):Z0(X)}function x4($){return{[$]:M0($)}}function k4($){let X={};for(let Z of $)X[Z]=M0(Z);return X}function T4($,X){return QZ(X,$)?x4($):k4(X)}function g4($,X){let Z=T4($,X);return zZ($,Z)}function d$($,X){return X.map((Z)=>R1($,Z))}function f4($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames(X))Z[Q]=R1($,X[Q]);return Z}function R1($,X){return e1(X)?X1(R1($,k0(X,[s0]))):dX(X)?O1(R1($,k0(X,[r1]))):K0(X)?zZ($,X.properties):N1(X)?g4($,X.keys):j$(X)?S$(d$($,X.parameters),R1($,X.returns)):C$(X)?G2(d$($,X.parameters),R1($,X.returns)):K$(X)?F$(R1($,X.items)):b$(X)?f$(R1($,X.items)):g0(X)?Z1(d$($,X.allOf)):z0(X)?q0(d$($,X.anyOf)):h1(X)?m1(d$($,X.items??[])):v0(X)?U0(f4($,X.properties)):A2(X)?_$(R1($,X.items)):f2(X)?y$(R1($,X.item)):X}function y4($,X){let Z={};for(let Q of $)Z[Q]=R1(Q,X);return Z}function U6($,X,Z={}){let Q=L1($)?M1($):$,W=X({[N]:"MappedKey",keys:Q}),Y=y4(Q,W);return C(U0(Y),Z)}function MZ($){let X=[];for(let Z of $)X.push(B1(Z));return X}function d4($){let X=MZ($);return JZ(X)}function v4($){let X=MZ($);return YZ(X)}function h4($){return $.map((X,Z)=>Z.toString())}function p4($){return["[number]"]}function m4($){return globalThis.Object.getOwnPropertyNames($)}function u4($){if(!G6)return[];return globalThis.Object.getOwnPropertyNames($).map((Z)=>{return Z[0]==="^"&&Z[Z.length-1]==="$"?Z.slice(1,Z.length-1):Z})}function B1($){return g0($)?d4($.allOf):z0($)?v4($.anyOf):h1($)?h4($.items??[]):A2($)?p4($.items):v0($)?m4($.properties):Y6($)?u4($.patternProperties):[]}var G6=!1;function L2($){G6=!0;let X=B1($);return G6=!1,`^(${X.map((Q)=>`(${Q})`).join("|")})\$`}function c4($){return $.map((X)=>X==="[number]"?p1():M0(X))}function v$($,X={}){if(K0($))return BZ($,X);else{let Z=B1($),Q=c4(Z),W=$2(Q);return C(W,X)}}function i4($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=v$($[Q],X);return Z}function l4($,X){return i4($.properties,X)}function BZ($,X){let Z=l4($,X);return Z0(Z)}function j8($){let X=B1($),Z=g$($,X);return X.map((Q,W)=>[X[W],Z[W]])}function n4($){return $.allOf.every((X)=>P2(X))}function o4($){return $.anyOf.some((X)=>P2(X))}function t4($){return!P2($.not)}function P2($){return $[N]==="Intersect"?n4($):$[N]==="Union"?o4($):$[N]==="Not"?t4($):$[N]==="Undefined"?!0:!1}function s4($){switch($.errorType){case D.ArrayContains:return"Expected array to contain at least one matching value";case D.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case D.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case D.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case D.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case D.ArrayUniqueItems:return"Expected array elements to be unique";case D.Array:return"Expected array";case D.AsyncIterator:return"Expected AsyncIterator";case D.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case D.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case D.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case D.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case D.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case D.BigInt:return"Expected bigint";case D.Boolean:return"Expected boolean";case D.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case D.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case D.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case D.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case D.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case D.Date:return"Expected Date";case D.Function:return"Expected function";case D.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case D.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case D.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case D.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case D.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case D.Integer:return"Expected integer";case D.IntersectUnevaluatedProperties:return"Unexpected property";case D.Intersect:return"Expected all values to match";case D.Iterator:return"Expected Iterator";case D.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case D.Never:return"Never";case D.Not:return"Value should not match";case D.Null:return"Expected null";case D.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case D.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case D.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case D.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case D.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case D.Number:return"Expected number";case D.Object:return"Expected object";case D.ObjectAdditionalProperties:return"Unexpected property";case D.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case D.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case D.ObjectRequiredProperty:return"Required property";case D.Promise:return"Expected Promise";case D.RegExp:return"Expected string to match regular expression";case D.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case D.StringFormat:return`Expected string to match '${$.schema.format}' format`;case D.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case D.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case D.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case D.String:return"Expected string";case D.Symbol:return"Expected symbol";case D.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case D.Tuple:return"Expected tuple";case D.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case D.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case D.Uint8Array:return"Expected Uint8Array";case D.Undefined:return"Expected undefined";case D.Union:return"Expected union value";case D.Void:return"Expected void";case D.Kind:return`Expected kind '${$.schema[N]}'`;default:return"Unknown error type"}}var r4=s4;function wZ(){return r4}class qZ extends m{constructor($){super(`Unable to dereference schema with \$id '${$.$id}'`);this.schema=$}}function a4($,X){let Z=X.find((Q)=>Q.$id===$.$ref);if(Z===void 0)throw new qZ($);return W0(Z,X)}function W0($,X){return $[N]==="This"||$[N]==="Ref"?a4($,X):$}class UZ extends m{constructor($){super("Unable to hash value");this.value=$}}var _1;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(_1||(_1={}));var M$=BigInt("14695981039346656037"),[e4,$Y]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],XY=Array.from({length:256}).map(($,X)=>BigInt(X)),GZ=new Float64Array(1),AZ=new DataView(GZ.buffer),HZ=new Uint8Array(GZ.buffer);function*ZY($){let X=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Z=0;Z<X;Z++)yield $>>8*(X-1-Z)&255}function QY($){r0(_1.Array);for(let X of $)B$(X)}function WY($){r0(_1.Boolean),r0($?1:0)}function YY($){r0(_1.BigInt),AZ.setBigInt64(0,$);for(let X of HZ)r0(X)}function JY($){r0(_1.Date),B$($.getTime())}function zY($){r0(_1.Null)}function MY($){r0(_1.Number),AZ.setFloat64(0,$);for(let X of HZ)r0(X)}function BY($){r0(_1.Object);for(let X of globalThis.Object.getOwnPropertyNames($).sort())B$(X),B$($[X])}function wY($){r0(_1.String);for(let X=0;X<$.length;X++)for(let Z of ZY($.charCodeAt(X)))r0(Z)}function qY($){r0(_1.Symbol),B$($.description)}function UY($){r0(_1.Uint8Array);for(let X=0;X<$.length;X++)r0($[X])}function GY($){return r0(_1.Undefined)}function B$($){if(p($))return QY($);if(s1($))return WY($);if(n0($))return YY($);if(G1($))return JY($);if(U2($))return zY($);if(y($))return MY($);if(P0($))return BY($);if(o($))return wY($);if(Y1($))return qY($);if($$($))return UY($);if(C0($))return GY($);throw new UZ($)}function r0($){M$=M$^XY[$],M$=M$*e4%$Y}function R2($){return M$=BigInt("14695981039346656037"),B$($),M$}var D;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(D||(D={}));class NZ extends m{constructor($){super("Unknown type");this.schema=$}}function O2($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function a($){return $!==void 0}class C8{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function R($,X,Z,Q){return{type:$,schema:X,path:Z,value:Q,message:wZ()({errorType:$,path:Z,schema:X,value:Q})}}function*AY($,X,Z,Q){}function*HY($,X,Z,Q){if(!p(Q))return yield R(D.Array,$,Z,Q);if(a($.minItems)&&!(Q.length>=$.minItems))yield R(D.ArrayMinItems,$,Z,Q);if(a($.maxItems)&&!(Q.length<=$.maxItems))yield R(D.ArrayMaxItems,$,Z,Q);for(let J=0;J<Q.length;J++)yield*o0($.items,X,`${Z}/${J}`,Q[J]);if($.uniqueItems===!0&&!function(){let J=new Set;for(let z of Q){let w=R2(z);if(J.has(w))return!1;else J.add(w)}return!0}())yield R(D.ArrayUniqueItems,$,Z,Q);if(!(a($.contains)||a($.minContains)||a($.maxContains)))return;let W=a($.contains)?$.contains:w0(),Y=Q.reduce((J,z,w)=>o0(W,X,`${Z}${w}`,z).next().done===!0?J+1:J,0);if(Y===0)yield R(D.ArrayContains,$,Z,Q);if(y($.minContains)&&Y<$.minContains)yield R(D.ArrayMinContains,$,Z,Q);if(y($.maxContains)&&Y>$.maxContains)yield R(D.ArrayMaxContains,$,Z,Q)}function*NY($,X,Z,Q){if(!N8(Q))yield R(D.AsyncIterator,$,Z,Q)}function*DY($,X,Z,Q){if(!n0(Q))return yield R(D.BigInt,$,Z,Q);if(a($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield R(D.BigIntExclusiveMaximum,$,Z,Q);if(a($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield R(D.BigIntExclusiveMinimum,$,Z,Q);if(a($.maximum)&&!(Q<=$.maximum))yield R(D.BigIntMaximum,$,Z,Q);if(a($.minimum)&&!(Q>=$.minimum))yield R(D.BigIntMinimum,$,Z,Q);if(a($.multipleOf)&&Q%$.multipleOf!==BigInt(0))yield R(D.BigIntMultipleOf,$,Z,Q)}function*LY($,X,Z,Q){if(!s1(Q))yield R(D.Boolean,$,Z,Q)}function*PY($,X,Z,Q){yield*o0($.returns,X,Z,Q.prototype)}function*OY($,X,Z,Q){if(!G1(Q))return yield R(D.Date,$,Z,Q);if(a($.exclusiveMaximumTimestamp)&&!(Q.getTime()<$.exclusiveMaximumTimestamp))yield R(D.DateExclusiveMaximumTimestamp,$,Z,Q);if(a($.exclusiveMinimumTimestamp)&&!(Q.getTime()>$.exclusiveMinimumTimestamp))yield R(D.DateExclusiveMinimumTimestamp,$,Z,Q);if(a($.maximumTimestamp)&&!(Q.getTime()<=$.maximumTimestamp))yield R(D.DateMaximumTimestamp,$,Z,Q);if(a($.minimumTimestamp)&&!(Q.getTime()>=$.minimumTimestamp))yield R(D.DateMinimumTimestamp,$,Z,Q);if(a($.multipleOfTimestamp)&&Q.getTime()%$.multipleOfTimestamp!==0)yield R(D.DateMultipleOfTimestamp,$,Z,Q)}function*_Y($,X,Z,Q){if(!O8(Q))yield R(D.Function,$,Z,Q)}function*FY($,X,Z,Q){if(!P8(Q))return yield R(D.Integer,$,Z,Q);if(a($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield R(D.IntegerExclusiveMaximum,$,Z,Q);if(a($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield R(D.IntegerExclusiveMinimum,$,Z,Q);if(a($.maximum)&&!(Q<=$.maximum))yield R(D.IntegerMaximum,$,Z,Q);if(a($.minimum)&&!(Q>=$.minimum))yield R(D.IntegerMinimum,$,Z,Q);if(a($.multipleOf)&&Q%$.multipleOf!==0)yield R(D.IntegerMultipleOf,$,Z,Q)}function*SY($,X,Z,Q){for(let W of $.allOf){let Y=o0(W,X,Z,Q).next();if(!Y.done)yield R(D.Intersect,$,Z,Q),yield Y.value}if($.unevaluatedProperties===!1){let W=new RegExp(L2($));for(let Y of Object.getOwnPropertyNames(Q))if(!W.test(Y))yield R(D.IntersectUnevaluatedProperties,$,`${Z}/${Y}`,Q)}if(typeof $.unevaluatedProperties==="object"){let W=new RegExp(L2($));for(let Y of Object.getOwnPropertyNames(Q))if(!W.test(Y)){let J=o0($.unevaluatedProperties,X,`${Z}/${Y}`,Q[Y]).next();if(!J.done)yield J.value}}}function*KY($,X,Z,Q){if(!D8(Q))yield R(D.Iterator,$,Z,Q)}function*jY($,X,Z,Q){if(Q!==$.const)yield R(D.Literal,$,Z,Q)}function*CY($,X,Z,Q){yield R(D.Never,$,Z,Q)}function*bY($,X,Z,Q){if(o0($.not,X,Z,Q).next().done===!0)yield R(D.Not,$,Z,Q)}function*RY($,X,Z,Q){if(!U2(Q))yield R(D.Null,$,Z,Q)}function*VY($,X,Z,Q){if(!I0.IsNumberLike(Q))return yield R(D.Number,$,Z,Q);if(a($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield R(D.NumberExclusiveMaximum,$,Z,Q);if(a($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield R(D.NumberExclusiveMinimum,$,Z,Q);if(a($.maximum)&&!(Q<=$.maximum))yield R(D.NumberMaximum,$,Z,Q);if(a($.minimum)&&!(Q>=$.minimum))yield R(D.NumberMinimum,$,Z,Q);if(a($.multipleOf)&&Q%$.multipleOf!==0)yield R(D.NumberMultipleOf,$,Z,Q)}function*EY($,X,Z,Q){if(!I0.IsObjectLike(Q))return yield R(D.Object,$,Z,Q);if(a($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield R(D.ObjectMinProperties,$,Z,Q);if(a($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield R(D.ObjectMaxProperties,$,Z,Q);let W=Array.isArray($.required)?$.required:[],Y=Object.getOwnPropertyNames($.properties),J=Object.getOwnPropertyNames(Q);for(let z of W){if(J.includes(z))continue;yield R(D.ObjectRequiredProperty,$.properties[z],`${Z}/${O2(z)}`,void 0)}if($.additionalProperties===!1){for(let z of J)if(!Y.includes(z))yield R(D.ObjectAdditionalProperties,$,`${Z}/${O2(z)}`,Q[z])}if(typeof $.additionalProperties==="object")for(let z of J){if(Y.includes(z))continue;yield*o0($.additionalProperties,X,`${Z}/${O2(z)}`,Q[z])}for(let z of Y){let w=$.properties[z];if($.required&&$.required.includes(z)){if(yield*o0(w,X,`${Z}/${O2(z)}`,Q[z]),P2($)&&!(z in Q))yield R(D.ObjectRequiredProperty,w,`${Z}/${O2(z)}`,void 0)}else if(I0.IsExactOptionalProperty(Q,z))yield*o0(w,X,`${Z}/${O2(z)}`,Q[z])}}function*IY($,X,Z,Q){if(!L8(Q))yield R(D.Promise,$,Z,Q)}function*xY($,X,Z,Q){if(!I0.IsRecordLike(Q))return yield R(D.Object,$,Z,Q);if(a($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield R(D.ObjectMinProperties,$,Z,Q);if(a($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield R(D.ObjectMaxProperties,$,Z,Q);let[W,Y]=Object.entries($.patternProperties)[0],J=new RegExp(W);for(let[z,w]of Object.entries(Q))if(J.test(z))yield*o0(Y,X,`${Z}/${O2(z)}`,w);if(typeof $.additionalProperties==="object"){for(let[z,w]of Object.entries(Q))if(!J.test(z))yield*o0($.additionalProperties,X,`${Z}/${O2(z)}`,w)}if($.additionalProperties===!1)for(let[z,w]of Object.entries(Q)){if(J.test(z))continue;return yield R(D.ObjectAdditionalProperties,$,`${Z}/${O2(z)}`,w)}}function*kY($,X,Z,Q){yield*o0(W0($,X),X,Z,Q)}function*TY($,X,Z,Q){if(!o(Q))return yield R(D.String,$,Z,Q);if(a($.minLength)&&!(Q.length>=$.minLength))yield R(D.StringMinLength,$,Z,Q);if(a($.maxLength)&&!(Q.length<=$.maxLength))yield R(D.StringMaxLength,$,Z,Q);if(!new RegExp($.source,$.flags).test(Q))return yield R(D.RegExp,$,Z,Q)}function*gY($,X,Z,Q){if(!o(Q))return yield R(D.String,$,Z,Q);if(a($.minLength)&&!(Q.length>=$.minLength))yield R(D.StringMinLength,$,Z,Q);if(a($.maxLength)&&!(Q.length<=$.maxLength))yield R(D.StringMaxLength,$,Z,Q);if(o($.pattern)){if(!new RegExp($.pattern).test(Q))yield R(D.StringPattern,$,Z,Q)}if(o($.format)){if(!N0.Has($.format))yield R(D.StringFormatUnknown,$,Z,Q);else if(!N0.Get($.format)(Q))yield R(D.StringFormat,$,Z,Q)}}function*fY($,X,Z,Q){if(!Y1(Q))yield R(D.Symbol,$,Z,Q)}function*yY($,X,Z,Q){if(!o(Q))return yield R(D.String,$,Z,Q);if(!new RegExp($.pattern).test(Q))yield R(D.StringPattern,$,Z,Q)}function*dY($,X,Z,Q){yield*o0(W0($,X),X,Z,Q)}function*vY($,X,Z,Q){if(!p(Q))return yield R(D.Tuple,$,Z,Q);if($.items===void 0&&Q.length!==0)return yield R(D.TupleLength,$,Z,Q);if(Q.length!==$.maxItems)return yield R(D.TupleLength,$,Z,Q);if(!$.items)return;for(let W=0;W<$.items.length;W++)yield*o0($.items[W],X,`${Z}/${W}`,Q[W])}function*hY($,X,Z,Q){if(!C0(Q))yield R(D.Undefined,$,Z,Q)}function*pY($,X,Z,Q){let W=0;for(let Y of $.anyOf){let J=[...o0(Y,X,Z,Q)];if(J.length===0)return;W+=J.length}if(W>0)yield R(D.Union,$,Z,Q)}function*mY($,X,Z,Q){if(!$$(Q))return yield R(D.Uint8Array,$,Z,Q);if(a($.maxByteLength)&&!(Q.length<=$.maxByteLength))yield R(D.Uint8ArrayMaxByteLength,$,Z,Q);if(a($.minByteLength)&&!(Q.length>=$.minByteLength))yield R(D.Uint8ArrayMinByteLength,$,Z,Q)}function*uY($,X,Z,Q){}function*cY($,X,Z,Q){if(!I0.IsVoidLike(Q))yield R(D.Void,$,Z,Q)}function*iY($,X,Z,Q){if(!b0.Get($[N])($,Q))yield R(D.Kind,$,Z,Q)}function*o0($,X,Z,Q){let W=a($.$id)?[...X,$]:X,Y=$;switch(Y[N]){case"Any":return yield*AY(Y,W,Z,Q);case"Array":return yield*HY(Y,W,Z,Q);case"AsyncIterator":return yield*NY(Y,W,Z,Q);case"BigInt":return yield*DY(Y,W,Z,Q);case"Boolean":return yield*LY(Y,W,Z,Q);case"Constructor":return yield*PY(Y,W,Z,Q);case"Date":return yield*OY(Y,W,Z,Q);case"Function":return yield*_Y(Y,W,Z,Q);case"Integer":return yield*FY(Y,W,Z,Q);case"Intersect":return yield*SY(Y,W,Z,Q);case"Iterator":return yield*KY(Y,W,Z,Q);case"Literal":return yield*jY(Y,W,Z,Q);case"Never":return yield*CY(Y,W,Z,Q);case"Not":return yield*bY(Y,W,Z,Q);case"Null":return yield*RY(Y,W,Z,Q);case"Number":return yield*VY(Y,W,Z,Q);case"Object":return yield*EY(Y,W,Z,Q);case"Promise":return yield*IY(Y,W,Z,Q);case"Record":return yield*xY(Y,W,Z,Q);case"Ref":return yield*kY(Y,W,Z,Q);case"RegExp":return yield*TY(Y,W,Z,Q);case"String":return yield*gY(Y,W,Z,Q);case"Symbol":return yield*fY(Y,W,Z,Q);case"TemplateLiteral":return yield*yY(Y,W,Z,Q);case"This":return yield*dY(Y,W,Z,Q);case"Tuple":return yield*vY(Y,W,Z,Q);case"Undefined":return yield*hY(Y,W,Z,Q);case"Union":return yield*pY(Y,W,Z,Q);case"Uint8Array":return yield*mY(Y,W,Z,Q);case"Unknown":return yield*uY(Y,W,Z,Q);case"Void":return yield*cY(Y,W,Z,Q);default:if(!b0.Has(Y[N]))throw new NZ($);return yield*iY(Y,W,Z,Q)}}function h$(...$){let X=$.length===3?o0($[0],$[1],"",$[2]):o0($[0],[],"",$[1]);return new C8(X)}function _2($={}){return{...$,[N]:"Any"}}function X2($={}){return{...$,[N]:"Unknown"}}var U={};x2(U,{TypeGuardUnknownTypeError:()=>DZ,IsVoid:()=>XQ,IsUnsafe:()=>$Q,IsUnknown:()=>eZ,IsUnionLiteral:()=>eY,IsUnion:()=>D6,IsUndefined:()=>rZ,IsUint8Array:()=>aZ,IsTuple:()=>sZ,IsTransform:()=>F0,IsThis:()=>tZ,IsTemplateLiteral:()=>oZ,IsSymbol:()=>nZ,IsString:()=>lZ,IsSchema:()=>l,IsRegExp:()=>iZ,IsRef:()=>cZ,IsRecursive:()=>aY,IsRecord:()=>uZ,IsReadonly:()=>tY,IsProperties:()=>N6,IsPromise:()=>mZ,IsOptional:()=>sY,IsObject:()=>pZ,IsNumber:()=>hZ,IsNull:()=>vZ,IsNot:()=>dZ,IsNever:()=>yZ,IsMappedResult:()=>fZ,IsMappedKey:()=>gZ,IsLiteralValue:()=>TZ,IsLiteralString:()=>xZ,IsLiteralNumber:()=>kZ,IsLiteralBoolean:()=>rY,IsLiteral:()=>m$,IsKindOf:()=>X0,IsKind:()=>ZQ,IsIterator:()=>IZ,IsIntersect:()=>EZ,IsInteger:()=>VZ,IsFunction:()=>RZ,IsDate:()=>bZ,IsConstructor:()=>CZ,IsBoolean:()=>jZ,IsBigInt:()=>KZ,IsAsyncIterator:()=>SZ,IsArray:()=>FZ,IsAny:()=>_Z});class DZ extends m{}var lY=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function LZ($){try{return new RegExp($),!0}catch{return!1}}function A6($){if(!_0($))return!1;for(let X=0;X<$.length;X++){let Z=$.charCodeAt(X);if(Z>=7&&Z<=13||Z===27||Z===127)return!1}return!0}function PZ($){return H6($)||l($)}function p$($){return R0($)||P$($)}function D0($){return R0($)||v1($)}function H6($){return R0($)||C2($)}function G0($){return R0($)||_0($)}function nY($){return R0($)||_0($)&&A6($)&&LZ($)}function oY($){return R0($)||_0($)&&A6($)}function OZ($){return R0($)||l($)}function tY($){return O0($)&&$[r1]==="Readonly"}function sY($){return O0($)&&$[s0]==="Optional"}function _Z($){return X0($,"Any")&&G0($.$id)}function FZ($){return X0($,"Array")&&$.type==="array"&&G0($.$id)&&l($.items)&&D0($.minItems)&&D0($.maxItems)&&H6($.uniqueItems)&&OZ($.contains)&&D0($.minContains)&&D0($.maxContains)}function SZ($){return X0($,"AsyncIterator")&&$.type==="AsyncIterator"&&G0($.$id)&&l($.items)}function KZ($){return X0($,"BigInt")&&$.type==="bigint"&&G0($.$id)&&p$($.exclusiveMaximum)&&p$($.exclusiveMinimum)&&p$($.maximum)&&p$($.minimum)&&p$($.multipleOf)}function jZ($){return X0($,"Boolean")&&$.type==="boolean"&&G0($.$id)}function CZ($){return X0($,"Constructor")&&$.type==="Constructor"&&G0($.$id)&&J1($.parameters)&&$.parameters.every((X)=>l(X))&&l($.returns)}function bZ($){return X0($,"Date")&&$.type==="Date"&&G0($.$id)&&D0($.exclusiveMaximumTimestamp)&&D0($.exclusiveMinimumTimestamp)&&D0($.maximumTimestamp)&&D0($.minimumTimestamp)&&D0($.multipleOfTimestamp)}function RZ($){return X0($,"Function")&&$.type==="Function"&&G0($.$id)&&J1($.parameters)&&$.parameters.every((X)=>l(X))&&l($.returns)}function VZ($){return X0($,"Integer")&&$.type==="integer"&&G0($.$id)&&D0($.exclusiveMaximum)&&D0($.exclusiveMinimum)&&D0($.maximum)&&D0($.minimum)&&D0($.multipleOf)}function N6($){return O0($)&&Object.entries($).every(([X,Z])=>A6(X)&&l(Z))}function EZ($){return X0($,"Intersect")&&(_0($.type)&&$.type!=="object"?!1:!0)&&J1($.allOf)&&$.allOf.every((X)=>l(X)&&!F0(X))&&G0($.type)&&(H6($.unevaluatedProperties)||OZ($.unevaluatedProperties))&&G0($.$id)}function IZ($){return X0($,"Iterator")&&$.type==="Iterator"&&G0($.$id)&&l($.items)}function X0($,X){return O0($)&&N in $&&$[N]===X}function xZ($){return m$($)&&_0($.const)}function kZ($){return m$($)&&v1($.const)}function rY($){return m$($)&&C2($.const)}function m$($){return X0($,"Literal")&&G0($.$id)&&TZ($.const)}function TZ($){return C2($)||v1($)||_0($)}function gZ($){return X0($,"MappedKey")&&J1($.keys)&&$.keys.every((X)=>v1(X)||_0(X))}function fZ($){return X0($,"MappedResult")&&N6($.properties)}function yZ($){return X0($,"Never")&&O0($.not)&&Object.getOwnPropertyNames($.not).length===0}function dZ($){return X0($,"Not")&&l($.not)}function vZ($){return X0($,"Null")&&$.type==="null"&&G0($.$id)}function hZ($){return X0($,"Number")&&$.type==="number"&&G0($.$id)&&D0($.exclusiveMaximum)&&D0($.exclusiveMinimum)&&D0($.maximum)&&D0($.minimum)&&D0($.multipleOf)}function pZ($){return X0($,"Object")&&$.type==="object"&&G0($.$id)&&N6($.properties)&&PZ($.additionalProperties)&&D0($.minProperties)&&D0($.maxProperties)}function mZ($){return X0($,"Promise")&&$.type==="Promise"&&G0($.$id)&&l($.item)}function uZ($){return X0($,"Record")&&$.type==="object"&&G0($.$id)&&PZ($.additionalProperties)&&O0($.patternProperties)&&((X)=>{let Z=Object.getOwnPropertyNames(X.patternProperties);return Z.length===1&&LZ(Z[0])&&O0(X.patternProperties)&&l(X.patternProperties[Z[0]])})($)}function aY($){return O0($)&&H1 in $&&$[H1]==="Recursive"}function cZ($){return X0($,"Ref")&&G0($.$id)&&_0($.$ref)}function iZ($){return X0($,"RegExp")&&G0($.$id)&&_0($.source)&&_0($.flags)&&D0($.maxLength)&&D0($.minLength)}function lZ($){return X0($,"String")&&$.type==="string"&&G0($.$id)&&D0($.minLength)&&D0($.maxLength)&&nY($.pattern)&&oY($.format)}function nZ($){return X0($,"Symbol")&&$.type==="symbol"&&G0($.$id)}function oZ($){return X0($,"TemplateLiteral")&&$.type==="string"&&_0($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function tZ($){return X0($,"This")&&G0($.$id)&&_0($.$ref)}function F0($){return O0($)&&j0 in $}function sZ($){return X0($,"Tuple")&&$.type==="array"&&G0($.$id)&&v1($.minItems)&&v1($.maxItems)&&$.minItems===$.maxItems&&(R0($.items)&&R0($.additionalItems)&&$.minItems===0||J1($.items)&&$.items.every((X)=>l(X)))}function rZ($){return X0($,"Undefined")&&$.type==="undefined"&&G0($.$id)}function eY($){return D6($)&&$.anyOf.every((X)=>xZ(X)||kZ(X))}function D6($){return X0($,"Union")&&G0($.$id)&&O0($)&&J1($.anyOf)&&$.anyOf.every((X)=>l(X))}function aZ($){return X0($,"Uint8Array")&&$.type==="Uint8Array"&&G0($.$id)&&D0($.minByteLength)&&D0($.maxByteLength)}function eZ($){return X0($,"Unknown")&&G0($.$id)}function $Q($){return X0($,"Unsafe")}function XQ($){return X0($,"Void")&&$.type==="void"&&G0($.$id)}function ZQ($){return O0($)&&N in $&&_0($[N])&&!lY.includes($[N])}function l($){return O0($)&&(_Z($)||FZ($)||jZ($)||KZ($)||SZ($)||CZ($)||bZ($)||RZ($)||VZ($)||EZ($)||IZ($)||m$($)||gZ($)||fZ($)||yZ($)||dZ($)||vZ($)||hZ($)||pZ($)||mZ($)||uZ($)||cZ($)||iZ($)||lZ($)||nZ($)||oZ($)||tZ($)||sZ($)||rZ($)||D6($)||aZ($)||eZ($)||$Q($)||XQ($)||ZQ($))}class zQ extends m{}var L;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(L||(L={}));function V1($){return $===L.False?$:L.True}function w$($){throw new zQ($)}function f0($){return U.IsNever($)||U.IsIntersect($)||U.IsUnion($)||U.IsUnknown($)||U.IsAny($)}function y0($,X){return U.IsNever(X)?wQ($,X):U.IsIntersect(X)?b8($,X):U.IsUnion(X)?F6($,X):U.IsUnknown(X)?AQ($,X):U.IsAny(X)?_6($,X):w$("StructuralRight")}function _6($,X){return L.True}function $7($,X){return U.IsIntersect(X)?b8($,X):U.IsUnion(X)&&X.anyOf.some((Z)=>U.IsAny(Z)||U.IsUnknown(Z))?L.True:U.IsUnion(X)?L.Union:U.IsUnknown(X)?L.True:U.IsAny(X)?L.True:L.Union}function X7($,X){return U.IsUnknown($)?L.False:U.IsAny($)?L.Union:U.IsNever($)?L.True:L.False}function Z7($,X){return U.IsObject(X)&&R8(X)?L.True:f0(X)?y0($,X):!U.IsArray(X)?L.False:V1(A0($.items,X.items))}function Q7($,X){return f0(X)?y0($,X):!U.IsAsyncIterator(X)?L.False:V1(A0($.items,X.items))}function W7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsBigInt(X)?L.True:L.False}function MQ($,X){return U.IsLiteralBoolean($)?L.True:U.IsBoolean($)?L.True:L.False}function Y7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsBoolean(X)?L.True:L.False}function J7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):!U.IsConstructor(X)?L.False:$.parameters.length>X.parameters.length?L.False:!$.parameters.every((Z,Q)=>V1(A0(X.parameters[Q],Z))===L.True)?L.False:V1(A0($.returns,X.returns))}function z7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsDate(X)?L.True:L.False}function M7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):!U.IsFunction(X)?L.False:$.parameters.length>X.parameters.length?L.False:!$.parameters.every((Z,Q)=>V1(A0(X.parameters[Q],Z))===L.True)?L.False:V1(A0($.returns,X.returns))}function BQ($,X){return U.IsLiteral($)&&z1.IsNumber($.const)?L.True:U.IsNumber($)||U.IsInteger($)?L.True:L.False}function B7($,X){return U.IsInteger(X)||U.IsNumber(X)?L.True:f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):L.False}function b8($,X){return X.allOf.every((Z)=>A0($,Z)===L.True)?L.True:L.False}function w7($,X){return $.allOf.some((Z)=>A0(Z,X)===L.True)?L.True:L.False}function q7($,X){return f0(X)?y0($,X):!U.IsIterator(X)?L.False:V1(A0($.items,X.items))}function U7($,X){return U.IsLiteral(X)&&X.const===$.const?L.True:f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsString(X)?GQ($,X):U.IsNumber(X)?qQ($,X):U.IsInteger(X)?BQ($,X):U.IsBoolean(X)?MQ($,X):L.False}function wQ($,X){return L.False}function G7($,X){return L.True}function QQ($){let[X,Z]=[$,0];while(!0){if(!U.IsNot(X))break;X=X.not,Z+=1}return Z%2===0?X:X2()}function A7($,X){return U.IsNot($)?A0(QQ($),X):U.IsNot(X)?A0($,QQ(X)):w$("Invalid fallthrough for Not")}function H7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsNull(X)?L.True:L.False}function qQ($,X){return U.IsLiteralNumber($)?L.True:U.IsNumber($)||U.IsInteger($)?L.True:L.False}function N7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsInteger(X)||U.IsNumber(X)?L.True:L.False}function w1($,X){return Object.getOwnPropertyNames($.properties).length===X}function WQ($){return R8($)}function YQ($){return w1($,0)||w1($,1)&&"description"in $.properties&&U.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(U.IsString($.properties.description.anyOf[0])&&U.IsUndefined($.properties.description.anyOf[1])||U.IsString($.properties.description.anyOf[1])&&U.IsUndefined($.properties.description.anyOf[0]))}function L6($){return w1($,0)}function JQ($){return w1($,0)}function D7($){return w1($,0)}function L7($){return w1($,0)}function P7($){return R8($)}function O7($){let X=p1();return w1($,0)||w1($,1)&&"length"in $.properties&&V1(A0($.properties.length,X))===L.True}function _7($){return w1($,0)}function R8($){let X=p1();return w1($,0)||w1($,1)&&"length"in $.properties&&V1(A0($.properties.length,X))===L.True}function F7($){let X=G2([_2()],_2());return w1($,0)||w1($,1)&&"then"in $.properties&&V1(A0($.properties.then,X))===L.True}function UQ($,X){return A0($,X)===L.False?L.False:U.IsOptional($)&&!U.IsOptional(X)?L.False:L.True}function a0($,X){return U.IsUnknown($)?L.False:U.IsAny($)?L.Union:U.IsNever($)||U.IsLiteralString($)&&WQ(X)||U.IsLiteralNumber($)&&L6(X)||U.IsLiteralBoolean($)&&JQ(X)||U.IsSymbol($)&&YQ(X)||U.IsBigInt($)&&D7(X)||U.IsString($)&&WQ(X)||U.IsSymbol($)&&YQ(X)||U.IsNumber($)&&L6(X)||U.IsInteger($)&&L6(X)||U.IsBoolean($)&&JQ(X)||U.IsUint8Array($)&&P7(X)||U.IsDate($)&&L7(X)||U.IsConstructor($)&&_7(X)||U.IsFunction($)&&O7(X)?L.True:U.IsRecord($)&&U.IsString(P6($))?(()=>{return X[H1]==="Record"?L.True:L.False})():U.IsRecord($)&&U.IsNumber(P6($))?(()=>{return w1(X,0)?L.True:L.False})():L.False}function S7($,X){return f0(X)?y0($,X):U.IsRecord(X)?E1($,X):!U.IsObject(X)?L.False:(()=>{for(let Z of Object.getOwnPropertyNames(X.properties)){if(!(Z in $.properties)&&!U.IsOptional(X.properties[Z]))return L.False;if(U.IsOptional(X.properties[Z]))return L.True;if(UQ($.properties[Z],X.properties[Z])===L.False)return L.False}return L.True})()}function K7($,X){return f0(X)?y0($,X):U.IsObject(X)&&F7(X)?L.True:!U.IsPromise(X)?L.False:V1(A0($.item,X.item))}function P6($){return D2 in $.patternProperties?p1():(b2 in $.patternProperties)?P1():w$("Unknown record key pattern")}function O6($){return D2 in $.patternProperties?$.patternProperties[D2]:(b2 in $.patternProperties)?$.patternProperties[b2]:w$("Unable to get record value schema")}function E1($,X){let[Z,Q]=[P6(X),O6(X)];return U.IsLiteralString($)&&U.IsNumber(Z)&&V1(A0($,Q))===L.True?L.True:U.IsUint8Array($)&&U.IsNumber(Z)?A0($,Q):U.IsString($)&&U.IsNumber(Z)?A0($,Q):U.IsArray($)&&U.IsNumber(Z)?A0($,Q):U.IsObject($)?(()=>{for(let W of Object.getOwnPropertyNames($.properties))if(UQ(Q,$.properties[W])===L.False)return L.False;return L.True})():L.False}function j7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):!U.IsRecord(X)?L.False:A0(O6($),O6(X))}function C7($,X){let Z=U.IsRegExp($)?P1():$,Q=U.IsRegExp(X)?P1():X;return A0(Z,Q)}function GQ($,X){return U.IsLiteral($)&&z1.IsString($.const)?L.True:U.IsString($)?L.True:L.False}function b7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsString(X)?L.True:L.False}function R7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsSymbol(X)?L.True:L.False}function V7($,X){return U.IsTemplateLiteral($)?A0(v2($),X):U.IsTemplateLiteral(X)?A0($,v2(X)):w$("Invalid fallthrough for TemplateLiteral")}function E7($,X){return U.IsArray(X)&&$.items!==void 0&&$.items.every((Z)=>A0(Z,X.items)===L.True)}function I7($,X){return U.IsNever($)?L.True:U.IsUnknown($)?L.False:U.IsAny($)?L.Union:L.False}function x7($,X){return f0(X)?y0($,X):U.IsObject(X)&&R8(X)?L.True:U.IsArray(X)&&E7($,X)?L.True:!U.IsTuple(X)?L.False:z1.IsUndefined($.items)&&!z1.IsUndefined(X.items)||!z1.IsUndefined($.items)&&z1.IsUndefined(X.items)?L.False:z1.IsUndefined($.items)&&!z1.IsUndefined(X.items)?L.True:$.items.every((Z,Q)=>A0(Z,X.items[Q])===L.True)?L.True:L.False}function k7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsUint8Array(X)?L.True:L.False}function T7($,X){return f0(X)?y0($,X):U.IsObject(X)?a0($,X):U.IsRecord(X)?E1($,X):U.IsVoid(X)?y7($,X):U.IsUndefined(X)?L.True:L.False}function F6($,X){return X.anyOf.some((Z)=>A0($,Z)===L.True)?L.True:L.False}function g7($,X){return $.anyOf.every((Z)=>A0(Z,X)===L.True)?L.True:L.False}function AQ($,X){return L.True}function f7($,X){return U.IsNever(X)?wQ($,X):U.IsIntersect(X)?b8($,X):U.IsUnion(X)?F6($,X):U.IsAny(X)?_6($,X):U.IsString(X)?GQ($,X):U.IsNumber(X)?qQ($,X):U.IsInteger(X)?BQ($,X):U.IsBoolean(X)?MQ($,X):U.IsArray(X)?X7($,X):U.IsTuple(X)?I7($,X):U.IsObject(X)?a0($,X):U.IsUnknown(X)?L.True:L.False}function y7($,X){return U.IsUndefined($)?L.True:U.IsUndefined($)?L.True:L.False}function d7($,X){return U.IsIntersect(X)?b8($,X):U.IsUnion(X)?F6($,X):U.IsUnknown(X)?AQ($,X):U.IsAny(X)?_6($,X):U.IsObject(X)?a0($,X):U.IsVoid(X)?L.True:L.False}function A0($,X){return U.IsTemplateLiteral($)||U.IsTemplateLiteral(X)?V7($,X):U.IsRegExp($)||U.IsRegExp(X)?C7($,X):U.IsNot($)||U.IsNot(X)?A7($,X):U.IsAny($)?$7($,X):U.IsArray($)?Z7($,X):U.IsBigInt($)?W7($,X):U.IsBoolean($)?Y7($,X):U.IsAsyncIterator($)?Q7($,X):U.IsConstructor($)?J7($,X):U.IsDate($)?z7($,X):U.IsFunction($)?M7($,X):U.IsInteger($)?B7($,X):U.IsIntersect($)?w7($,X):U.IsIterator($)?q7($,X):U.IsLiteral($)?U7($,X):U.IsNever($)?G7($,X):U.IsNull($)?H7($,X):U.IsNumber($)?N7($,X):U.IsObject($)?S7($,X):U.IsRecord($)?j7($,X):U.IsString($)?b7($,X):U.IsSymbol($)?R7($,X):U.IsTuple($)?x7($,X):U.IsPromise($)?K7($,X):U.IsUint8Array($)?k7($,X):U.IsUndefined($)?T7($,X):U.IsUnion($)?g7($,X):U.IsUnknown($)?f7($,X):U.IsVoid($)?d7($,X):w$(`Unknown left type operand '${$[N]}'`)}function V2($,X){return A0($,X)}function v7($,X,Z,Q,W){let Y={};for(let J of globalThis.Object.getOwnPropertyNames($))Y[J]=p2($[J],X,Z,Q,W);return Y}function h7($,X,Z,Q,W){return v7($.properties,X,Z,Q,W)}function HQ($,X,Z,Q,W){let Y=h7($,X,Z,Q,W);return Z0(Y)}function p7($,X,Z,Q){let W=V2($,X);return W===L.Union?q0([Z,Q]):W===L.True?Z:Q}function p2($,X,Z,Q,W={}){return K0($)?HQ($,X,Z,Q,W):N1($)?C(NQ($,X,Z,Q,W)):C(p7($,X,Z,Q),W)}function m7($,X,Z,Q,W){return{[$]:p2(M0($),X,Z,Q,W)}}function u7($,X,Z,Q,W){return $.reduce((Y,J)=>{return{...Y,...m7(J,X,Z,Q,W)}},{})}function c7($,X,Z,Q,W){return u7($.keys,X,Z,Q,W)}function NQ($,X,Z,Q,W){let Y=c7($,X,Z,Q,W);return Z0(Y)}class DQ extends m{constructor($){super("Unknown type");this.schema=$}}function i7($){return $[N]==="Any"||$[N]==="Unknown"}function e($){return $!==void 0}function l7($,X,Z){return!0}function n7($,X,Z){if(!p(Z))return!1;if(e($.minItems)&&!(Z.length>=$.minItems))return!1;if(e($.maxItems)&&!(Z.length<=$.maxItems))return!1;if(!Z.every((Y)=>t0($.items,X,Y)))return!1;if($.uniqueItems===!0&&!function(){let Y=new Set;for(let J of Z){let z=R2(J);if(Y.has(z))return!1;else Y.add(z)}return!0}())return!1;if(!(e($.contains)||y($.minContains)||y($.maxContains)))return!0;let Q=e($.contains)?$.contains:w0(),W=Z.reduce((Y,J)=>t0(Q,X,J)?Y+1:Y,0);if(W===0)return!1;if(y($.minContains)&&W<$.minContains)return!1;if(y($.maxContains)&&W>$.maxContains)return!1;return!0}function o7($,X,Z){return N8(Z)}function t7($,X,Z){if(!n0(Z))return!1;if(e($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(e($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(e($.maximum)&&!(Z<=$.maximum))return!1;if(e($.minimum)&&!(Z>=$.minimum))return!1;if(e($.multipleOf)&&Z%$.multipleOf!==BigInt(0))return!1;return!0}function s7($,X,Z){return s1(Z)}function r7($,X,Z){return t0($.returns,X,Z.prototype)}function a7($,X,Z){if(!G1(Z))return!1;if(e($.exclusiveMaximumTimestamp)&&!(Z.getTime()<$.exclusiveMaximumTimestamp))return!1;if(e($.exclusiveMinimumTimestamp)&&!(Z.getTime()>$.exclusiveMinimumTimestamp))return!1;if(e($.maximumTimestamp)&&!(Z.getTime()<=$.maximumTimestamp))return!1;if(e($.minimumTimestamp)&&!(Z.getTime()>=$.minimumTimestamp))return!1;if(e($.multipleOfTimestamp)&&Z.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function e7($,X,Z){return O8(Z)}function $5($,X,Z){if(!P8(Z))return!1;if(e($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(e($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(e($.maximum)&&!(Z<=$.maximum))return!1;if(e($.minimum)&&!(Z>=$.minimum))return!1;if(e($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0}function X5($,X,Z){let Q=$.allOf.every((W)=>t0(W,X,Z));if($.unevaluatedProperties===!1){let W=new RegExp(L2($)),Y=Object.getOwnPropertyNames(Z).every((J)=>W.test(J));return Q&&Y}else if(l($.unevaluatedProperties)){let W=new RegExp(L2($)),Y=Object.getOwnPropertyNames(Z).every((J)=>W.test(J)||t0($.unevaluatedProperties,X,Z[J]));return Q&&Y}else return Q}function Z5($,X,Z){return D8(Z)}function Q5($,X,Z){return Z===$.const}function W5($,X,Z){return!1}function Y5($,X,Z){return!t0($.not,X,Z)}function J5($,X,Z){return U2(Z)}function z5($,X,Z){if(!I0.IsNumberLike(Z))return!1;if(e($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(e($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(e($.minimum)&&!(Z>=$.minimum))return!1;if(e($.maximum)&&!(Z<=$.maximum))return!1;if(e($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0}function M5($,X,Z){if(!I0.IsObjectLike(Z))return!1;if(e($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(e($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;let Q=Object.getOwnPropertyNames($.properties);for(let W of Q){let Y=$.properties[W];if($.required&&$.required.includes(W)){if(!t0(Y,X,Z[W]))return!1;if((P2(Y)||i7(Y))&&!(W in Z))return!1}else if(I0.IsExactOptionalProperty(Z,W)&&!t0(Y,X,Z[W]))return!1}if($.additionalProperties===!1){let W=Object.getOwnPropertyNames(Z);if($.required&&$.required.length===Q.length&&W.length===Q.length)return!0;else return W.every((Y)=>Q.includes(Y))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Z).every((Y)=>Q.includes(Y)||t0($.additionalProperties,X,Z[Y]));else return!0}function B5($,X,Z){return L8(Z)}function w5($,X,Z){if(!I0.IsRecordLike(Z))return!1;if(e($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(e($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;let[Q,W]=Object.entries($.patternProperties)[0],Y=new RegExp(Q),J=Object.entries(Z).every(([G,B])=>{return Y.test(G)?t0(W,X,B):!0}),z=typeof $.additionalProperties==="object"?Object.entries(Z).every(([G,B])=>{return!Y.test(G)?t0($.additionalProperties,X,B):!0}):!0,w=$.additionalProperties===!1?Object.getOwnPropertyNames(Z).every((G)=>{return Y.test(G)}):!0;return J&&z&&w}function q5($,X,Z){return t0(W0($,X),X,Z)}function U5($,X,Z){let Q=new RegExp($.source,$.flags);if(e($.minLength)){if(!(Z.length>=$.minLength))return!1}if(e($.maxLength)){if(!(Z.length<=$.maxLength))return!1}return Q.test(Z)}function G5($,X,Z){if(!o(Z))return!1;if(e($.minLength)){if(!(Z.length>=$.minLength))return!1}if(e($.maxLength)){if(!(Z.length<=$.maxLength))return!1}if(e($.pattern)){if(!new RegExp($.pattern).test(Z))return!1}if(e($.format)){if(!N0.Has($.format))return!1;return N0.Get($.format)(Z)}return!0}function A5($,X,Z){return Y1(Z)}function H5($,X,Z){return o(Z)&&new RegExp($.pattern).test(Z)}function N5($,X,Z){return t0(W0($,X),X,Z)}function D5($,X,Z){if(!p(Z))return!1;if($.items===void 0&&Z.length!==0)return!1;if(Z.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Q=0;Q<$.items.length;Q++)if(!t0($.items[Q],X,Z[Q]))return!1;return!0}function L5($,X,Z){return C0(Z)}function P5($,X,Z){return $.anyOf.some((Q)=>t0(Q,X,Z))}function O5($,X,Z){if(!$$(Z))return!1;if(e($.maxByteLength)&&!(Z.length<=$.maxByteLength))return!1;if(e($.minByteLength)&&!(Z.length>=$.minByteLength))return!1;return!0}function _5($,X,Z){return!0}function F5($,X,Z){return I0.IsVoidLike(Z)}function S5($,X,Z){if(!b0.Has($[N]))return!1;return b0.Get($[N])($,Z)}function t0($,X,Z){let Q=e($.$id)?[...X,$]:X,W=$;switch(W[N]){case"Any":return l7(W,Q,Z);case"Array":return n7(W,Q,Z);case"AsyncIterator":return o7(W,Q,Z);case"BigInt":return t7(W,Q,Z);case"Boolean":return s7(W,Q,Z);case"Constructor":return r7(W,Q,Z);case"Date":return a7(W,Q,Z);case"Function":return e7(W,Q,Z);case"Integer":return $5(W,Q,Z);case"Intersect":return X5(W,Q,Z);case"Iterator":return Z5(W,Q,Z);case"Literal":return Q5(W,Q,Z);case"Never":return W5(W,Q,Z);case"Not":return Y5(W,Q,Z);case"Null":return J5(W,Q,Z);case"Number":return z5(W,Q,Z);case"Object":return M5(W,Q,Z);case"Promise":return B5(W,Q,Z);case"Record":return w5(W,Q,Z);case"Ref":return q5(W,Q,Z);case"RegExp":return U5(W,Q,Z);case"String":return G5(W,Q,Z);case"Symbol":return A5(W,Q,Z);case"TemplateLiteral":return H5(W,Q,Z);case"This":return N5(W,Q,Z);case"Tuple":return D5(W,Q,Z);case"Undefined":return L5(W,Q,Z);case"Union":return P5(W,Q,Z);case"Uint8Array":return O5(W,Q,Z);case"Unknown":return _5(W,Q,Z);case"Void":return F5(W,Q,Z);default:if(!b0.Has(W[N]))throw new DQ(W);return S5(W,Q,Z)}}function B0(...$){return $.length===3?t0($[0],$[1],$[2]):t0($[0],[],$[1])}function K5($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=H0($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=H0($[Z]);return X}function j5($){return $.map((X)=>H0(X))}function C5($){return $.slice()}function b5($){return new Date($.toISOString())}function R5($){return $}function H0($){if(p($))return j5($);if(G1($))return b5($);if(P0($))return K5($);if(b1($))return C5($);if(A1($))return R5($);throw new Error("ValueClone: Unable to clone value")}class I1 extends m{constructor($,X){super(X);this.schema=$}}function Y0($){return typeof $==="function"?$:H0($)}function V5($,X){if(s($,"default"))return Y0($.default);else return{}}function E5($,X){if($.uniqueItems===!0&&!s($,"default"))throw new I1($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!s($,"default"))throw new I1($,"Array with the contains constraint requires a default value");else if("default"in $)return Y0($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Z)=>{return F1($.items,X)});else return[]}function I5($,X){if(s($,"default"))return Y0($.default);else return async function*(){}()}function x5($,X){if(s($,"default"))return Y0($.default);else return BigInt(0)}function k5($,X){if(s($,"default"))return Y0($.default);else return!1}function T5($,X){if(s($,"default"))return Y0($.default);else{let Z=F1($.returns,X);if(typeof Z==="object"&&!Array.isArray(Z))return class{constructor(){for(let[Q,W]of Object.entries(Z)){let Y=this;Y[Q]=W}}};else return class{}}}function g5($,X){if(s($,"default"))return Y0($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function f5($,X){if(s($,"default"))return Y0($.default);else return()=>F1($.returns,X)}function y5($,X){if(s($,"default"))return Y0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function d5($,X){if(s($,"default"))return Y0($.default);else{let Z=$.allOf.reduce((Q,W)=>{let Y=F1(W,X);return typeof Y==="object"?{...Q,...Y}:Y},{});if(!B0($,X,Z))throw new I1($,"Intersect produced invalid value. Consider using a default value.");return Z}}function v5($,X){if(s($,"default"))return Y0($.default);else return function*(){}()}function h5($,X){if(s($,"default"))return Y0($.default);else return $.const}function p5($,X){if(s($,"default"))return Y0($.default);else throw new I1($,"Never types cannot be created. Consider using a default value.")}function m5($,X){if(s($,"default"))return Y0($.default);else throw new I1($,"Not types must have a default value")}function u5($,X){if(s($,"default"))return Y0($.default);else return null}function c5($,X){if(s($,"default"))return Y0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function i5($,X){if(s($,"default"))return Y0($.default);else{let Z=new Set($.required),Q={};for(let[W,Y]of Object.entries($.properties)){if(!Z.has(W))continue;Q[W]=F1(Y,X)}return Q}}function l5($,X){if(s($,"default"))return Y0($.default);else return Promise.resolve(F1($.item,X))}function n5($,X){let[Z,Q]=Object.entries($.patternProperties)[0];if(s($,"default"))return Y0($.default);else if(!(Z===b2||Z===D2)){let W=Z.slice(1,Z.length-1).split("|"),Y={};for(let J of W)Y[J]=F1(Q,X);return Y}else return{}}function o5($,X){if(s($,"default"))return Y0($.default);else return F1(W0($,X),X)}function t5($,X){if(s($,"default"))return Y0($.default);else throw new I1($,"RegExp types cannot be created. Consider using a default value.")}function s5($,X){if($.pattern!==void 0)if(!s($,"default"))throw new I1($,"String types with patterns must specify a default value");else return Y0($.default);else if($.format!==void 0)if(!s($,"default"))throw new I1($,"String types with formats must specify a default value");else return Y0($.default);else if(s($,"default"))return Y0($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function r5($,X){if(s($,"default"))return Y0($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function a5($,X){if(s($,"default"))return Y0($.default);if(!S8($))throw new I1($,"Can only create template literals that produce a finite variants. Consider using a default value.");return z$($)[0]}function e5($,X){if(LQ++>zJ)throw new I1($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(s($,"default"))return Y0($.default);else return F1(W0($,X),X)}function $J($,X){if(s($,"default"))return Y0($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Z,Q)=>F1($.items[Q],X))}function XJ($,X){if(s($,"default"))return Y0($.default);else return}function ZJ($,X){if(s($,"default"))return Y0($.default);else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return F1($.anyOf[0],X)}function QJ($,X){if(s($,"default"))return Y0($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function WJ($,X){if(s($,"default"))return Y0($.default);else return{}}function YJ($,X){if(s($,"default"))return Y0($.default);else return}function JJ($,X){if(s($,"default"))return Y0($.default);else throw new Error("User defined types must specify a default value")}function F1($,X){let Z=o($.$id)?[...X,$]:X,Q=$;switch(Q[N]){case"Any":return V5(Q,Z);case"Array":return E5(Q,Z);case"AsyncIterator":return I5(Q,Z);case"BigInt":return x5(Q,Z);case"Boolean":return k5(Q,Z);case"Constructor":return T5(Q,Z);case"Date":return g5(Q,Z);case"Function":return f5(Q,Z);case"Integer":return y5(Q,Z);case"Intersect":return d5(Q,Z);case"Iterator":return v5(Q,Z);case"Literal":return h5(Q,Z);case"Never":return p5(Q,Z);case"Not":return m5(Q,Z);case"Null":return u5(Q,Z);case"Number":return c5(Q,Z);case"Object":return i5(Q,Z);case"Promise":return l5(Q,Z);case"Record":return n5(Q,Z);case"Ref":return o5(Q,Z);case"RegExp":return t5(Q,Z);case"String":return s5(Q,Z);case"Symbol":return r5(Q,Z);case"TemplateLiteral":return a5(Q,Z);case"This":return e5(Q,Z);case"Tuple":return $J(Q,Z);case"Undefined":return XJ(Q,Z);case"Union":return ZJ(Q,Z);case"Uint8Array":return QJ(Q,Z);case"Unknown":return WJ(Q,Z);case"Void":return YJ(Q,Z);default:if(!b0.Has(Q[N]))throw new I1(Q,"Unknown type");return JJ(Q,Z)}}var zJ=512,LQ=0;function S1(...$){return LQ=0,$.length===2?F1($[0],$[1]):F1($[0],[])}class S6 extends m{constructor($,X){super(X);this.schema=$}}function MJ($,X,Z){if($[N]==="Object"&&typeof Z==="object"&&!U2(Z)){let Q=$,W=Object.getOwnPropertyNames(Z),Y=Object.entries(Q.properties),[J,z]=[1/Y.length,Y.length];return Y.reduce((w,[G,B])=>{let H=B[N]==="Literal"&&B.const===Z[G]?z:0,O=B0(B,X,Z[G])?J:0,M=W.includes(G)?J:0;return w+(H+O+M)},0)}else return B0($,X,Z)?1:0}function BJ($,X,Z){let Q=$.anyOf.map((J)=>W0(J,X)),[W,Y]=[Q[0],0];for(let J of Q){let z=MJ(J,X,Z);if(z>Y)W=J,Y=z}return W}function wJ($,X,Z){if("default"in $)return typeof Z==="function"?$.default:H0($.default);else{let Q=BJ($,X,Z);return V8(Q,X,Z)}}function qJ($,X,Z){return B0($,X,Z)?H0(Z):S1($,X)}function UJ($,X,Z){return B0($,X,Z)?Z:S1($,X)}function GJ($,X,Z){if(B0($,X,Z))return H0(Z);let Q=p(Z)?H0(Z):S1($,X),W=y($.minItems)&&Q.length<$.minItems?[...Q,...Array.from({length:$.minItems-Q.length},()=>null)]:Q,J=(y($.maxItems)&&W.length>$.maxItems?W.slice(0,$.maxItems):W).map((w)=>Z2($.items,X,w));if($.uniqueItems!==!0)return J;let z=[...new Set(J)];if(!B0($,X,z))throw new S6($,"Array cast produced invalid data due to uniqueItems constraint");return z}function AJ($,X,Z){if(B0($,X,Z))return S1($,X);let Q=new Set($.returns.required||[]),W=function(){};for(let[Y,J]of Object.entries($.returns.properties)){if(!Q.has(Y)&&Z.prototype[Y]===void 0)continue;W.prototype[Y]=Z2(J,X,Z.prototype[Y])}return W}function HJ($,X,Z){let Q=S1($,X),W=P0(Q)&&P0(Z)?{...Q,...Z}:Z;return B0($,X,W)?W:S1($,X)}function NJ($,X,Z){throw new S6($,"Never types cannot be cast")}function DJ($,X,Z){if(B0($,X,Z))return Z;if(Z===null||typeof Z!=="object")return S1($,X);let Q=new Set($.required||[]),W={};for(let[Y,J]of Object.entries($.properties)){if(!Q.has(Y)&&Z[Y]===void 0)continue;W[Y]=Z2(J,X,Z[Y])}if(typeof $.additionalProperties==="object"){let Y=Object.getOwnPropertyNames($.properties);for(let J of Object.getOwnPropertyNames(Z)){if(Y.includes(J))continue;W[J]=Z2($.additionalProperties,X,Z[J])}}return W}function LJ($,X,Z){if(B0($,X,Z))return H0(Z);if(Z===null||typeof Z!=="object"||Array.isArray(Z)||Z instanceof Date)return S1($,X);let Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],Y={};for(let[J,z]of Object.entries(Z))Y[J]=Z2(W,X,z);return Y}function PJ($,X,Z){return Z2(W0($,X),X,Z)}function OJ($,X,Z){return Z2(W0($,X),X,Z)}function _J($,X,Z){if(B0($,X,Z))return H0(Z);if(!p(Z))return S1($,X);if($.items===void 0)return[];return $.items.map((Q,W)=>Z2(Q,X,Z[W]))}function FJ($,X,Z){return B0($,X,Z)?H0(Z):wJ($,X,Z)}function Z2($,X,Z){let Q=o($.$id)?[...X,$]:X,W=$;switch($[N]){case"Array":return GJ(W,Q,Z);case"Constructor":return AJ(W,Q,Z);case"Intersect":return HJ(W,Q,Z);case"Never":return NJ(W,Q,Z);case"Object":return DJ(W,Q,Z);case"Record":return LJ(W,Q,Z);case"Ref":return PJ(W,Q,Z);case"This":return OJ(W,Q,Z);case"Tuple":return _J(W,Q,Z);case"Union":return FJ(W,Q,Z);case"Date":case"Symbol":case"Uint8Array":return qJ($,X,Z);default:return UJ(W,Q,Z)}}function V8(...$){return $.length===3?Z2($[0],$[1],$[2]):Z2($[0],[],$[1])}function SJ($){return l($)&&$[N]!=="Unsafe"}function KJ($,X,Z){if(!p(Z))return Z;return Z.map((Q)=>K1($.items,X,Q))}function jJ($,X,Z){let Q=$.unevaluatedProperties,Y=$.allOf.map((z)=>K1(z,X,H0(Z))).reduce((z,w)=>l0(w)?{...z,...w}:w,{});if(!l0(Z)||!l0(Y)||!l(Q))return Y;let J=B1($);for(let z of Object.getOwnPropertyNames(Z)){if(J.includes(z))continue;if(B0(Q,X,Z[z]))Y[z]=K1(Q,X,Z[z])}return Y}function CJ($,X,Z){if(!l0(Z)||p(Z))return Z;let Q=$.additionalProperties;for(let W of Object.getOwnPropertyNames(Z)){if(W in $.properties){Z[W]=K1($.properties[W],X,Z[W]);continue}if(l(Q)&&B0(Q,X,Z[W])){Z[W]=K1(Q,X,Z[W]);continue}delete Z[W]}return Z}function bJ($,X,Z){if(!l0(Z))return Z;let Q=$.additionalProperties,W=Object.getOwnPropertyNames(Z),[Y,J]=Object.entries($.patternProperties)[0],z=new RegExp(Y);for(let w of W){if(z.test(w)){Z[w]=K1(J,X,Z[w]);continue}if(l(Q)&&B0(Q,X,Z[w])){Z[w]=K1(Q,X,Z[w]);continue}delete Z[w]}return Z}function RJ($,X,Z){return K1(W0($,X),X,Z)}function VJ($,X,Z){return K1(W0($,X),X,Z)}function EJ($,X,Z){if(!p(Z))return Z;if(C0($.items))return[];let Q=Math.min(Z.length,$.items.length);for(let W=0;W<Q;W++)Z[W]=K1($.items[W],X,Z[W]);return Z.length>Q?Z.slice(0,Q):Z}function IJ($,X,Z){for(let Q of $.anyOf)if(SJ(Q)&&B0(Q,X,Z))return K1(Q,X,Z);return Z}function K1($,X,Z){let Q=o($.$id)?[...X,$]:X,W=$;switch(W[N]){case"Array":return KJ(W,Q,Z);case"Intersect":return jJ(W,Q,Z);case"Object":return CJ(W,Q,Z);case"Record":return bJ(W,Q,Z);case"Ref":return RJ(W,Q,Z);case"This":return VJ(W,Q,Z);case"Tuple":return EJ(W,Q,Z);case"Union":return IJ(W,Q,Z);default:return Z}}function K6(...$){return $.length===3?K1($[0],$[1],$[2]):K1($[0],[],$[1])}function E8($){return o($)&&!isNaN($)&&!isNaN(parseFloat($))}function xJ($){return n0($)||s1($)||y($)}function u$($){return $===!0||y($)&&$===1||n0($)&&$===BigInt("1")||o($)&&($.toLowerCase()==="true"||$==="1")}function c$($){return $===!1||y($)&&($===0||Object.is($,-0))||n0($)&&$===BigInt("0")||o($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function kJ($){return o($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function TJ($){return o($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function gJ($){return o($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function fJ($){return o($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function yJ($){return o($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function dJ($,X){let Z=OQ($);return Z===X?Z:$}function vJ($,X){let Z=_Q($);return Z===X?Z:$}function hJ($,X){let Z=PQ($);return Z===X?Z:$}function pJ($,X){return o($.const)?dJ(X,$.const):y($.const)?vJ(X,$.const):s1($.const)?hJ(X,$.const):H0(X)}function PQ($){return u$($)?!0:c$($)?!1:$}function mJ($){return E8($)?BigInt(parseInt($)):y($)?BigInt($|0):c$($)?BigInt(0):u$($)?BigInt(1):$}function OQ($){return xJ($)?$.toString():Y1($)&&$.description!==void 0?$.description.toString():$}function _Q($){return E8($)?parseFloat($):u$($)?1:c$($)?0:$}function uJ($){return E8($)?parseInt($):y($)?$|0:u$($)?1:c$($)?0:$}function cJ($){return o($)&&$.toLowerCase()==="null"?null:$}function iJ($){return o($)&&$==="undefined"?void 0:$}function lJ($){return G1($)?$:y($)?new Date($):u$($)?new Date(1):c$($)?new Date(0):E8($)?new Date(parseInt($)):TJ($)?new Date(`1970-01-01T${$}.000Z`):kJ($)?new Date(`1970-01-01T${$}`):fJ($)?new Date(`${$}.000Z`):gJ($)?new Date($):yJ($)?new Date(`${$}T00:00:00.000Z`):$}function nJ($){return $}function oJ($,X,Z){return(p(Z)?Z:[Z]).map((W)=>Q2($.items,X,W))}function tJ($,X,Z){return mJ(Z)}function sJ($,X,Z){return PQ(Z)}function rJ($,X,Z){return lJ(Z)}function aJ($,X,Z){return uJ(Z)}function eJ($,X,Z){return $.allOf.reduce((Q,W)=>Q2(W,X,Q),Z)}function $z($,X,Z){return pJ($,Z)}function Xz($,X,Z){return cJ(Z)}function Zz($,X,Z){return _Q(Z)}function Qz($,X,Z){if(!l0(Z))return Z;let W={};for(let Y of Object.keys(Z))W[Y]=s($.properties,Y)?Q2($.properties[Y],X,Z[Y]):Z[Y];return W}function Wz($,X,Z){let Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],Y={};for(let[J,z]of Object.entries(Z))Y[J]=Q2(W,X,z);return Y}function Yz($,X,Z){return Q2(W0($,X),X,Z)}function Jz($,X,Z){return OQ(Z)}function zz($,X,Z){return o(Z)||y(Z)?Symbol(Z):Z}function Mz($,X,Z){return Q2(W0($,X),X,Z)}function Bz($,X,Z){if(!(p(Z)&&!C0($.items)))return Z;return Z.map((W,Y)=>{return Y<$.items.length?Q2($.items[Y],X,W):W})}function wz($,X,Z){return iJ(Z)}function qz($,X,Z){for(let Q of $.anyOf){let W=Q2(Q,X,Z);if(!B0(Q,X,W))continue;return W}return Z}function Q2($,X,Z){let Q=o($.$id)?[...X,$]:X,W=$;switch($[N]){case"Array":return oJ(W,Q,Z);case"BigInt":return tJ(W,Q,Z);case"Boolean":return sJ(W,Q,Z);case"Date":return rJ(W,Q,Z);case"Integer":return aJ(W,Q,Z);case"Intersect":return eJ(W,Q,Z);case"Literal":return $z(W,Q,Z);case"Null":return Xz(W,Q,Z);case"Number":return Zz(W,Q,Z);case"Object":return Qz(W,Q,Z);case"Record":return Wz(W,Q,Z);case"Ref":return Yz(W,Q,Z);case"String":return Jz(W,Q,Z);case"Symbol":return zz(W,Q,Z);case"This":return Mz(W,Q,Z);case"Tuple":return Bz(W,Q,Z);case"Undefined":return wz(W,Q,Z);case"Union":return qz(W,Q,Z);default:return nJ(Z)}}function j6(...$){return $.length===3?Q2($[0],$[1],$[2]):Q2($[0],[],$[1])}function E2($,X){return X===void 0&&"default"in $?H0($.default):X}function Uz($){return l($)&&$[N]!=="Unsafe"}function I8($){return l($)&&"default"in $}function Gz($,X,Z){let Q=E2($,Z);if(!p(Q))return Q;for(let W=0;W<Q.length;W++)Q[W]=x1($.items,X,Q[W]);return Q}function Az($,X,Z){let Q=E2($,Z);return $.allOf.reduce((W,Y)=>{let J=x1(Y,X,Q);return l0(J)?{...W,...J}:J},{})}function Hz($,X,Z){let Q=E2($,Z);if(!l0(Q))return Q;let W=$.additionalProperties,Y=Object.getOwnPropertyNames($.properties);for(let J of Y){if(!I8($.properties[J]))continue;Q[J]=x1($.properties[J],X,Q[J])}if(!I8(W))return Q;for(let J of Object.getOwnPropertyNames(Q)){if(Y.includes(J))continue;Q[J]=x1(W,X,Q[J])}return Q}function Nz($,X,Z){let Q=E2($,Z);if(!l0(Q))return Q;let W=$.additionalProperties,[Y,J]=Object.entries($.patternProperties)[0],z=new RegExp(Y);for(let w of Object.getOwnPropertyNames(Q)){if(!(z.test(w)&&I8(J)))continue;Q[w]=x1(J,X,Q[w])}if(!I8(W))return Q;for(let w of Object.getOwnPropertyNames(Q)){if(z.test(w))continue;Q[w]=x1(W,X,Q[w])}return Q}function Dz($,X,Z){return x1(W0($,X),X,E2($,Z))}function Lz($,X,Z){return x1(W0($,X),X,Z)}function Pz($,X,Z){let Q=E2($,Z);if(!p(Q)||C0($.items))return Q;let[W,Y]=[$.items,Math.max($.items.length,Q.length)];for(let J=0;J<Y;J++)if(J<W.length)Q[J]=x1(W[J],X,Q[J]);return Q}function Oz($,X,Z){let Q=E2($,Z);for(let W of $.anyOf){let Y=x1(W,X,Q);if(Uz(W)&&B0(W,Y))return Y}return Q}function x1($,X,Z){let Q=o($.$id)?[...X,$]:X,W=$;switch(W[N]){case"Array":return Gz(W,Q,Z);case"Intersect":return Az(W,Q,Z);case"Object":return Hz(W,Q,Z);case"Record":return Nz(W,Q,Z);case"Ref":return Dz(W,Q,Z);case"This":return Lz(W,Q,Z);case"Tuple":return Pz(W,Q,Z);case"Union":return Oz(W,Q,Z);default:return E2(W,Z)}}function C6(...$){return $.length===3?x1($[0],$[1],$[2]):x1($[0],[],$[1])}var u1={};x2(u1,{ValuePointerRootSetError:()=>b6,ValuePointerRootDeleteError:()=>R6,Set:()=>_z,Has:()=>Sz,Get:()=>Kz,Format:()=>i$,Delete:()=>Fz});class b6 extends m{constructor($,X,Z){super("Cannot set root value");this.value=$,this.path=X,this.update=Z}}class R6 extends m{constructor($,X){super("Cannot delete root value");this.value=$,this.path=X}}function FQ($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*i$($){if($==="")return;let[X,Z]=[0,0];for(let Q=0;Q<$.length;Q++)if($.charAt(Q)==="/")if(Q===0)X=Q+1;else Z=Q,yield FQ($.slice(X,Z)),X=Q+1;else Z=Q;yield FQ($.slice(X))}function _z($,X,Z){if(X==="")throw new b6($,X,Z);let[Q,W,Y]=[null,$,""];for(let J of i$(X)){if(W[J]===void 0)W[J]={};Q=W,W=W[J],Y=J}Q[Y]=Z}function Fz($,X){if(X==="")throw new R6($,X);let[Z,Q,W]=[null,$,""];for(let Y of i$(X)){if(Q[Y]===void 0||Q[Y]===null)return;Z=Q,Q=Q[Y],W=Y}if(Array.isArray(Z)){let Y=parseInt(W);Z.splice(Y,1)}else delete Z[W]}function Sz($,X){if(X==="")return!0;let[Z,Q,W]=[null,$,""];for(let Y of i$(X)){if(Q[Y]===void 0)return!1;Z=Q,Q=Q[Y],W=Y}return Object.getOwnPropertyNames(Z).includes(W)}function Kz($,X){if(X==="")return $;let Z=$;for(let Q of i$(X)){if(Z[Q]===void 0)return;Z=Z[Q]}return Z}var jz=U0({type:M0("insert"),path:P1(),value:X2()}),Cz=U0({type:M0("update"),path:P1(),value:X2()}),bz=U0({type:M0("delete"),path:P1()}),jP=q0([jz,Cz,bz]);class V6 extends m{constructor($,X){super(X);this.value=$}}class l$ extends V6{constructor($){super($,"Cannot diff objects with symbol keys");this.value=$}}function n$($,X){return{type:"update",path:$,value:X}}function SQ($,X){return{type:"insert",path:$,value:X}}function KQ($){return{type:"delete",path:$}}function*Rz($,X,Z){if(!P0(Z))return yield n$($,Z);let Q=[...globalThis.Object.keys(X),...globalThis.Object.getOwnPropertySymbols(X)],W=[...globalThis.Object.keys(Z),...globalThis.Object.getOwnPropertySymbols(Z)];for(let Y of Q){if(Y1(Y))throw new l$(Y);if(C0(Z[Y])&&W.includes(Y))yield n$(`${$}/${globalThis.String(Y)}`,void 0)}for(let Y of W){if(C0(X[Y])||C0(Z[Y]))continue;if(Y1(Y))throw new l$(Y);yield*x8(`${$}/${globalThis.String(Y)}`,X[Y],Z[Y])}for(let Y of W){if(Y1(Y))throw new l$(Y);if(C0(X[Y]))yield SQ(`${$}/${globalThis.String(Y)}`,Z[Y])}for(let Y of Q.reverse()){if(Y1(Y))throw new l$(Y);if(C0(Z[Y])&&!W.includes(Y))yield KQ(`${$}/${globalThis.String(Y)}`)}}function*Vz($,X,Z){if(!p(Z))return yield n$($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*x8(`${$}/${Q}`,X[Q],Z[Q]);for(let Q=0;Q<Z.length;Q++){if(Q<X.length)continue;yield SQ(`${$}/${Q}`,Z[Q])}for(let Q=X.length-1;Q>=0;Q--){if(Q<Z.length)continue;yield KQ(`${$}/${Q}`)}}function*Ez($,X,Z){if(!b1(Z)||X.length!==Z.length||globalThis.Object.getPrototypeOf(X).constructor.name!==globalThis.Object.getPrototypeOf(Z).constructor.name)return yield n$($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*x8(`${$}/${Q}`,X[Q],Z[Q])}function*Iz($,X,Z){if(X===Z)return;yield n$($,Z)}function*x8($,X,Z){if(P0(X))return yield*Rz($,X,Z);if(p(X))return yield*Vz($,X,Z);if(b1(X))return yield*Ez($,X,Z);if(A1(X))return yield*Iz($,X,Z);throw new V6(X,"Unable to create diff edits for unknown value")}function jQ($,X){return[...x8("",$,X)]}function xz($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function kz($){return $.length===0}function CQ($,X){if(xz(X))return H0(X[0].value);if(kz(X))return H0($);let Z=H0($);for(let Q of X)switch(Q.type){case"insert":{u1.Set(Z,Q.path,Q.value);break}case"update":{u1.Set(Z,Q.path,Q.value);break}case"delete":{u1.Delete(Z,Q.path);break}}return Z}function Tz($,X){if(!P0(X))return!1;let Z=[...Object.keys($),...Object.getOwnPropertySymbols($)],Q=[...Object.keys(X),...Object.getOwnPropertySymbols(X)];if(Z.length!==Q.length)return!1;return Z.every((W)=>o$($[W],X[W]))}function gz($,X){return G1(X)&&$.getTime()===X.getTime()}function fz($,X){if(!p(X)||$.length!==X.length)return!1;return $.every((Z,Q)=>o$(Z,X[Q]))}function yz($,X){if(!b1(X)||$.length!==X.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(X).constructor.name)return!1;return $.every((Z,Q)=>o$(Z,X[Q]))}function dz($,X){return $===X}function o$($,X){if(P0($))return Tz($,X);if(G1($))return gz($,X);if(b1($))return yz($,X);if(p($))return fz($,X);if(A1($))return dz($,X);throw new Error("ValueEquals: Unable to compare value")}class E6 extends m{constructor($){super($)}}function vz($,X,Z,Q){if(!P0(Z))u1.Set($,X,H0(Q));else{let W=Object.getOwnPropertyNames(Z),Y=Object.getOwnPropertyNames(Q);for(let J of W)if(!Y.includes(J))delete Z[J];for(let J of Y)if(!W.includes(J))Z[J]=null;for(let J of Y)I6($,`${X}/${J}`,Z[J],Q[J])}}function hz($,X,Z,Q){if(!p(Z))u1.Set($,X,H0(Q));else{for(let W=0;W<Q.length;W++)I6($,`${X}/${W}`,Z[W],Q[W]);Z.splice(Q.length)}}function pz($,X,Z,Q){if(b1(Z)&&Z.length===Q.length)for(let W=0;W<Z.length;W++)Z[W]=Q[W];else u1.Set($,X,H0(Q))}function mz($,X,Z,Q){if(Z===Q)return;u1.Set($,X,Q)}function I6($,X,Z,Q){if(p(Q))return hz($,X,Z,Q);if(b1(Q))return pz($,X,Z,Q);if(P0(Q))return vz($,X,Z,Q);if(A1(Q))return mz($,X,Z,Q)}function bQ($){return b1($)||A1($)}function uz($,X){return P0($)&&p(X)||p($)&&P0(X)}function RQ($,X){if(bQ($)||bQ(X))throw new E6("Only object and array types can be mutated at the root level");if(uz($,X))throw new E6("Cannot assign due type mismatch of assignable values");I6($,"",$,X)}class t$ extends m{constructor($,X,Z){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class k8 extends m{constructor($,X,Z,Q){super(Q instanceof Error?Q.message:"Unknown error");this.schema=$,this.path=X,this.value=Z,this.error=Q}}function V0($,X,Z){try{return F0($)?$[j0].Decode(Z):Z}catch(Q){throw new k8($,X,Z,Q)}}function cz($,X,Z,Q){return p(Q)?V0($,Z,Q.map((W,Y)=>W2($.items,X,`${Z}/${Y}`,W))):V0($,Z,Q)}function iz($,X,Z,Q){if(!P0(Q)||A1(Q))return V0($,Z,Q);let W=j8($),Y=W.map((B)=>B[0]),J={...Q};for(let[B,H]of W)if(B in J)J[B]=W2(H,X,`${Z}/${B}`,J[B]);if(!F0($.unevaluatedProperties))return V0($,Z,J);let z=Object.getOwnPropertyNames(J),w=$.unevaluatedProperties,G={...J};for(let B of z)if(!Y.includes(B))G[B]=V0(w,`${Z}/${B}`,G[B]);return V0($,Z,G)}function lz($,X,Z,Q){return V0($,Z,W2($.not,X,Z,Q))}function nz($,X,Z,Q){if(!P0(Q))return V0($,Z,Q);let W=B1($),Y={...Q};for(let G of W)if(G in Y)Y[G]=W2($.properties[G],X,`${Z}/${G}`,Y[G]);if(!l($.additionalProperties))return V0($,Z,Y);let J=Object.getOwnPropertyNames(Y),z=$.additionalProperties,w={...Y};for(let G of J)if(!W.includes(G))w[G]=V0(z,`${Z}/${G}`,w[G]);return V0($,Z,w)}function oz($,X,Z,Q){if(!P0(Q))return V0($,Z,Q);let W=Object.getOwnPropertyNames($.patternProperties)[0],Y=new RegExp(W),J={...Q};for(let B of Object.getOwnPropertyNames(Q))if(Y.test(B))J[B]=W2($.patternProperties[W],X,`${Z}/${B}`,J[B]);if(!l($.additionalProperties))return V0($,Z,J);let z=Object.getOwnPropertyNames(J),w=$.additionalProperties,G={...J};for(let B of z)if(!Y.test(B))G[B]=V0(w,`${Z}/${B}`,G[B]);return V0($,Z,G)}function tz($,X,Z,Q){let W=W0($,X);return V0($,Z,W2(W,X,Z,Q))}function sz($,X,Z,Q){let W=W0($,X);return V0($,Z,W2(W,X,Z,Q))}function rz($,X,Z,Q){return p(Q)&&p($.items)?V0($,Z,$.items.map((W,Y)=>W2(W,X,`${Z}/${Y}`,Q[Y]))):V0($,Z,Q)}function az($,X,Z,Q){for(let W of $.anyOf){if(!B0(W,X,Q))continue;let Y=W2(W,X,Z,Q);return V0($,Z,Y)}return V0($,Z,Q)}function W2($,X,Z,Q){let W=typeof $.$id==="string"?[...X,$]:X,Y=$;switch($[N]){case"Array":return cz(Y,W,Z,Q);case"Intersect":return iz(Y,W,Z,Q);case"Not":return lz(Y,W,Z,Q);case"Object":return nz(Y,W,Z,Q);case"Record":return oz(Y,W,Z,Q);case"Ref":return tz(Y,W,Z,Q);case"Symbol":return V0(Y,Z,Q);case"This":return sz(Y,W,Z,Q);case"Tuple":return rz(Y,W,Z,Q);case"Union":return az(Y,W,Z,Q);default:return V0(Y,Z,Q)}}function T8($,X,Z){return W2($,X,"",Z)}class s$ extends m{constructor($,X,Z){super("The encoded value does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class VQ extends m{constructor($,X,Z,Q){super(`${Q instanceof Error?Q.message:"Unknown error"}`);this.schema=$,this.path=X,this.value=Z,this.error=Q}}function m0($,X,Z){try{return F0($)?$[j0].Encode(Z):Z}catch(Q){throw new VQ($,X,Z,Q)}}function ez($,X,Z,Q){let W=m0($,Z,Q);return p(W)?W.map((Y,J)=>Y2($.items,X,`${Z}/${J}`,Y)):W}function $M($,X,Z,Q){let W=m0($,Z,Q);if(!P0(Q)||A1(Q))return W;let Y=j8($),J=Y.map((H)=>H[0]),z={...W};for(let[H,O]of Y)if(H in z)z[H]=Y2(O,X,`${Z}/${H}`,z[H]);if(!F0($.unevaluatedProperties))return m0($,Z,z);let w=Object.getOwnPropertyNames(z),G=$.unevaluatedProperties,B={...z};for(let H of w)if(!J.includes(H))B[H]=m0(G,`${Z}/${H}`,B[H]);return B}function XM($,X,Z,Q){return m0($.not,Z,m0($,Z,Q))}function ZM($,X,Z,Q){let W=m0($,Z,Q);if(!P0(W))return W;let Y=B1($),J={...W};for(let B of Y)if(B in J)J[B]=Y2($.properties[B],X,`${Z}/${B}`,J[B]);if(!l($.additionalProperties))return J;let z=Object.getOwnPropertyNames(J),w=$.additionalProperties,G={...J};for(let B of z)if(!Y.includes(B))G[B]=m0(w,`${Z}/${B}`,G[B]);return G}function QM($,X,Z,Q){let W=m0($,Z,Q);if(!P0(Q))return W;let Y=Object.getOwnPropertyNames($.patternProperties)[0],J=new RegExp(Y),z={...W};for(let H of Object.getOwnPropertyNames(Q))if(J.test(H))z[H]=Y2($.patternProperties[Y],X,`${Z}/${H}`,z[H]);if(!l($.additionalProperties))return m0($,Z,z);let w=Object.getOwnPropertyNames(z),G=$.additionalProperties,B={...z};for(let H of w)if(!J.test(H))B[H]=m0(G,`${Z}/${H}`,B[H]);return B}function WM($,X,Z,Q){let W=W0($,X),Y=Y2(W,X,Z,Q);return m0($,Z,Y)}function YM($,X,Z,Q){let W=W0($,X),Y=Y2(W,X,Z,Q);return m0($,Z,Y)}function JM($,X,Z,Q){let W=m0($,Z,Q);return p($.items)?$.items.map((Y,J)=>Y2(Y,X,`${Z}/${J}`,W[J])):[]}function zM($,X,Z,Q){for(let W of $.anyOf){if(!B0(W,X,Q))continue;let Y=Y2(W,X,Z,Q);return m0($,Z,Y)}for(let W of $.anyOf){let Y=Y2(W,X,Z,Q);if(!B0($,X,Y))continue;return m0($,Z,Y)}return m0($,Z,Q)}function Y2($,X,Z,Q){let W=typeof $.$id==="string"?[...X,$]:X,Y=$;switch($[N]){case"Array":return ez(Y,W,Z,Q);case"Intersect":return $M(Y,W,Z,Q);case"Not":return XM(Y,W,Z,Q);case"Object":return ZM(Y,W,Z,Q);case"Record":return QM(Y,W,Z,Q);case"Ref":return WM(Y,W,Z,Q);case"This":return YM(Y,W,Z,Q);case"Tuple":return JM(Y,W,Z,Q);case"Union":return zM(Y,W,Z,Q);default:return m0(Y,Z,Q)}}function g8($,X,Z){return Y2($,X,"",Z)}function MM($,X){return F0($)||u0($.items,X)}function BM($,X){return F0($)||u0($.items,X)}function wM($,X){return F0($)||u0($.returns,X)||$.parameters.some((Z)=>u0(Z,X))}function qM($,X){return F0($)||u0($.returns,X)||$.parameters.some((Z)=>u0(Z,X))}function UM($,X){return F0($)||F0($.unevaluatedProperties)||$.allOf.some((Z)=>u0(Z,X))}function GM($,X){return F0($)||u0($.items,X)}function AM($,X){return F0($)||u0($.not,X)}function HM($,X){return F0($)||Object.values($.properties).some((Z)=>u0(Z,X))||l($.additionalProperties)&&u0($.additionalProperties,X)}function NM($,X){return F0($)||u0($.item,X)}function DM($,X){let Z=Object.getOwnPropertyNames($.patternProperties)[0],Q=$.patternProperties[Z];return F0($)||u0(Q,X)||l($.additionalProperties)&&F0($.additionalProperties)}function LM($,X){if(F0($))return!0;return u0(W0($,X),X)}function PM($,X){if(F0($))return!0;return u0(W0($,X),X)}function OM($,X){return F0($)||!C0($.items)&&$.items.some((Z)=>u0(Z,X))}function _M($,X){return F0($)||$.anyOf.some((Z)=>u0(Z,X))}function u0($,X){let Z=o($.$id)?[...X,$]:X,Q=$;if($.$id&&x6.has($.$id))return!1;if($.$id)x6.add($.$id);switch($[N]){case"Array":return MM(Q,Z);case"AsyncIterator":return BM(Q,Z);case"Constructor":return wM(Q,Z);case"Function":return qM(Q,Z);case"Intersect":return UM(Q,Z);case"Iterator":return GM(Q,Z);case"Not":return AM(Q,Z);case"Object":return HM(Q,Z);case"Promise":return NM(Q,Z);case"Record":return DM(Q,Z);case"Ref":return LM(Q,Z);case"This":return PM(Q,Z);case"Tuple":return OM(Q,Z);case"Union":return _M(Q,Z);default:return F0($)}}var x6=new Set;function r$($,X){return x6.clear(),u0($,X)}var n={};x2(n,{Patch:()=>kM,Mutate:()=>TM,Hash:()=>xM,Errors:()=>T6,Equal:()=>EM,Encode:()=>VM,Diff:()=>IM,Default:()=>RM,Decode:()=>bM,Create:()=>SM,Convert:()=>jM,Clone:()=>CM,Clean:()=>KM,Check:()=>k6,Cast:()=>FM});function FM(...$){return V8.apply(V8,$)}function SM(...$){return S1.apply(S1,$)}function k6(...$){return B0.apply(B0,$)}function KM(...$){return K6.apply(K6,$)}function jM(...$){return j6.apply(j6,$)}function CM($){return H0($)}function bM(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!k6(X,Z,Q))throw new t$(X,Q,T6(X,Z,Q).First());return r$(X,Z)?T8(X,Z,Q):Q}function RM(...$){return C6.apply(C6,$)}function VM(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],W=r$(X,Z)?g8(X,Z,Q):Q;if(!k6(X,Z,W))throw new s$(X,W,T6(X,Z,W).First());return W}function T6(...$){return h$.apply(h$,$)}function EM($,X){return o$($,X)}function IM($,X){return jQ($,X)}function xM($){return R2($)}function kM($,X){return CQ($,X)}function TM($,X){RQ($,X)}function EQ($){return $.map((X)=>g6(X))}function gM($){return Z1(EQ($))}function fM($){return q0(EQ($))}function yM($){return g6($)}function g6($){return g0($)?gM($.allOf):z0($)?fM($.anyOf):f2($)?yM($.item):$}function f6($,X={}){return C(g6($),X)}function dM($){let X=[];for(let Z of $)X.push(...B1(Z));return WZ(X)}function vM($){return $.filter((X)=>!Q$(X))}function hM($,X){let Z=[];for(let Q of $)Z.push(...g$(Q,[X]));return vM(Z)}function pM($,X){let Z={};for(let Q of X)Z[Q]=F8(hM($,Q));return Z}function y6($,X={}){let Z=dM($),Q=pM($,Z);return U0(Q,X)}function a$($={}){return{...$,[N]:"Date",type:"Date"}}function e$($={}){return{...$,[N]:"Null",type:"null"}}function $8($){return{...$,[N]:"Symbol",type:"symbol"}}function X8($={}){return{...$,[N]:"Undefined",type:"undefined"}}function Z8($={}){return{...$,[N]:"Uint8Array",type:"Uint8Array"}}function mM($){return $.map((X)=>d6(X,!1))}function uM($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=O1(d6($[Z],!1));return X}function f8($,X){return X===!0?$:O1($)}function d6($,X){return r8($)?f8(_2(),X):e8($)?f8(_2(),X):J1($)?O1(m1(mM($))):k2($)?Z8():O$($)?a$():O0($)?f8(U0(uM($)),X):a8($)?f8(G2([],X2()),X):R0($)?X8():$6($)?e$():Z6($)?$8():P$($)?d2():v1($)?M0($):C2($)?M0($):_0($)?M0($):U0({})}function v6($,X={}){return C(d6($,!0),X)}function h6($,X={}){return m1(x0($.parameters),{...X})}function Q8($,X){return $.map((Z)=>k1(Z,X))}function cM($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=k1($[Q],X);return Z}function iM($,X){return $.parameters=Q8($.parameters,X),$.returns=k1($.returns,X),$}function lM($,X){return $.parameters=Q8($.parameters,X),$.returns=k1($.returns,X),$}function nM($,X){return $.allOf=Q8($.allOf,X),$}function oM($,X){return $.anyOf=Q8($.anyOf,X),$}function tM($,X){if(R0($.items))return $;return $.items=Q8($.items,X),$}function sM($,X){return $.items=k1($.items,X),$}function rM($,X){return $.properties=cM($.properties,X),$}function aM($,X){return $.item=k1($.item,X),$}function eM($,X){return $.items=k1($.items,X),$}function $B($,X){return $.items=k1($.items,X),$}function XB($,X){let Z=X.find((W)=>W.$id===$.$ref);if(Z===void 0)throw Error(`Unable to dereference schema with \$id ${$.$ref}`);let Q=k0(Z,["$id"]);return k1(Q,X)}function ZB($,X){return j$($)?iM($,X):C$($)?lM($,X):g0($)?nM($,X):z0($)?oM($,X):h1($)?tM($,X):A2($)?sM($,X):v0($)?rM($,X):f2($)?aM($,X):K$($)?eM($,X):b$($)?$B($,X):J6($)?XB($,X):$}function k1($,X){return ZB(C($),x0(X))}function p6($,X={}){if(R0($))throw new Error("Enum undefined or empty");let Z=globalThis.Object.getOwnPropertyNames($).filter((Y)=>isNaN(Y)).map((Y)=>$[Y]),W=[...new Set(Z)].map((Y)=>M0(Y));return q0(W,{...X,[H1]:"Enum"})}function IQ($,X){return m2(v2($),X)}function QB($,X){let Z=$.filter((Q)=>V2(Q,X)===L.False);return Z.length===1?Z[0]:q0(Z)}function m2($,X,Z={}){if(D1($))return C(IQ($,X),Z);if(K0($))return C(xQ($,X),Z);return C(z0($)?QB($.anyOf,X):V2($,X)!==L.False?w0():$,Z)}function WB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=m2($[Q],X);return Z}function YB($,X){return WB($.properties,X)}function xQ($,X){let Z=YB($,X);return Z0(Z)}function kQ($,X){return u2(v2($),X)}function JB($,X){let Z=$.filter((Q)=>V2(Q,X)!==L.False);return Z.length===1?Z[0]:q0(Z)}function u2($,X,Z={}){if(D1($))return C(kQ($,X),Z);if(K0($))return C(TQ($,X),Z);return C(z0($)?JB($.anyOf,X):V2($,X)!==L.False?$:w0(),Z)}function zB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=u2($[Q],X);return Z}function MB($,X){return zB($.properties,X)}function TQ($,X){let Z=MB($,X);return Z0(Z)}function m6($,X={}){return C($.returns,X)}function u6($={}){return{...$,[N]:"Integer",type:"integer"}}function BB($,X,Z){return{[$]:c1(M0($),X,Z)}}function wB($,X,Z){return $.reduce((Q,W)=>{return{...Q,...BB(W,X,Z)}},{})}function qB($,X,Z){return wB($.keys,X,Z)}function gQ($,X,Z){let Q=qB($,X,Z);return Z0(Q)}function UB($){let[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toLowerCase(),Z].join("")}function GB($){let[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toUpperCase(),Z].join("")}function AB($){return $.toUpperCase()}function HB($){return $.toLowerCase()}function NB($,X,Z){let Q=J$($.pattern);if(!y2(Q))return{...$,pattern:fQ($.pattern,X)};let J=[...x$(Q)].map((G)=>M0(G)),z=yQ(J,X),w=q0(z);return T$([w],Z)}function fQ($,X){return typeof $==="string"?X==="Uncapitalize"?UB($):X==="Capitalize"?GB($):X==="Uppercase"?AB($):X==="Lowercase"?HB($):$:$.toString()}function yQ($,X){return $.map((Z)=>c1(Z,X))}function c1($,X,Z={}){return N1($)?gQ($,X,Z):D1($)?NB($,X,$):z0($)?q0(yQ($.anyOf,X),Z):H2($)?M0(fQ($.const,X),Z):$}function c6($,X={}){return c1($,"Capitalize",X)}function i6($,X={}){return c1($,"Lowercase",X)}function l6($,X={}){return c1($,"Uncapitalize",X)}function n6($,X={}){return c1($,"Uppercase",X)}function o6($,X){return{...X,[N]:"Not",not:C($)}}function DB($,X,Z){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=c2($[W],X,Z);return Q}function LB($,X,Z){return DB($.properties,X,Z)}function dQ($,X,Z){let Q=LB($,X,Z);return Z0(Q)}function PB($,X){return $.map((Z)=>t6(Z,X))}function OB($,X){return $.map((Z)=>t6(Z,X))}function _B($,X){let{[X]:Z,...Q}=$;return Q}function FB($,X){return X.reduce((Z,Q)=>_B(Z,Q),$)}function t6($,X){return g0($)?Z1(PB($.allOf,X)):z0($)?q0(OB($.anyOf,X)):v0($)?U0(FB($.properties,X)):U0({})}function c2($,X,Z={}){if(N1(X))return vQ($,X,Z);if(K0($))return dQ($,X,Z);let Q=L1(X)?M1(X):X,W=k0($,[j0,"$id","required"]),Y=C(t6($,Q),Z);return{...W,...Y}}function SB($,X,Z){return{[X]:c2($,[X],Z)}}function KB($,X,Z){return X.reduce((Q,W)=>{return{...Q,...SB($,W,Z)}},{})}function jB($,X,Z){return KB($,X.keys,Z)}function vQ($,X,Z){let Q=jB($,X,Z);return Z0(Q)}function s6($,X={}){return m1(x0($.parameters),{...X})}function hQ($){return $.map((X)=>pQ(X))}function CB($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=X1($[Z]);return X}function pQ($){return g0($)?Z1(hQ($.allOf)):z0($)?q0(hQ($.anyOf)):v0($)?U0(CB($.properties)):U0({})}function W8($,X={}){if(K0($))return mQ($,X);let Z=k0($,[j0,"$id","required"]),Q=C(pQ($),X);return{...Z,...Q}}function bB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=W8($[Q],X);return Z}function RB($,X){return bB($.properties,X)}function mQ($,X){let Z=RB($,X);return Z0(Z)}function VB($,X,Z){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=i2($[W],X,Z);return Q}function EB($,X,Z){return VB($.properties,X,Z)}function uQ($,X,Z){let Q=EB($,X,Z);return Z0(Q)}function IB($,X){return $.map((Z)=>r6(Z,X))}function xB($,X){return $.map((Z)=>r6(Z,X))}function kB($,X){let Z={};for(let Q of X)if(Q in $)Z[Q]=$[Q];return Z}function r6($,X){return g0($)?Z1(IB($.allOf,X)):z0($)?q0(xB($.anyOf,X)):v0($)?U0(kB($.properties,X)):U0({})}function i2($,X,Z={}){if(N1(X))return cQ($,X,Z);if(K0($))return uQ($,X,Z);let Q=L1(X)?M1(X):X,W=k0($,[j0,"$id","required"]),Y=C(r6($,Q),Z);return{...W,...Y}}function TB($,X,Z){return{[X]:i2($,[X],Z)}}function gB($,X,Z){return X.reduce((Q,W)=>{return{...Q,...TB($,W,Z)}},{})}function fB($,X,Z){return gB($,X.keys,Z)}function cQ($,X,Z){let Q=fB($,X,Z);return Z0(Q)}function a6($){return O1(X1($))}function Y8($,X,Z){return{...Z,[N]:"Record",type:"object",patternProperties:{[$]:C(X)}}}function e6($,X,Z){let Q={};for(let W of $)Q[W]=C(X);return U0(Q,{...Z,[H1]:"Record"})}function yB($,X,Z){return S8($)?e6(M1($),X,Z):Y8($.pattern,X,Z)}function dB($,X,Z){return e6(M1(q0($)),X,Z)}function vB($,X,Z){return e6([$.toString()],X,Z)}function hB($,X,Z){return Y8($.source,X,Z)}function pB($,X,Z){let Q=R0($.pattern)?b2:$.pattern;return Y8(Q,X,Z)}function mB($,X,Z){return Y8(D2,X,Z)}function uB($,X,Z){return Y8(D2,X,Z)}function $X($,X,Z={}){return z0($)?dB($.anyOf,X,Z):D1($)?yB($,X,Z):H2($)?vB($.const,X,Z):T2($)?mB($,X,Z):g2($)?uB($,X,Z):z6($)?hB($,X,Z):R$($)?pB($,X,Z):w0(Z)}var cB=0;function XX($,X={}){if(R0(X.$id))X.$id=`T${cB++}`;let Z=$({[N]:"This",$ref:`${X.$id}`});return Z.$id=X.$id,C({...X,[H1]:"Recursive",...Z})}function ZX($,X={}){if(_0($))return{...X,[N]:"Ref",$ref:$};if(R0($.$id))throw new Error("Reference target type must specify an $id");return{...X,[N]:"Ref",$ref:$.$id}}function QX($,X={}){let Z=_0($)?new globalThis.RegExp($):$;return{...X,[N]:"RegExp",type:"RegExp",source:Z.source,flags:Z.flags}}function iQ($){return $.map((X)=>lQ(X))}function iB($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=k0($[Z],[s0]);return X}function lQ($){return g0($)?Z1(iQ($.allOf)):z0($)?q0(iQ($.anyOf)):v0($)?U0(iB($.properties)):U0({})}function J8($,X={}){if(K0($))return nQ($,X);else{let Z=k0($,[j0,"$id","required"]),Q=C(lQ($),X);return{...Z,...Q}}}function lB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=J8($[Q],X);return Z}function nB($,X){return lB($.properties,X)}function nQ($,X){let Z=nB($,X);return Z0(Z)}function oB($){return g0($)?x0($.allOf):z0($)?x0($.anyOf):h1($)?x0($.items??[]):[]}function WX($){return x0(oB($))}function YX($,X={}){return C($.returns,X)}function JX($){return JSON.parse(JSON.stringify($))}class oQ{constructor($){this.schema=$}Decode($){return new tQ(this.schema,$)}}class tQ{constructor($,X){this.schema=$,this.decode=X}EncodeTransform($,X){let W={Encode:(Y)=>X[j0].Encode($(Y)),Decode:(Y)=>this.decode(X[j0].Decode(Y))};return{...X,[j0]:W}}EncodeSchema($,X){let Z={Decode:this.decode,Encode:$};return{...X,[j0]:Z}}Encode($){let X=C(this.schema);return W$(X)?this.EncodeTransform($,X):this.EncodeSchema($,X)}}function zX($){return new oQ($)}function MX($={}){return{...$,[N]:"Void",type:"void"}}var BX={};x2(BX,{Void:()=>MX,Uppercase:()=>n6,Unsafe:()=>L$,Unknown:()=>X2,Union:()=>q0,Undefined:()=>X8,Uncapitalize:()=>l6,Uint8Array:()=>Z8,Tuple:()=>m1,Transform:()=>zX,TemplateLiteral:()=>T$,Symbol:()=>$8,String:()=>P1,Strict:()=>JX,ReturnType:()=>YX,Rest:()=>WX,Required:()=>J8,RegExp:()=>QX,Ref:()=>ZX,Recursive:()=>XX,Record:()=>$X,ReadonlyOptional:()=>a6,Readonly:()=>O1,Promise:()=>y$,Pick:()=>i2,Partial:()=>W8,Parameters:()=>s6,Optional:()=>X1,Omit:()=>c2,Object:()=>U0,Number:()=>p1,Null:()=>e$,Not:()=>o6,Never:()=>w0,Mapped:()=>U6,Lowercase:()=>i6,Literal:()=>M0,KeyOf:()=>v$,Iterator:()=>f$,Intersect:()=>Z1,Integer:()=>u6,InstanceType:()=>m6,Index:()=>h2,Function:()=>G2,Extract:()=>u2,Extends:()=>p2,Exclude:()=>m2,Enum:()=>p6,Deref:()=>k1,Date:()=>a$,ConstructorParameters:()=>h6,Constructor:()=>S$,Const:()=>v6,Composite:()=>y6,Capitalize:()=>c6,Boolean:()=>k$,BigInt:()=>d2,Awaited:()=>f6,AsyncIterator:()=>F$,Array:()=>_$,Any:()=>_2});var q$=BX;class GX{constructor($,X,Z,Q){this.schema=$,this.references=X,this.checkFunc=Z,this.code=Q,this.hasTransform=r$($,X)}Code(){return this.code}Errors($){return h$(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new t$(this.schema,$,this.Errors($).First());return this.hasTransform?T8(this.schema,this.references,$):$}Encode($){let X=this.hasTransform?g8(this.schema,this.references,$):$;if(!this.checkFunc(X))throw new s$(this.schema,$,this.Errors($).First());return X}}var F2;(function($){function X(Y){return Y===36}$.DollarSign=X;function Z(Y){return Y===95}$.IsUnderscore=Z;function Q(Y){return Y>=65&&Y<=90||Y>=97&&Y<=122}$.IsAlpha=Q;function W(Y){return Y>=48&&Y<=57}$.IsNumeric=W})(F2||(F2={}));var y8;(function($){function X(Y){if(Y.length===0)return!1;return F2.IsNumeric(Y.charCodeAt(0))}function Z(Y){if(X(Y))return!1;for(let J=0;J<Y.length;J++){let z=Y.charCodeAt(J);if(!(F2.IsAlpha(z)||F2.IsNumeric(z)||F2.DollarSign(z)||F2.IsUnderscore(z)))return!1}return!0}function Q(Y){return Y.replace(/'/g,"\\'")}function W(Y,J){return Z(J)?`${Y}.${J}`:`${Y}['${Q(J)}']`}$.Encode=W})(y8||(y8={}));var wX;(function($){function X(Z){let Q=[];for(let W=0;W<Z.length;W++){let Y=Z.charCodeAt(W);if(F2.IsNumeric(Y)||F2.IsAlpha(Y))Q.push(Z.charAt(W));else Q.push(`_${Y}_`)}return Q.join("").replace(/__/g,"_")}$.Encode=X})(wX||(wX={}));var qX;(function($){function X(Z){return Z.replace(/'/g,"\\'")}$.Escape=X})(qX||(qX={}));class sQ extends m{constructor($){super("Unknown type");this.schema=$}}class UX extends m{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var l2;(function($){function X(J,z,w){return I0.ExactOptionalPropertyTypes?`('${z}' in ${J} ? ${w} : true)`:`(${y8.Encode(J,z)} !== undefined ? ${w} : true)`}$.IsExactOptionalProperty=X;function Z(J){return!I0.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}))`:`(typeof ${J} === 'object' && ${J} !== null)`}$.IsObjectLike=Z;function Q(J){return!I0.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}) && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`:`(typeof ${J} === 'object' && ${J} !== null && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`}$.IsRecordLike=Q;function W(J){return I0.AllowNaN?`typeof ${J} === 'number'`:`Number.isFinite(${J})`}$.IsNumberLike=W;function Y(J){return I0.AllowNullVoid?`(${J} === undefined || ${J} === null)`:`${J} === undefined`}$.IsVoidLike=Y})(l2||(l2={}));var S2;(function($){function X(q){return q[N]==="Any"||q[N]==="Unknown"}function*Z(q,E,A){yield"true"}function*Q(q,E,A){yield`Array.isArray(${A})`;let[u,x]=[i0("value","any"),i0("acc","number")];if(y(q.maxItems))yield`${A}.length <= ${q.maxItems}`;if(y(q.minItems))yield`${A}.length >= ${q.minItems}`;let k=P(q.items,E,"value");if(yield`${A}.every((${u}) => ${k})`,l(q.contains)||y(q.minContains)||y(q.maxContains)){let S0=l(q.contains)?q.contains:w0(),W1=P(S0,E,"value"),q2=y(q.minContains)?[`(count >= ${q.minContains})`]:[],d1=y(q.maxContains)?[`(count <= ${q.maxContains})`]:[],t1=`const count = value.reduce((${x}, ${u}) => ${W1} ? acc + 1 : acc, 0)`,H8=["(count > 0)",...q2,...d1].join(" && ");yield`((${u}) => { ${t1}; return ${H8}})(${A})`}if(q.uniqueItems===!0)yield`((${u}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${A})`}function*W(q,E,A){yield`(typeof value === 'object' && Symbol.asyncIterator in ${A})`}function*Y(q,E,A){if(yield`(typeof ${A} === 'bigint')`,n0(q.exclusiveMaximum))yield`${A} < BigInt(${q.exclusiveMaximum})`;if(n0(q.exclusiveMinimum))yield`${A} > BigInt(${q.exclusiveMinimum})`;if(n0(q.maximum))yield`${A} <= BigInt(${q.maximum})`;if(n0(q.minimum))yield`${A} >= BigInt(${q.minimum})`;if(n0(q.multipleOf))yield`(${A} % BigInt(${q.multipleOf})) === 0`}function*J(q,E,A){yield`(typeof ${A} === 'boolean')`}function*z(q,E,A){yield*w2(q.returns,E,`${A}.prototype`)}function*w(q,E,A){if(yield`(${A} instanceof Date) && Number.isFinite(${A}.getTime())`,y(q.exclusiveMaximumTimestamp))yield`${A}.getTime() < ${q.exclusiveMaximumTimestamp}`;if(y(q.exclusiveMinimumTimestamp))yield`${A}.getTime() > ${q.exclusiveMinimumTimestamp}`;if(y(q.maximumTimestamp))yield`${A}.getTime() <= ${q.maximumTimestamp}`;if(y(q.minimumTimestamp))yield`${A}.getTime() >= ${q.minimumTimestamp}`;if(y(q.multipleOfTimestamp))yield`(${A}.getTime() % ${q.multipleOfTimestamp}) === 0`}function*G(q,E,A){yield`(typeof ${A} === 'function')`}function*B(q,E,A){if(yield`Number.isInteger(${A})`,y(q.exclusiveMaximum))yield`${A} < ${q.exclusiveMaximum}`;if(y(q.exclusiveMinimum))yield`${A} > ${q.exclusiveMinimum}`;if(y(q.maximum))yield`${A} <= ${q.maximum}`;if(y(q.minimum))yield`${A} >= ${q.minimum}`;if(y(q.multipleOf))yield`(${A} % ${q.multipleOf}) === 0`}function*H(q,E,A){let u=q.allOf.map((x)=>P(x,E,A)).join(" && ");if(q.unevaluatedProperties===!1){let x=T(`${new RegExp(L2(q))};`),k=`Object.getOwnPropertyNames(${A}).every(key => ${x}.test(key))`;yield`(${u} && ${k})`}else if(l(q.unevaluatedProperties)){let x=T(`${new RegExp(L2(q))};`),k=`Object.getOwnPropertyNames(${A}).every(key => ${x}.test(key) || ${P(q.unevaluatedProperties,E,`${A}[key]`)})`;yield`(${u} && ${k})`}else yield`(${u})`}function*O(q,E,A){yield`(typeof value === 'object' && Symbol.iterator in ${A})`}function*M(q,E,A){if(typeof q.const==="number"||typeof q.const==="boolean")yield`(${A} === ${q.const})`;else yield`(${A} === '${qX.Escape(q.const)}')`}function*F(q,E,A){yield"false"}function*K(q,E,A){yield`(!${P(q.not,E,A)})`}function*_(q,E,A){yield`(${A} === null)`}function*b(q,E,A){if(yield l2.IsNumberLike(A),y(q.exclusiveMaximum))yield`${A} < ${q.exclusiveMaximum}`;if(y(q.exclusiveMinimum))yield`${A} > ${q.exclusiveMinimum}`;if(y(q.maximum))yield`${A} <= ${q.maximum}`;if(y(q.minimum))yield`${A} >= ${q.minimum}`;if(y(q.multipleOf))yield`(${A} % ${q.multipleOf}) === 0`}function*I(q,E,A){if(yield l2.IsObjectLike(A),y(q.minProperties))yield`Object.getOwnPropertyNames(${A}).length >= ${q.minProperties}`;if(y(q.maxProperties))yield`Object.getOwnPropertyNames(${A}).length <= ${q.maxProperties}`;let u=Object.getOwnPropertyNames(q.properties);for(let x of u){let k=y8.Encode(A,x),S0=q.properties[x];if(q.required&&q.required.includes(x)){if(yield*w2(S0,E,k),P2(S0)||X(S0))yield`('${x}' in ${A})`}else{let W1=P(S0,E,k);yield l2.IsExactOptionalProperty(A,x,W1)}}if(q.additionalProperties===!1)if(q.required&&q.required.length===u.length)yield`Object.getOwnPropertyNames(${A}).length === ${u.length}`;else{let x=`[${u.map((k)=>`'${k}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${A}).every(key => ${x}.includes(key))`}if(typeof q.additionalProperties==="object"){let x=P(q.additionalProperties,E,`${A}[key]`),k=`[${u.map((S0)=>`'${S0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${A}).every(key => ${k}.includes(key) || ${x}))`}}function*S(q,E,A){yield`(typeof value === 'object' && typeof ${A}.then === 'function')`}function*c(q,E,A){if(yield l2.IsRecordLike(A),y(q.minProperties))yield`Object.getOwnPropertyNames(${A}).length >= ${q.minProperties}`;if(y(q.maxProperties))yield`Object.getOwnPropertyNames(${A}).length <= ${q.maxProperties}`;let[u,x]=Object.entries(q.patternProperties)[0],k=T(`${new RegExp(u)}`),S0=P(x,E,"value"),W1=l(q.additionalProperties)?P(q.additionalProperties,E,A):q.additionalProperties===!1?"false":"true",q2=`(${k}.test(key) ? ${S0} : ${W1})`;yield`(Object.entries(${A}).every(([key, value]) => ${q2}))`}function*d(q,E,A){let u=W0(q,E);if(j.functions.has(q.$ref))return yield`${V(q.$ref)}(${A})`;yield*w2(u,E,A)}function*i(q,E,A){let u=T(`${new RegExp(q.source,q.flags)};`);if(yield`(typeof ${A} === 'string')`,y(q.maxLength))yield`${A}.length <= ${q.maxLength}`;if(y(q.minLength))yield`${A}.length >= ${q.minLength}`;yield`${u}.test(${A})`}function*t(q,E,A){if(yield`(typeof ${A} === 'string')`,y(q.maxLength))yield`${A}.length <= ${q.maxLength}`;if(y(q.minLength))yield`${A}.length >= ${q.minLength}`;if(q.pattern!==void 0)yield`${T(`${new RegExp(q.pattern)};`)}.test(${A})`;if(q.format!==void 0)yield`format('${q.format}', ${A})`}function*J0(q,E,A){yield`(typeof ${A} === 'symbol')`}function*v(q,E,A){yield`(typeof ${A} === 'string')`,yield`${T(`${new RegExp(q.pattern)};`)}.test(${A})`}function*g(q,E,A){yield`${V(q.$ref)}(${A})`}function*$0(q,E,A){if(yield`Array.isArray(${A})`,q.items===void 0)return yield`${A}.length === 0`;yield`(${A}.length === ${q.maxItems})`;for(let u=0;u<q.items.length;u++)yield`${P(q.items[u],E,`${A}[${u}]`)}`}function*T0(q,E,A){yield`${A} === undefined`}function*f1(q,E,A){yield`(${q.anyOf.map((x)=>P(x,E,A)).join(" || ")})`}function*l8(q,E,A){if(yield`${A} instanceof Uint8Array`,y(q.maxByteLength))yield`(${A}.length <= ${q.maxByteLength})`;if(y(q.minByteLength))yield`(${A}.length >= ${q.minByteLength})`}function*e2(q,E,A){yield"true"}function*Q1(q,E,A){yield l2.IsVoidLike(A)}function*n8(q,E,A){let u=j.instances.size;j.instances.set(u,q),yield`kind('${q[N]}', ${u}, ${A})`}function*w2(q,E,A,u=!0){let x=o(q.$id)?[...E,q]:E,k=q;if(u&&o(q.$id)){let S0=V(q.$id);if(j.functions.has(S0))return yield`${S0}(${A})`;else{let W1=h(S0,q,E,"value",!1);return j.functions.set(S0,W1),yield`${S0}(${A})`}}switch(k[N]){case"Any":return yield*Z(k,x,A);case"Array":return yield*Q(k,x,A);case"AsyncIterator":return yield*W(k,x,A);case"BigInt":return yield*Y(k,x,A);case"Boolean":return yield*J(k,x,A);case"Constructor":return yield*z(k,x,A);case"Date":return yield*w(k,x,A);case"Function":return yield*G(k,x,A);case"Integer":return yield*B(k,x,A);case"Intersect":return yield*H(k,x,A);case"Iterator":return yield*O(k,x,A);case"Literal":return yield*M(k,x,A);case"Never":return yield*F(k,x,A);case"Not":return yield*K(k,x,A);case"Null":return yield*_(k,x,A);case"Number":return yield*b(k,x,A);case"Object":return yield*I(k,x,A);case"Promise":return yield*S(k,x,A);case"Record":return yield*c(k,x,A);case"Ref":return yield*d(k,x,A);case"RegExp":return yield*i(k,x,A);case"String":return yield*t(k,x,A);case"Symbol":return yield*J0(k,x,A);case"TemplateLiteral":return yield*v(k,x,A);case"This":return yield*g(k,x,A);case"Tuple":return yield*$0(k,x,A);case"Undefined":return yield*T0(k,x,A);case"Union":return yield*f1(k,x,A);case"Uint8Array":return yield*l8(k,x,A);case"Unknown":return yield*e2(k,x,A);case"Void":return yield*Q1(k,x,A);default:if(!b0.Has(k[N]))throw new sQ(q);return yield*n8(k,x,A)}}let j={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function P(q,E,A,u=!0){return`(${[...w2(q,E,A,u)].join(" && ")})`}function V(q){return`check_${wX.Encode(q)}`}function T(q){let E=`local_${j.variables.size}`;return j.variables.set(E,`const ${E} = ${q}`),E}function h(q,E,A,u,x=!0){let[k,S0]=["\n",(t1)=>"".padStart(t1," ")],W1=i0("value","any"),q2=r("boolean"),d1=[...w2(E,A,u,x)].map((t1)=>`${S0(4)}${t1}`).join(` &&${k}`);return`function ${q}(${W1})${q2} {${k}${S0(2)}return (${k}${d1}${k}${S0(2)})\n}`}function i0(q,E){let A=j.language==="typescript"?`: ${E}`:"";return`${q}${A}`}function r(q){return j.language==="typescript"?`: ${q}`:""}function y1(q,E,A){let u=h("check",q,E,"value"),x=i0("value","any"),k=r("boolean"),S0=[...j.functions.values()],W1=[...j.variables.values()],q2=o(q.$id)?`return function check(${x})${k} {\n  return ${V(q.$id)}(value)\n}`:`return ${u}`;return[...W1,...S0,q2].join("\n")}function d0(...q){let E={language:"javascript"},[A,u,x]=q.length===2&&p(q[1])?[q[0],q[1],E]:q.length===2&&!p(q[1])?[q[0],[],q[1]]:q.length===3?[q[0],q[1],q[2]]:q.length===1?[q[0],[],E]:[null,[],E];if(j.language=x.language,j.variables.clear(),j.functions.clear(),j.instances.clear(),!l(A))throw new UX(A);for(let k of u)if(!l(k))throw new UX(k);return y1(A,u,x)}$.Code=d0;function C1(q,E=[]){let A=d0(q,E,{language:"javascript"}),u=globalThis.Function("kind","format","hash",A),x=new Map(j.instances);function k(d1,t1,H8){if(!b0.Has(d1)||!x.has(t1))return!1;let eW=b0.Get(d1),$9=x.get(t1);return eW($9,H8)}function S0(d1,t1){if(!N0.Has(d1))return!1;return N0.Get(d1)(t1)}function W1(d1){return R2(d1)}let q2=u(k,S0,W1);return new GX(q,E,q2,A)}$.Compile=C1})(S2||(S2={}));var TW=D$(AX(),1),gW=D$(AX(),1),fW=D$(d8(),1);var r2=D$(d8(),1),lW=D$(d8(),1);var U$=($,X)=>{let Z=X?.length?{}:null;if(Z)for(let Q of X)Z[Q.part.charCodeAt(0)]=Q;return{part:$,store:null,inert:Z,params:null,wildcardStore:null}},QW=($,X)=>({...$,part:X}),WW=($)=>({name:$,store:null,inert:null}),NX=class ${root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/:.+?\?(?=\/|$)/g};add(X,Z,Q,{ignoreError:W=!1,ignoreHistory:Y=!1}={}){if(typeof Z!=="string")throw new TypeError("Route path must be a string");if(Z==="")Z="/";else if(Z[0]!=="/")Z=`/${Z}`;let J=Z[Z.length-1]==="*",z=Z.match($.regex.optionalParams);if(z){let O=Z.replaceAll("?","");this.add(X,O,Q,{ignoreError:W});for(let M=0;M<z.length;M++){let F=Z.replace("/"+z[M],"");this.add(X,F,Q,{ignoreError:!0})}return Q}if(z)Z=Z.replaceAll("?","");if(this.history.find(([O,M,F])=>O===X&&M===Z))return Q;if(J||z&&Z.charCodeAt(Z.length-1)===63)Z=Z.slice(0,-1);if(!Y)this.history.push([X,Z,Q]);let w=Z.split($.regex.static),G=Z.match($.regex.params)||[];if(w[w.length-1]==="")w.pop();let B;if(!this.root[X])B=this.root[X]=U$("/");else B=this.root[X];let H=0;for(let O=0;O<w.length;++O){let M=w[O];if(O>0){let F=G[H++].slice(1);if(B.params===null)B.params=WW(F);else if(B.params.name!==F)if(W)return Q;else throw new Error(`Cannot create route "${Z}" with parameter "${F}" because a route already exists with a different parameter name ("${B.params.name}") in the same location`);let K=B.params;if(K.inert===null){B=K.inert=U$(M);continue}B=K.inert}for(let F=0;;){if(F===M.length){if(F<B.part.length){let K=QW(B,B.part.slice(F));Object.assign(B,U$(M,[K]))}break}if(F===B.part.length){if(B.inert===null)B.inert={};let K=B.inert[M.charCodeAt(F)];if(K){B=K,M=M.slice(F),F=0;continue}let _=U$(M.slice(F));B.inert[M.charCodeAt(F)]=_,B=_;break}if(M[F]!==B.part[F]){let K=QW(B,B.part.slice(F)),_=U$(M.slice(F));Object.assign(B,U$(B.part.slice(0,F),[K,_])),B=_;break}++F}}if(H<G.length){let M=G[H].slice(1);if(B.params===null)B.params=WW(M);else if(B.params.name!==M)if(W)return Q;else throw new Error(`Cannot create route "${Z}" with parameter "${M}" because a route already exists with a different parameter name ("${B.params.name}") in the same location`);if(B.params.store===null)B.params.store=Q;return B.params.store}if(J){if(B.wildcardStore===null)B.wildcardStore=Q;return B.wildcardStore}if(B.store===null)B.store=Q;return B.store}find(X,Z){let Q=this.root[X];if(!Q)return null;return FX(Z,Z.length,Q,0)}},FX=($,X,Z,Q)=>{let W=Z.part,Y=W.length,J=Q+Y;if(Y>1){if(J>X)return null;if(Y<15){for(let z=1,w=Q+1;z<Y;++z,++w)if(W.charCodeAt(z)!==$.charCodeAt(w))return null}else if($.slice(Q,J)!==W)return null}if(J===X){if(Z.store!==null)return{store:Z.store,params:{}};if(Z.wildcardStore!==null)return{store:Z.wildcardStore,params:{"*":""}};return null}if(Z.inert!==null){let z=Z.inert[$.charCodeAt(J)];if(z!==void 0){let w=FX($,X,z,J);if(w!==null)return w}}if(Z.params!==null){let{store:z,name:w,inert:G}=Z.params,B=$.indexOf("/",J);if(B!==J){if(B===-1||B>=X){if(z!==null){let H={};return H[w]=$.substring(J,X),{store:z,params:H}}}else if(G!==null){let H=FX($,X,G,B);if(H!==null)return H.params[w]=$.substring(J,B),H}}}if(Z.wildcardStore!==null)return{store:Z.wildcardStore,params:{"*":$.substring(J,X)}};return null},B8=($)=>{let X=typeof $==="object"?$.fn.toString():typeof $==="string"?$.toString():$,Z=X.indexOf(")");if(X.charCodeAt(Z+2)===61&&X.charCodeAt(Z+5)!==123)return!0;return X.includes("return")},qw=($)=>{if($.startsWith("async"))$=$.slice(5);$=$.trimStart();let X=-1;if($.charCodeAt(0)===40){if(X=$.indexOf("=>",$.indexOf(")")),X!==-1){let W=X;while(W>0)if($.charCodeAt(--W)===41)break;let Y=$.slice(X+2);if(Y.charCodeAt(0)===32)Y=Y.trimStart();return[$.slice(1,W),Y,{isArrowReturn:Y.charCodeAt(0)!==123}]}}if($.startsWith("function")){X=$.indexOf("(");let W=$.indexOf(")");return[$.slice(X+1,W),$.slice(W+2),{isArrowReturn:!1}]}let Z=$.indexOf("(");if(Z!==-1){let W=$.indexOf("\n",2),Y=$.slice(0,W),J=Y.lastIndexOf(")")+1,z=$.slice(W+1);return[Y.slice(Z,J),"{"+z,{isArrowReturn:!1}]}let Q=$.split("\n",2);return[Q[0],Q[1],{isArrowReturn:!1}]},Uw=($)=>{let X=$.indexOf("{");if(X===-1)return[-1,0];let Z=X+1,Q=1;for(;Z<$.length;Z++){let W=$.charCodeAt(Z);if(W===123)Q++;else if(W===125)Q--;if(Q===0)break}if(Q!==0)return[0,$.length];return[X,Z+1]},Gw=($)=>{let X=$.lastIndexOf("}");if(X===-1)return[-1,0];let Z=X-1,Q=1;for(;Z>=0;Z--){let W=$.charCodeAt(Z);if(W===125)Q++;else if(W===123)Q--;if(Q===0)break}if(Q!==0)return[-1,0];return[Z,X+1]},CW=($)=>{while(!0){let X=$.indexOf(":");if(X===-1)break;let Z=$.indexOf(",",X);if(Z===-1)Z=$.indexOf("}",X)-1;if(Z===-2)Z=$.length;$=$.slice(0,X)+$.slice(Z)}return $},bW=($)=>{let X=!1;if($.charCodeAt(0)===40)$=$.slice(1,-1);if($.charCodeAt(0)===123)X=!0,$=$.slice(1,-1);$=$.replace(/( |\t|\n)/g,"").trim();let Z=[];while(!0){let[W,Y]=Uw($);if(W===-1)break;if(Z.push($.slice(0,W-1)),$.charCodeAt(Y)===44)Y++;$=$.slice(Y)}if($=CW($),$)Z=Z.concat($.split(","));let Q=[];for(let W of Z){if(W.indexOf(",")===-1){Q.push(W);continue}for(let Y of W.split(","))Q.push(Y.trim())}return Z=Q,{hasParenthesis:X,parameters:Z}},Aw=($,X)=>{let{parameters:Z,hasParenthesis:Q}=bW($);if(!X.query&&Z.includes("query"))X.query=!0;if(!X.headers&&Z.includes("headers"))X.headers=!0;if(!X.body&&Z.includes("body"))X.body=!0;if(!X.cookie&&Z.includes("cookie"))X.cookie=!0;if(!X.set&&Z.includes("set"))X.set=!0;if(!X.server&&Z.includes("server"))X.server=!0;if(Q)return`{ ${Z.join(", ")} }`;return Z.join(", ")},Hw=($,X,Z)=>{let Q=X.indexOf($+"\n",Z),W=X.indexOf($+"	",Z),Y=X.indexOf($+",",Z),J=X.indexOf($+";",Z),z=X.indexOf($+" ",Z);return[Q,W,Y,J,z].filter((w)=>w>0).sort((w,G)=>w-G)[0]||-1},RW=($,X,Z=0)=>{if(Z>5)return[];let Q=[],W=X;while(!0){let Y=Hw(" = "+$,W);if(Y===-1){let w=W.indexOf(" = "+$);if(w+3+$.length!==W.length)break;Y=w}let J=W.slice(0,Y),z=J.slice(J.lastIndexOf(" ")+1);if(z==="}"){let[w,G]=Gw(J);Q.push(CW(W.slice(w,G))),W=W.slice(Y+3+$.length);continue}while(z.charCodeAt(0)===44)z=z.slice(1);while(z.charCodeAt(0)===9)z=z.slice(1);if(!z.includes("("))Q.push(z);W=W.slice(Y+3+$.length)}for(let Y of Q){if(Y.charCodeAt(0)===123)continue;let J=RW(Y,X);if(J.length>0)Q.push(...J)}return Q},Nw=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(",")){if($.includes("..."))return $.slice($.indexOf("...")+3);return}let Z=$.indexOf("...");if(Z===-1)return;return $.slice(Z+3).trimEnd()},Dw=($,X,Z)=>{let Q=(W,Y)=>$.includes(Y+"."+W)||$.includes(Y+'["'+W+'"]')||$.includes(Y+"['"+W+"']");for(let W of X){if(!W)continue;if(W.charCodeAt(0)===123){let Y=bW(W).parameters;if(!Z.query&&Y.includes("query"))Z.query=!0;if(!Z.headers&&Y.includes("headers"))Z.headers=!0;if(!Z.body&&Y.includes("body"))Z.body=!0;if(!Z.cookie&&Y.includes("cookie"))Z.cookie=!0;if(!Z.set&&Y.includes("set"))Z.set=!0;if(!Z.query&&Y.includes("server"))Z.server=!0;continue}if(!Z.query&&Q("query",W))Z.query=!0;if($.includes("return "+W)||$.includes("return "+W+".query"))Z.query=!0;if(!Z.headers&&Q("headers",W))Z.headers=!0;if(!Z.body&&Q("body",W))Z.body=!0;if(!Z.cookie&&Q("cookie",W))Z.cookie=!0;if(!Z.set&&Q("set",W))Z.set=!0;if(!Z.server&&Q("server",W))Z.server=!0;if(Z.query&&Z.headers&&Z.body&&Z.cookie&&Z.set&&Z.server)break}return X},Lw=($,X,Z)=>{try{let Q=new RegExp(`(?:\\w)\\((?:.*)?${$}`,"gs");Q.test(X);let W=X.charCodeAt(Q.lastIndex);if(W===41||W===44)return Z.query=!0,Z.headers=!0,Z.body=!0,Z.cookie=!0,Z.set=!0,Z.server=!0,!0;return!1}catch(Q){return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(X),console.log("--- context ---"),console.log($),!0}},VW=($,X={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1})=>{let Z=[];if($.handler&&typeof $.handler==="function")Z.push($.handler);if($.request?.length)Z.push(...$.request);if($.beforeHandle?.length)Z.push(...$.beforeHandle);if($.parse?.length)Z.push(...$.parse);if($.error?.length)Z.push(...$.error);if($.transform?.length)Z.push(...$.transform);if($.afterHandle?.length)Z.push(...$.afterHandle);if($.mapResponse?.length)Z.push(...$.mapResponse);if($.afterResponse?.length)Z.push(...$.afterResponse);for(let Q of Z){if(!Q)continue;let W="fn"in Q?Q.fn:Q,[Y,J,{isArrowReturn:z}]=qw(W.toString()),w=Aw(Y,X),G=Nw(w);if(G){let B=RW(G,J);if(B.splice(0,-1,G),!Lw(G,J,X))Dw(J,B,X);if(!X.query&&J.includes("return "+G+".query"))X.query=!0}if(X.query&&X.headers&&X.body&&X.cookie&&X.set&&X.server)break}return X},bX={date:EW,time:SX(!0),"date-time":YW(!0),"iso-time":SX(!1),"iso-date-time":YW(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Cw,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:kw,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:bw,int32:{type:"number",validate:Ew},int64:{type:"number",validate:Iw},float:{type:"number",validate:zW},double:{type:"number",validate:zW},password:!0,binary:!0};function Pw($){return $%4===0&&($%100!==0||$%400===0)}var Ow=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,_w=[0,31,28,31,30,31,30,31,31,30,31,30,31];function EW($){let X=Ow.exec($);if(!X)return!1;let Z=+X[1],Q=+X[2],W=+X[3];return Q>=1&&Q<=12&&W>=1&&W<=(Q===2&&Pw(Z)?29:_w[Q])}var Fw=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function SX($){return function X(Z){let Q=Fw.exec(Z);if(!Q)return!1;let W=+Q[1],Y=+Q[2],J=+Q[3],z=Q[4],w=Q[5]==="-"?-1:1,G=+(Q[6]||0),B=+(Q[7]||0);if(G>23||B>59||$&&!z)return!1;if(W<=23&&Y<=59&&J<60)return!0;let H=Y-B*w,O=W-G*w-(H<0?1:0);return(O===23||O===-1)&&(H===59||H===-1)&&J<61}}var Sw=/t|\s/i;function YW($){let X=SX($);return function Z(Q){let W=Q.split(Sw);return W.length===2&&EW(W[0])&&X(W[1])}}var Kw=/\/|:/,jw=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Cw($){return Kw.test($)&&jw.test($)}var JW=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function bw($){return JW.lastIndex=0,JW.test($)}var Rw=-2147483648,Vw=2147483647;function Ew($){return Number.isInteger($)&&$<=Vw&&$>=Rw}function Iw($){return Number.isInteger($)}function zW(){return!0}var xw=/[^\\]\\Z/;function kw($){if(xw.test($))return!1;try{return new RegExp($),!0}catch(X){return!1}}var IW=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,xW=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,kW=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,Tw=bX.date,gw=bX["date-time"];if(!N0.Has("date"))a1.Format("date",($)=>{let X=$.replace(/"/g,"");if(IW.test(X)||xW.test(X)||kW.test(X)||Tw(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});if(!N0.Has("date-time"))a1.Format("date-time",($)=>{let X=$.replace(/"/g,"");if(IW.test(X)||xW.test(X)||kW.test(X)||gw(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});Object.entries(bX).forEach(($)=>{let[X,Z]=$;if(!N0.Has(X)){if(Z instanceof RegExp)a1.Format(X,(Q)=>Z.test(Q));else if(typeof Z==="function")a1.Format(X,Z)}});var f=Object.assign({},q$),MW=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},KX=($,X)=>{if(!(X instanceof Blob))return!1;if($.minSize&&X.size<MW($.minSize))return!1;if($.maxSize&&X.size>MW($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!X.type.startsWith($.extension))return!1}else{for(let Z=0;Z<$.extension.length;Z++)if(X.type.startsWith($.extension[Z]))return!0;return!1}return!0},fw=b0.Get("Files")??a1.Type("File",KX),yw=b0.Get("Files")??a1.Type("Files",($,X)=>{if(!Array.isArray(X))return KX($,X);if($.minItems&&X.length<$.minItems)return!1;if($.maxItems&&X.length>$.maxItems)return!1;for(let Z=0;Z<X.length;Z++)if(!KX($,X[Z]))return!1;return!0});if(!N0.Has("numeric"))N0.Set("numeric",($)=>!!$&&!isNaN(+$));if(!N0.Has("boolean"))N0.Set("boolean",($)=>$==="true"||$==="false");if(!N0.Has("ObjectString"))N0.Set("ObjectString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});if(!N0.Has("ArrayString"))N0.Set("ArrayString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});b0.Set("UnionEnum",($,X)=>{return(typeof X==="number"||typeof X==="string"||X===null)&&$.enum.includes(X)});var o1={Numeric:($)=>{let X=q$.Number($);return f.Transform(f.Union([f.String({format:"numeric",default:0}),f.Number($)],$)).Decode((Z)=>{let Q=+Z;if(isNaN(Q))return Z;if($&&!n.Check(X,Q))throw new L0("property",X,Q);return Q}).Encode((Z)=>Z)},Date:($)=>{let X=q$.Date($);return f.Transform(f.Union([q$.Date($),f.String({format:"date",default:new Date().toISOString()}),f.String({format:"date-time",default:new Date().toISOString()})],$)).Decode((Z)=>{if(Z instanceof Date)return Z;let Q=new Date(Z);if(!n.Check(X,Q))throw new L0("property",X,Q);return Q}).Encode((Z)=>{if(typeof Z==="string")return new Date(Z);return Z})},BooleanString:($)=>{let X=q$.Boolean($);return f.Transform(f.Union([f.String({format:"boolean",default:!1}),f.Boolean($)],$)).Decode((Z)=>{if(typeof Z==="string")return Z==="true";if($&&!n.Check(X,Z))throw new L0("property",X,Z);return Z}).Encode((Z)=>Z)},ObjectString:($,X)=>{let Z=f.Object($,X),Q=JSON.stringify(n.Create(Z)),W;try{W=S2.Compile(Z)}catch{}return f.Transform(f.Union([f.String({format:"ObjectString",default:Q}),Z])).Decode((Y)=>{if(typeof Y==="string"){if(Y.charCodeAt(0)!==123)throw new L0("property",Z,Y);try{Y=JSON.parse(Y)}catch{throw new L0("property",Z,Y)}if(W){if(!W.Check(Y))throw new L0("property",Z,Y);return W.Decode(Y)}if(!n.Check(Z,Y))throw new L0("property",Z,Y);return n.Decode(Z,Y)}return Y}).Encode((Y)=>{if(typeof Y==="string")try{Y=JSON.parse(Y)}catch{throw new L0("property",Z,Y)}if(!n.Check(Z,Y))throw new L0("property",Z,Y);return JSON.stringify(Y)})},ArrayString:($={},X)=>{let Z=f.Array($,X),Q=JSON.stringify(n.Create(Z)),W;try{W=S2.Compile(Z)}catch{}return f.Transform(f.Union([f.String({format:"ArrayString",default:Q}),Z])).Decode((Y)=>{if(typeof Y==="string"){if(Y.charCodeAt(0)!==91)throw new L0("property",Z,Y);try{Y=JSON.parse(Y)}catch{throw new L0("property",Z,Y)}if(W){if(!W.Check(Y))throw new L0("property",Z,Y);return W.Decode(Y)}if(!n.Check(Z,Y))throw new L0("property",Z,Y);return n.Decode(Z,Y)}return Y}).Encode((Y)=>{if(typeof Y==="string")try{Y=JSON.parse(Y)}catch{throw new L0("property",Z,Y)}if(!n.Check(Z,Y))throw new L0("property",Z,Y);return JSON.stringify(Y)})},File:fw,Files:($={})=>f.Transform(yw($)).Decode((X)=>{if(Array.isArray(X))return X;return[X]}).Encode((X)=>X),Nullable:($)=>f.Union([$,f.Null()]),MaybeEmpty:($)=>f.Union([$,f.Null(),f.Undefined()]),Cookie:($,{domain:X,expires:Z,httpOnly:Q,maxAge:W,path:Y,priority:J,sameSite:z,secure:w,secrets:G,sign:B,...H}={})=>{let O=f.Object($,H);return O.config={domain:X,expires:Z,httpOnly:Q,maxAge:W,path:Y,priority:J,sameSite:z,secure:w,secrets:G,sign:B},O},UnionEnum:($,X={})=>{let Z=$.every((Q)=>typeof Q==="string")?{type:"string"}:$.every((Q)=>typeof Q==="number")?{type:"number"}:$.every((Q)=>Q===null)?{type:"null"}:{};if($.some((Q)=>typeof Q==="object"&&Q!==null))throw new Error("This type does not support objects or arrays");return{default:$[0],...X,[N]:"UnionEnum",...Z,enum:$}}};f.BooleanString=o1.BooleanString;f.ObjectString=o1.ObjectString;f.ArrayString=o1.ArrayString;f.Numeric=o1.Numeric;f.File=($={})=>o1.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"});f.Files=($={})=>o1.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});f.Nullable=($)=>o1.Nullable($);f.MaybeEmpty=o1.MaybeEmpty;f.Cookie=o1.Cookie;f.Date=o1.Date;f.UnionEnum=o1.UnionEnum;var A$=class{constructor($,X,Z={}){this.name=$,this.jar=X,this.initial=Z}get cookie(){return this.jar[this.name]??this.initial}set cookie($){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=$}get setCookie(){if(!(this.name in this.jar))this.jar[this.name]=this.initial;return this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){this.setCookie.value=$}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $==="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $==="function"?$(this.cookie):$),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}},BW=($,X,Z)=>{if(!$.cookie)$.cookie={};return new Proxy(X,{get(Q,W){if(W in X)return new A$(W,$.cookie,Object.assign({},Z??{},X[W]));return new A$(W,$.cookie,Object.assign({},Z))}})},yW=async($,X,{secrets:Z,sign:Q,...W}={})=>{if(!X)return BW($,{},W);let Y=typeof Z==="string";if(Q&&Q!==!0&&!Array.isArray(Q))Q=[Q];let J={},z=gW.parse(X);for(let[w,G]of Object.entries(z)){let B=fW.default(G);if(Q===!0||Q?.includes(w)){if(!Z)throw new Error("No secret is provided to cookie plugin");if(Y){let H=await DW(B,Z);if(H===!1)throw new _W(w);B=H}else{let H=!0;for(let O=0;O<Z.length;O++){let M=await DW(B,Z[O]);if(M!==!1){H=!0,B=M;break}}if(!H)throw new _W(w)}}J[w]={value:B}}return BW($,J,W)},dW="toJSON"in new Headers,n1=($)=>{if(!$)return!1;for(let X in $)return!0;return!1},w8=($,X)=>{let Z=$.size;if(!X&&Z||Z&&X&&X.status!==206&&X.status!==304&&X.status!==412&&X.status!==416){if(X&&n1(X.headers)){if(X.headers instanceof Headers){if(dW)X.headers=X.headers.toJSON();else for(let[Q,W]of X.headers.entries())if(Q in X.headers)X.headers[Q]=W}return new Response($,{status:X.status,headers:Object.assign({"accept-ranges":"bytes","content-range":`bytes 0-${Z-1}/${Z}`},X.headers)})}return new Response($,{headers:{"accept-ranges":"bytes","content-range":`bytes 0-${Z-1}/${Z}`,"transfer-encoding":"chunked"}})}return new Response($)},vW=($,X)=>{if(!$)return $;$.delete("set-cookie");for(let Z=0;Z<X.length;Z++){let Q=X[Z].indexOf("=");$.append("set-cookie",`${X[Z].slice(0,Q)}=${X[Z].slice(Q+1)||""}`)}return $},hW=($)=>{if(!$||!n1($))return;let X=[];for(let[Z,Q]of Object.entries($)){if(!Z||!Q)continue;let W=Q.value;if(W===void 0||W===null)continue;X.push(TW.serialize(Z,typeof W==="object"?JSON.stringify(W):W+"",Q))}if(X.length===0)return;if(X.length===1)return X[0];return X},z2=async($,X,Z)=>{let Q=$.next();if(Q instanceof Promise)Q=await Q;if(Q.done){if(X)return E0(Q.value,X,Z);return j2(Q.value,Z)}return new Response(new ReadableStream({async start(W){let Y=!1;if(Z?.signal.addEventListener("abort",()=>{Y=!0;try{W.close()}catch{}}),Q.value!==void 0&&Q.value!==null)if(typeof Q.value==="object")try{W.enqueue(Buffer.from(JSON.stringify(Q.value)))}catch{W.enqueue(Buffer.from(Q.value.toString()))}else W.enqueue(Buffer.from(Q.value.toString()));for await(let J of $){if(Y)break;if(J===void 0||J===null)continue;if(typeof J==="object")try{W.enqueue(Buffer.from(JSON.stringify(J)))}catch{W.enqueue(Buffer.from(J.toString()))}else W.enqueue(Buffer.from(J.toString()));await new Promise((z)=>setTimeout(()=>z(),0))}try{W.close()}catch{}}}),{...X,headers:{"transfer-encoding":"chunked","content-type":"text/event-stream; charset=utf-8",...X?.headers}})};async function*q8($){let X=$.body;if(!X)return;let Z=X.getReader(),Q=new TextDecoder;try{while(!0){let{done:W,value:Y}=await Z.read();if(W)break;yield Q.decode(Y)}}finally{Z.releaseLock()}}var E0=($,X,Z)=>{if(n1(X.headers)||X.status!==200||X.redirect||X.cookie){if(typeof X.status==="string")X.status=U8[X.status];if(X.redirect){if(X.headers.Location=X.redirect,!X.status||X.status<300||X.status>=400)X.status=302}if(X.cookie&&n1(X.cookie)){let Q=hW(X.cookie);if(Q)X.headers["set-cookie"]=Q}if(X.headers["set-cookie"]&&Array.isArray(X.headers["set-cookie"]))X.headers=vW(new Headers(X.headers),X.headers["set-cookie"]);switch($?.constructor?.name){case"String":return new Response($,X);case"Blob":return w8($,X);case"Array":return Response.json($,X);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,E0($.response,X,Z);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,X);case void 0:if(!$)return new Response("",X);return Response.json($,X);case"Response":let Q=!1;if(X.headers instanceof Headers)for(let W of X.headers.keys())if(W==="set-cookie"){if(Q)continue;Q=!0;for(let Y of X.headers.getSetCookie())$.headers.append("set-cookie",Y)}else $.headers.append(W,X.headers?.get(W)??"");else for(let W in X.headers)$.headers.append(W,X.headers[W]);if($.status!==X.status)X.status=$.status;if($.headers.get("transfer-encoding")==="chunked")return z2(q8($),X,Z);return $;case"Error":return M2($,X);case"Promise":return $.then((W)=>E0(W,X));case"Function":return E0($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"Cookie":if($ instanceof A$)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response){let W=!1;if(X.headers instanceof Headers)for(let Y of X.headers.keys())if(Y==="set-cookie"){if(W)continue;W=!0;for(let J of X.headers.getSetCookie())$.headers.append("set-cookie",J)}else $.headers.append(Y,X.headers?.get(Y)??"");else for(let Y in X.headers)$.headers.append(Y,X.headers[Y]);if(dW)X.headers=$.headers.toJSON();else for(let[Y,J]of $.headers.entries())if(Y in X.headers)X.headers[Y]=J;return $}if($ instanceof Promise)return $.then((W)=>E0(W,X));if($ instanceof Error)return M2($,X);if($ instanceof B2)return X.status=$.code,E0($.response,X,Z);if(typeof $?.next==="function")return z2($,X,Z);if(typeof $?.then==="function")return $.then((W)=>E0(W,X));if(typeof $?.toResponse==="function")return E0($.toResponse(),X);if("charCodeAt"in $){let W=$.charCodeAt(0);if(W===123||W===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}}else switch($?.constructor?.name){case"String":return new Response($);case"Blob":return w8($,X);case"Array":return Response.json($);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,E0($.response,X,Z);case"ReadableStream":return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return z2(q8($),X,Z);return $;case"Error":return M2($,X);case"Promise":return $.then((Q)=>{let W=j2(Q,Z);if(W!==void 0)return W;return new Response("")});case"Function":return j2($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof A$)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>E0(Q,X));if($ instanceof Error)return M2($,X);if($ instanceof B2)return X.status=$.code,E0($.response,X,Z);if(typeof $?.next==="function")return z2($,X,Z);if(typeof $?.then==="function")return $.then((Q)=>E0(Q,X));if(typeof $?.toResponse==="function")return E0($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},c0=($,X,Z)=>{if($===void 0||$===null)return;if(n1(X.headers)||X.status!==200||X.redirect||X.cookie){if(typeof X.status==="string")X.status=U8[X.status];if(X.redirect){if(X.headers.Location=X.redirect,!X.status||X.status<300||X.status>=400)X.status=302}if(X.cookie&&n1(X.cookie)){let Q=hW(X.cookie);if(Q)X.headers["set-cookie"]=Q}if(X.headers["set-cookie"]&&Array.isArray(X.headers["set-cookie"]))X.headers=vW(new Headers(X.headers),X.headers["set-cookie"]);switch($?.constructor?.name){case"String":return new Response($,X);case"Blob":return w8($,X);case"Array":return Response.json($,X);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,c0($.response,X,Z);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,X);case void 0:if(!$)return;return Response.json($,X);case"Response":let Q=!1;if(X.headers instanceof Headers)for(let W of X.headers.keys())if(W==="set-cookie"){if(Q)continue;Q=!0;for(let Y of X.headers.getSetCookie())$.headers.append("set-cookie",Y)}else $.headers.append(W,X.headers?.get(W)??"");else for(let W in X.headers)$.headers.append(W,X.headers[W]);if($.status!==X.status)X.status=$.status;if($.headers.get("transfer-encoding")==="chunked")return z2(q8($),X,Z);return $;case"Promise":return $.then((W)=>{let Y=c0(W,X);if(Y!==void 0)return Y});case"Error":return M2($,X);case"Function":return c0($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"FormData":return new Response($);case"Cookie":if($ instanceof A$)return new Response($.value,X);return new Response($?.toString(),X);default:if($ instanceof Response){let W=!1;if(X.headers instanceof Headers)for(let Y of X.headers.keys())if(Y==="set-cookie"){if(W)continue;W=!0;for(let J of X.headers.getSetCookie())$.headers.append("set-cookie",J)}else $.headers.append(Y,X.headers?.get(Y)??"");else for(let Y in X.headers)$.headers.append(Y,X.headers[Y]);if($.status!==X.status)X.status=$.status;return $}if($ instanceof Promise)return $.then((W)=>c0(W,X));if($ instanceof Error)return M2($,X);if($ instanceof B2)return X.status=$.code,c0($.response,X,Z);if(typeof $?.next==="function")return z2($,X,Z);if(typeof $?.then==="function")return $.then((W)=>c0(W,X));if(typeof $?.toResponse==="function")return c0($.toResponse(),X);if("charCodeAt"in $){let W=$.charCodeAt(0);if(W===123||W===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}}else switch($?.constructor?.name){case"String":return new Response($);case"Blob":return w8($,X);case"Array":return Response.json($);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,c0($.response,X,Z);case"ReadableStream":return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return z2(q8($));return $;case"Promise":return $.then((Q)=>{let W=c0(Q,X);if(W!==void 0)return W});case"Error":return M2($,X);case"Function":return j2($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof A$)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>c0(Q,X));if($ instanceof Error)return M2($,X);if($ instanceof B2)return X.status=$.code,c0($.response,X,Z);if(typeof $?.next==="function")return z2($,X,Z);if(typeof $?.then==="function")return $.then((Q)=>c0(Q,X));if(typeof $?.toResponse==="function")return c0($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},j2=($,X)=>{switch($?.constructor?.name){case"String":return new Response($);case"Blob":return w8($);case"Array":return Response.json($);case"Object":return Response.json($);case"ElysiaCustomStatusResponse":return E0($.response,{status:$.code,headers:{}});case"ReadableStream":return X?.signal.addEventListener("abort",{handleEvent(){if(!X?.signal.aborted)$.cancel(X)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return z2(q8($));return $;case"Error":return M2($);case"Promise":return $.then((Z)=>j2(Z,X));case"Function":return j2($(),X);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Z)=>j2(Z,X));if($ instanceof Error)return M2($);if($ instanceof B2)return E0($.response,{status:$.code,headers:{}});if(typeof $?.next==="function")return z2($,void 0,X);if(typeof $?.then==="function")return $.then((Z)=>E0(Z,set));if(typeof $?.toResponse==="function")return j2($.toResponse());if("charCodeAt"in $){let Z=$.charCodeAt(0);if(Z===123||Z===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},M2=($,X)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:X?.status!==200?X?.status??500:500,headers:X?.headers}),dw=($,X,Z={})=>{if(typeof $==="function")return;let Q=E0($,{headers:Z});if(X.parse.length===0&&X.transform.length===0&&X.beforeHandle.length===0&&X.afterHandle.length===0)return Q.clone.bind(Q)},vw=($,X,Z={})=>{if(typeof $==="function"||$ instanceof Blob)return;let Q=E0($,{headers:Z});if(X.parse.length===0&&X.transform.length===0&&X.beforeHandle.length===0&&X.afterHandle.length===0){if(!Q.headers.has("content-type"))Q.headers.append("content-type","text/plain;charset=utf-8");return Q.clone.bind(Q)}},v8=($,X)=>{let Z=new URL($);return Z.pathname=X,Z.toString()},hw=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||n1(Object.getPrototypeOf($)),DX=($)=>$&&typeof $==="object"&&!Array.isArray($),U1=($,X,{skipKeys:Z,override:Q=!0}={})=>{if(!DX($)||!DX(X))return $;for(let[W,Y]of Object.entries(X)){if(Z?.includes(W))continue;if(!DX(Y)||!(W in $)||hw(Y)){if(Q||!(W in $))$[W]=Y;continue}$[W]=U1($[W],Y,{skipKeys:Z,override:Q})}return $},pw=($,X)=>{let{properties:Z,...Q}=$??{},{properties:W,...Y}=X??{};return U1(Q,Y)},p0=($=[],X=[])=>{if(!$)return[];if(!X)return $;let Z=[],Q=[];if(!Array.isArray($))$=[$];if(!Array.isArray(X))X=[X];for(let W of $)if(Z.push(W),W.checksum)Q.push(W.checksum);for(let W of X)if(!Q.includes(W.checksum))Z.push(W);return Z},mw=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],uw=mw.reduce(($,X)=>($[X]=!0,$),{}),pW=($,X)=>{let Z=(Q)=>typeof Q==="object"&&Object.keys(Q).every(jX);if(Z($)&&Z(X))return{...$,...X};else if($&&!Z($)&&Z(X))return{200:$,...X};return X??$},z8=($,X)=>{return{body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:pW($?.response,X?.response)}},T1=($,X)=>{return{...$,...X,body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:pW($?.response,X?.response),type:$?.type||X?.type,detail:U1(X?.detail??{},$?.detail??{}),parse:p0($?.parse,X?.parse),transform:p0($?.transform,X?.transform),beforeHandle:p0($?.beforeHandle,X?.beforeHandle),afterHandle:p0($?.afterHandle,X?.afterHandle),mapResponse:p0($?.mapResponse,X?.mapResponse),afterResponse:p0($?.afterResponse,X?.afterResponse),trace:p0($?.trace,X?.trace),error:p0($?.error,X?.error)}},wW=($,X,Z=!0)=>{if(!Array.isArray(X))return $1($,X,Z);for(let Q of X)$=$1($,Q,Z);return $},$1=($,X,Z=!0)=>{if(!$)return $;if(X.untilObjectFound&&!Z&&$.type==="object")return $;let Q=X.from[N];if($.oneOf){for(let J=0;J<$.oneOf.length;J++)$.oneOf[J]=$1($.oneOf[J],X,Z);return $}if($.anyOf){for(let J=0;J<$.anyOf.length;J++)$.anyOf[J]=$1($.anyOf[J],X,Z);return $}if($.allOf){for(let J=0;J<$.allOf.length;J++)$.allOf[J]=$1($.allOf[J],X,Z);return $}if($.not){for(let J=0;J<$.not.length;J++)$.not[J]=$1($.not[J],X,Z);return $}let W=Z&&!!X.excludeRoot;if($[N]===Q){let{anyOf:J,oneOf:z,allOf:w,not:G,properties:B,items:H,...O}=$,M=X.to(O),F,K=(_)=>{if(B&&_.type==="object"){let I={};for(let[S,c]of Object.entries(B))I[S]=$1(c,X,!1);return{...O,..._,properties:I}}if(H&&_.type==="array")return{...O,..._,items:$1(H,X,!1)};let b={...O,..._};if(delete b.required,B&&_.type==="string"&&_.format==="ObjectString"&&_.default==="{}")F=f.ObjectString(B,O),b.default=JSON.stringify(n.Create(f.Object(B))),b.properties=B;if(H&&_.type==="string"&&_.format==="ArrayString"&&_.default==="[]")F=f.ArrayString(H,O),b.default=JSON.stringify(n.Create(f.Array(H))),b.items=H;return b};if(W){if(B){let _={};for(let[b,I]of Object.entries(B))_[b]=$1(I,X,!1);return{...O,properties:_}}else if(H?.map)return{...O,items:H.map((_)=>$1(_,X,!1))};return O}if(M.anyOf)for(let _=0;_<M.anyOf.length;_++)M.anyOf[_]=K(M.anyOf[_]);else if(M.oneOf)for(let _=0;_<M.oneOf.length;_++)M.oneOf[_]=K(M.oneOf[_]);else if(M.allOf)for(let _=0;_<M.allOf.length;_++)M.allOf[_]=K(M.allOf[_]);else if(M.not)for(let _=0;_<M.not.length;_++)M.not[_]=K(M.not[_]);if(F)M[j0]=F[j0];if(M.anyOf||M.oneOf||M.allOf||M.not)return M;if(B){let _={};for(let[b,I]of Object.entries(B))_[b]=$1(I,X,!1);return{...O,...M,properties:_}}else if(H?.map)return{...O,...M,items:H.map((_)=>$1(_,X,!1))};return{...O,...M}}let Y=$?.properties;if(Y&&Z&&X.rootOnly!==!0)for(let[J,z]of Object.entries(Y))switch(z[N]){case Q:let{anyOf:w,oneOf:G,allOf:B,not:H,type:O,...M}=z,F=X.to(M);if(F.anyOf)for(let K=0;K<F.anyOf.length;K++)F.anyOf[K]={...M,...F.anyOf[K]};else if(F.oneOf)for(let K=0;K<F.oneOf.length;K++)F.oneOf[K]={...M,...F.oneOf[K]};else if(F.allOf)for(let K=0;K<F.allOf.length;K++)F.allOf[K]={...M,...F.allOf[K]};else if(F.not)for(let K=0;K<F.not.length;K++)F.not[K]={...M,...F.not[K]};Y[J]={...M,...$1(M,X,!1)};break;case"Object":case"Union":Y[J]=$1(z,X,!1);break;default:if(z.items)for(let K=0;K<z.items.length;K++)z.items[K]=$1(z.items[K],X,!1);else if(z.anyOf||z.oneOf||z.allOf||z.not)Y[J]=$1(z,X,!1);break}return $},q1=($,{models:X={},dynamic:Z=!1,normalize:Q=!1,additionalProperties:W=!1,coerce:Y=!1,additionalCoerce:J=[]}={})=>{if(!$)return;if(typeof $==="string"&&!($ in X))return;let z=typeof $==="string"?X[$]:$;if(Y||J)if(Y)z=wW(z,[{from:f.Number(),to:(B)=>f.Numeric(B),untilObjectFound:!0},{from:f.Boolean(),to:(B)=>f.BooleanString(B),untilObjectFound:!0},...Array.isArray(J)?J:[J]]);else z=wW(z,[...Array.isArray(J)?J:[J]]);if(z.type==="object"&&"additionalProperties"in z===!1)z.additionalProperties=W;let w=(B)=>n.Clean(z,B);if(Z){let B={schema:z,references:"",checkFunc:()=>{},code:"",Check:(H)=>n.Check(z,H),Errors:(H)=>n.Errors(z,H),Code:()=>"",Clean:w,Decode:(H)=>n.Decode(z,H),Encode:(H)=>n.Encode(z,H)};if(Q&&z.additionalProperties===!1)B.Clean=w;if(z.config){if(B.config=z.config,B?.schema?.config)delete B.schema.config}return B.parse=(H)=>{try{return B.Decode(H)}catch(O){throw[...B.Errors(H)].map(J2)}},B.safeParse=(H)=>{try{return{success:!0,data:B.Decode(H),error:null}}catch(O){let M=[...G.Errors(H)].map(J2);return{success:!1,data:null,error:M[0]?.summary,errors:M}}},B}let G=S2.Compile(z,Object.values(X));if(G.Clean=w,z.config){if(G.config=z.config,G?.schema?.config)delete G.schema.config}return G.parse=(B)=>{try{return G.Decode(B)}catch(H){throw[...G.Errors(B)].map(J2)}},G.safeParse=(B)=>{try{return{success:!0,data:G.Decode(B),error:null}}catch(H){let O=[...G.Errors(B)].map(J2);return{success:!1,data:null,error:O[0]?.summary,errors:O}}},G},qW=($,{models:X={},dynamic:Z=!1,normalize:Q=!1,additionalProperties:W=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in X))return;let Y=typeof $==="string"?X[$]:$,J=(w,G)=>{let B=(O)=>{if(!O||typeof O!=="object")return n.Clean(w,O);if(Array.isArray(O))O=n.Clean(w,O);else O=n.Clean(w,O);return O};if(Z)return{schema:w,references:"",checkFunc:()=>{},code:"",Check:(O)=>n.Check(w,O),Errors:(O)=>n.Errors(w,O),Code:()=>"",Decode:(O)=>n.Decode(w,O),Encode:(O)=>n.Encode(w,O)};let H=S2.Compile(w,G);if(Q&&w.additionalProperties===!1)H.Clean=B;return H};if(N in Y){if("additionalProperties"in Y===!1)Y.additionalProperties=W;return{200:J(Y,Object.values(X))}}let z={};return Object.keys(Y).forEach((w)=>{let G=Y[+w];if(typeof G==="string"){if(G in X){let B=X[G];B.type==="object"&&"additionalProperties"in B,z[+w]=N in B?J(B,Object.values(X)):B}return}if(G.type==="object"&&"additionalProperties"in G===!1)G.additionalProperties=W;z[+w]=N in G?J(G,Object.values(X)):G}),z},cw=typeof Bun!=="undefined",iw=cw&&typeof Bun.hash==="function",M8=($)=>{if(iw)return Bun.hash($);let X=9;for(let Z=0;Z<$.length;)X=Math.imul(X^$.charCodeAt(Z++),387420489);return X=X^X>>>9},LX,n2=()=>{if(!LX)LX=[{from:f.Object({}),to:()=>f.ObjectString({}),excludeRoot:!0},{from:f.Array(f.Any()),to:()=>f.ArrayString(f.Any())}];return LX},PX,UW=()=>{if(!PX)PX=[{from:f.Number(),to:($)=>f.Numeric($),rootOnly:!0},{from:f.Boolean(),to:($)=>f.BooleanString($),rootOnly:!0}];return PX},mW=({validator:$,defaultConfig:X={},config:Z,dynamic:Q,models:W})=>{let Y=q1($,{dynamic:Q,models:W,additionalProperties:!0,coerce:!0,additionalCoerce:n2()});if(n1(X))if(Y)Y.config=pw(Y.config,Z);else Y=q1(f.Cookie({}),{dynamic:Q,models:W,additionalProperties:!0}),Y.config=X;return Y},i1=($,X)=>{if(!X)return;if(!Array.isArray(X)){let Q=X;if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local";return Q}let Z=[...X];for(let Q of Z){if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local"}return Z},GW=($,X,Z)=>{return{start:p0($.start,i1(Z,X?.start)),request:p0($.request,i1(Z,X?.request)),parse:p0($.parse,i1(Z,X?.parse)),transform:p0($.transform,i1(Z,X?.transform)),beforeHandle:p0($.beforeHandle,i1(Z,X?.beforeHandle)),afterHandle:p0($.afterHandle,i1(Z,X?.afterHandle)),mapResponse:p0($.mapResponse,i1(Z,X?.mapResponse)),afterResponse:p0($.afterResponse,i1(Z,X?.afterResponse)),trace:p0($.trace,i1(Z,X?.trace)),error:p0($.error,i1(Z,X?.error)),stop:p0($.stop,i1(Z,X?.stop))}},lw=($,X,{skipIfHasType:Z=!1}={})=>{if(!$)return $;if(!Array.isArray($)){if(Z)$.scope??=X;else $.scope=X;return $}for(let Q of $)if(Z)Q.scope??=X;else Q.scope=X;return $},I2=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let X=[];for(let Z of $)switch(Z.scope){case"global":case"scoped":X.push({...Z});break}return X},AW=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:I2($?.parse),transform:I2($?.transform),beforeHandle:I2($?.beforeHandle),afterHandle:I2($?.afterHandle),mapResponse:I2($?.mapResponse),afterResponse:I2($?.afterResponse),error:I2($?.error),trace:I2($?.trace)}},U8={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},HW=Object.fromEntries(Object.entries(U8).map(([$,X])=>[X,$]));function nw($){let X=$;while(X.endsWith("="))X=X.slice(0,-1);return X}var NW=new TextEncoder,m8=async($,X)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(X===null)throw new TypeError("Secret key must be provided.");let Z=await crypto.subtle.importKey("raw",NW.encode(X),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Q=await crypto.subtle.sign("HMAC",Z,NW.encode($));return $+"."+nw(Buffer.from(Q).toString("base64"))},DW=async($,X)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(X===null)throw new TypeError("Secret key must be provided.");let Z=$.slice(0,$.lastIndexOf("."));return await m8(Z,X)===$?Z:!1},ow=($,X)=>{if(!$||typeof $!=="object"||!X)return;for(let[Z,Q]of Object.entries(X)){if(Z in uw||!(Z in $))continue;let W=$[Z];if(typeof W==="function")W(Q),delete X[Z]}},tw=({globalHook:$,localHook:X})=>(Z)=>(Q,W)=>{if(typeof Q==="function")Q={fn:Q};if("fn"in Q||Array.isArray(Q)){if(!X[Z])X[Z]=[];if(typeof X[Z]==="function")X[Z]=[X[Z]];if(Array.isArray(Q))X[Z]=X[Z].concat(Q);else X[Z].push(Q);return}let{insert:Y="after",stack:J="local"}=Q;if(typeof W==="function")W={fn:W};if(J==="global")if(!Array.isArray(W))if(Y==="before")$[Z].unshift(W);else $[Z].push(W);else if(Y==="before")$[Z]=W.concat($[Z]);else $[Z]=$[Z].concat(W);else{if(!X[Z])X[Z]=[];if(typeof X[Z]==="function")X[Z]=[X[Z]];if(!Array.isArray(W))if(Y==="before")X[Z].unshift(W);else X[Z].push(W);else if(Y==="before")X[Z]=W.concat(X[Z]);else X[Z]=X[Z].concat(W)}},sw=($)=>{if(typeof $==="number")return $;if($.length<16){if($.trim().length===0)return null;let X=Number($);if(Number.isNaN(X))return null;return X}if($.length===16){if($.trim().length===0)return null;let X=Number($);if(Number.isNaN(X)||X.toString()!==$)return null;return X}return null},jX=($)=>sw($)!==null,rw=class{constructor($=console.error){this.onError=$,this.root=null,this.promises=[]}get size(){return this.promises.length}add($){return this.promises.push($),this.root||=this.drain(),$}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,X){return(this.root??Promise.resolve()).then($,X)}},g1=($)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $==="function")return{fn:$};else if("fn"in $)return $}let X=[];for(let Z of $)if(typeof Z==="function")X.push({fn:Z});else if("fn"in Z)X.push(Z);return X},aw=($)=>{return{...$,start:g1($?.start),request:g1($?.request),parse:g1($?.parse),transform:g1($?.transform),beforeHandle:g1($?.beforeHandle),afterHandle:g1($?.afterHandle),mapResponse:g1($?.mapResponse),afterResponse:g1($?.afterResponse),trace:g1($?.trace),error:g1($?.error),stop:g1($?.stop)}},LW=($)=>{return{...$,start:$.start?.map((X)=>X.fn),request:$.request?.map((X)=>X.fn),parse:$.parse?.map((X)=>X.fn),transform:$.transform?.map((X)=>X.fn),beforeHandle:$.beforeHandle?.map((X)=>X.fn),afterHandle:$.afterHandle?.map((X)=>X.fn),afterResponse:$.afterResponse?.map((X)=>X.fn),mapResponse:$.mapResponse?.map((X)=>X.fn),trace:$.trace?.map((X)=>X.fn),error:$.error?.map((X)=>X.fn),stop:$.stop?.map((X)=>X.fn)}},OX=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server}),uW=($,X=302)=>Response.redirect($,X),NV=Symbol("ElysiaFormData"),i8=Symbol("ElysiaRequestId");var cW=()=>crypto.getRandomValues(new Uint32Array(1))[0],PW=($)=>{let X=[];for(let Z=0;Z<$.length;Z++){let Q=$[Z];if(Q.checksum){if(X.includes(Q.checksum))$.splice(Z,1),Z--;X.push(Q.checksum)}}return $},e0=($,X="scoped")=>{if(X==="scoped"){for(let Z of $)if("scope"in Z&&Z.scope==="local")Z.scope="scoped";return}for(let Z of $)if("scope"in Z)Z.scope="global"},OW=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,u8=Symbol("ElysiaErrorCode"),c8=(OW?.NODE_ENV??OW?.ENV)==="production",B2=class{constructor($,X){let Z=X??($ in HW?HW[$]:$);this.code=U8[$]??$,this.response=Z}},ew=($,X)=>new B2($,X),$q=class extends Error{constructor($){super($??"INTERNAL_SERVER_ERROR");this.code="INTERNAL_SERVER_ERROR",this.status=500}},RX=class extends Error{constructor($){super($??"NOT_FOUND");this.code="NOT_FOUND",this.status=404}},Xq=class extends Error{constructor(){super("Failed to parse body");this.code="PARSE",this.status=400}},_W=class extends Error{constructor($,X){super(X??`"${$}" has invalid cookie signature`);this.key=$,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}},J2=($)=>{if(!$)return{summary:void 0};let{message:X,path:Z,value:Q,type:W}=$,Y=Z.slice(1).replaceAll("/","."),J=Z==="";switch(W){case 42:return{...$,summary:J?"Value should not be provided":`Property '${Y}' should not be provided`};case 45:return{...$,summary:J?"Value is missing":`Property '${Y}' is missing`};case 50:let z=X.indexOf("'"),w=X.slice(z+1,X.indexOf("'",z+1));return{...$,summary:J?"Value should be an email":`Property '${Y}' should be ${w}`};case 54:return{...$,summary:`${X.slice(0,9)} property '${Y}' to be ${X.slice(8)} but found: ${Q}`};case 62:let G=$.schema.anyOf.map((B)=>`'${B?.format??B.type}'`).join(", ");return{...$,summary:J?`Value should be one of ${G}`:`Property '${Y}' should be one of: ${G}`};default:return{summary:X,...$}}},L0=class $ extends Error{constructor(X,Z,Q){if(Q&&typeof Q==="object"&&Q instanceof B2)Q=Q.response;let W=c8?void 0:("Errors"in Z)?Z.Errors(Q).First():n.Errors(Z,Q).First(),Y=W?.schema.error!==void 0?typeof W.schema.error==="function"?W.schema.error({type:X,validator:Z,value:Q,get errors(){return[...Z.Errors(Q)].map(J2)}}):W.schema.error:void 0,J=W?.path||"root",z="";if(Y!==void 0)z=typeof Y==="object"?JSON.stringify(Y):Y+"";else if(c8)z=JSON.stringify({type:"validation",on:X,summary:J2(W).summary,message:W?.message,found:Q});else{let w=Z?.schema??Z,G="Errors"in Z?[...Z.Errors(Q)].map(J2):[...n.Errors(Z,Q)].map(J2),B;try{B=n.Create(w)}catch(H){B={type:"Could not create expected value",message:H?.message,error:H}}z=JSON.stringify({type:"validation",on:X,summary:G[0]?.summary,property:J,message:W?.message,expected:B,found:Q,errors:G},null,2)}super(z);this.type=X,this.validator=Z,this.value=Q,this.code="VALIDATION",this.status=422,Object.setPrototypeOf(this,$.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(J2):[...n.Errors(this.validator,this.value)].map(J2)}static simplifyModel(X){let Z="schema"in X?X.schema:X;try{return n.Create(Z)}catch{return Z}}get model(){return $.simplifyModel(this.validator)}toResponse(X){return new Response(this.message,{status:400,headers:{...X,"content-type":"application/json"}})}},FW={open($){$.data.open?.($)},message($,X){$.data.message?.($,X)},drain($){$.data.drain?.($)},close($,X,Z){$.data.close?.($,X,Z)}},h8=class{constructor($,X){if(this.raw=$,this.data=X,this.validator=$.data.validator,$.data.id)this.id=$.data.id;else this.id=cW().toString()}get id(){return this.raw.data.id}set id($){this.raw.data.id=$}get publish(){return($,X=void 0,Z)=>{if(this.validator?.Check(X)===!1)throw new L0("message",this.validator,X);if(typeof X==="object")X=JSON.stringify(X);return this.raw.publish($,X,Z),this}}get send(){return($)=>{if(this.validator?.Check($)===!1)throw new L0("message",this.validator,$);if(Buffer.isBuffer($))return this.raw.send($),this;if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}}get subscribe(){return($)=>{return this.raw.subscribe($),this}}get unsubscribe(){return($)=>{return this.raw.unsubscribe($),this}}get cork(){return($)=>{return this.raw.cork($),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}},SW="1.1.24",G$=/\+/g;function iW($){let X={};if(typeof $!=="string")return X;let Z="",Q="",W=-1,Y=-1,J=0,z=$.length;for(let w=0;w<z;w++)switch($.charCodeAt(w)){case 38:let G=Y>W;if(!G)Y=w;if(Z=$.slice(W+1,Y),G||Z.length>0){if(J&1)Z=Z.replace(G$," ");if(J&2)Z=r2.default(Z)||Z;if(!X[Z]){if(G){if(Q=$.slice(Y+1,w),J&4)Q=Q.replace(G$," ");if(J&8)Q=r2.default(Q)||Q}X[Z]=Q}}Z="",Q="",W=w,Y=w,J=0;break;case 61:if(Y<=W)Y=w;else J|=8;break;case 43:if(Y>W)J|=4;else J|=1;break;case 37:if(Y>W)J|=8;else J|=2;break}if(W<z){let w=Y>W;if(Z=$.slice(W+1,w?Y:z),w||Z.length>0){if(J&1)Z=Z.replace(G$," ");if(J&2)Z=r2.default(Z)||Z;if(!X[Z]){if(w){if(Q=$.slice(Y+1,z),J&4)Q=Q.replace(G$," ");if(J&8)Q=r2.default(Q)||Q}X[Z]=Q}}}return X}var CX=($)=>{let X={};if(typeof $!=="string")return X;let Z=$.length,Q="",W="",Y=-1,J=-1,z=!1,w=!1,G=!1,B=!1,H=!1,O=0;for(let M=0;M<Z+1;M++){if(M!==Z)O=$.charCodeAt(M);else O=38;switch(O){case 38:{if(H=J>Y,!H)J=M;if(Q=$.slice(Y+1,J),H||Q.length>0){if(G)Q=Q.replace(G$," ");if(z)Q=r2.default(Q)||Q;if(H){if(W=$.slice(J+1,M),B)W=W.replace(G$," ");if(w)W=r2.default(W)||W}let F=X[Q];if(F===void 0)X[Q]=W;else if(F.pop)F.push(W);else X[Q]=[F,W]}W="",Y=M,J=M,z=!1,w=!1,G=!1,B=!1;break}case 61:if(J<=Y)J=M;else w=!0;break;case 43:if(J>Y)B=!0;else G=!0;break;case 37:if(J>Y)w=!0;else z=!0;break}}return X},VX=Symbol("ElysiaTrace"),K2=()=>{let{promise:$,resolve:X}=Promise.withResolvers(),{promise:Z,resolve:Q}=Promise.withResolvers(),{promise:W,resolve:Y}=Promise.withResolvers(),J=[],z=[];return[(w)=>{if(w)J.push(w);return $},(w)=>{let G=[],B=[],H=null;for(let M=0;M<(w.total??0);M++){let{promise:F,resolve:K}=Promise.withResolvers(),{promise:_,resolve:b}=Promise.withResolvers(),{promise:I,resolve:S}=Promise.withResolvers(),c=[],d=[];G.push((i)=>{if(i)c.push(i);return F}),B.push((i)=>{let t={...i,end:_,error:I,index:M,onStop(J0){if(J0)d.push(J0);return _}};K(t);for(let J0=0;J0<c.length;J0++)c[J0](t);return(J0=null)=>{let v=performance.now();if(J0)H=J0;let g={end:v,error:J0,get elapsed(){return v-i.begin}};for(let $0=0;$0<d.length;$0++)d[$0](g);b(v),S(J0)}})}let O={...w,end:Z,error:W,onEvent(M){for(let F=0;F<G.length;F++)G[F](M)},onStop(M){if(M)z.push(M);return Z}};X(O);for(let M=0;M<J.length;M++)J[M](O);return{resolveChild:B,resolve(M=null){let F=performance.now();if(!M&&H)M=H;let K={end:F,error:M,get elapsed(){return F-w.begin}};for(let _=0;_<z.length;_++)z[_](K);Q(F),Y(M)}}}]},Zq=($)=>{return(X)=>{let[Z,Q]=K2(),[W,Y]=K2(),[J,z]=K2(),[w,G]=K2(),[B,H]=K2(),[O,M]=K2(),[F,K]=K2(),[_,b]=K2(),[I,S]=K2();return $({id:X[i8],context:X,set:X.set,onRequest:Z,onParse:W,onTransform:J,onBeforeHandle:w,onHandle:B,onAfterHandle:O,onMapResponse:_,onAfterResponse:I,onError:F}),{request:Q,parse:Y,transform:z,beforeHandle:G,handle:H,afterHandle:M,error:K,mapResponse:b,afterResponse:S}}},Qq=new Headers().toJSON,nW={optional:Symbol.for("TypeBox.Optional"),kind:Symbol.for("TypeBox.Kind")},j1=($)=>{if(!$)return!1;let X=$?.schema;return!!X&&nW.optional in X},l1=($)=>{if(!$)return!1;let X=$?.schema??$;if(X.anyOf)return X.anyOf.some(l1);if(X.someOf)return X.someOf.some(l1);if(X.allOf)return X.allOf.some(l1);if(X.not)return X.not.some(l1);if(X.type==="object"){let Z=X.properties;if("additionalProperties"in X)return X.additionalProperties;if("patternProperties"in X)return!1;for(let Q of Object.keys(Z)){let W=Z[Q];if(W.type==="object"){if(l1(W))return!0}else if(W.anyOf){for(let Y=0;Y<W.anyOf.length;Y++)if(l1(W.anyOf[Y]))return!0}return W.additionalProperties}return!1}return!1},EX=({context:$="c",trace:X,addFn:Z})=>{if(!X.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let Q=0;Q<X.length;Q++)Z(`let report${Q}, reportChild${Q}, reportErr${Q}, reportErrChild${Q}; let trace${Q} = ${$}[ELYSIA_TRACE]?.[${Q}] ?? trace[${Q}](${$});
`);return(Q,{name:W,total:Y=0}={})=>{if(!W)W="anonymous";let J=Q==="error"?"reportErr":"report";for(let z=0;z<X.length;z++)Z(`
${J}${z} = trace${z}.${Q}({id,event: '${Q}',name: '${W}',begin: performance.now(),total: ${Y}})
`);return{resolve(){for(let z=0;z<X.length;z++)Z(`
${J}${z}.resolve()
`)},resolveChild(z){for(let w=0;w<X.length;w++)Z(`${J}Child${w} = ${J}${w}.resolveChild?.shift()?.({id,event: '${Q}',name: '${z}',begin: performance.now()})
`);return(w)=>{for(let G=0;G<X.length;G++)if(w)Z(`
                             	if (${w} instanceof Error)
                    				${J}Child${G}?.(${w})
                           		else
                             		${J}Child${G}?.()
`);else Z(`${J}Child${G}?.()
`)}}}}},Wq=({injectResponse:$="",normalize:X=!1,validator:Z})=>({composeValidation:(Q,W=`c.${Q}`)=>`c.set.status = 422; throw new ValidationError('${Q}', validator.${Q}, ${W})`,composeResponseValidation:(Q="r")=>{let W="\n"+$+"\n";W+=`if(${Q} instanceof ElysiaCustomStatusResponse) {
			c.set.status = ${Q}.code
			${Q} = ${Q}.response
		}

		const isResponse = ${Q} instanceof Response

`,W+=`switch(c.set.status) {
`;for(let[Y,J]of Object.entries(Z.response)){if(W+=`	case ${Y}:
				if (!isResponse) {
`,X&&"Clean"in J&&!l1(J))W+=`${Q} = validator.response['${Y}'].Clean(${Q})
`;W+=`if(validator.response['${Y}'].Check(${Q}) === false) {
					c.set.status = 422

					throw new ValidationError('response', validator.response['${Y}'], ${Q})
				}

				c.set.status = ${Y}
			}

			break

`}return W+="\n}\n",W}}),PV=Symbol.for("TypeBox.Kind"),o2=($,X)=>{if(!X)return;if(X.type==="object"){let Z=X.properties;if(!Z)return!1;for(let Q of Object.keys(Z)){let W=Z[Q];if($ in W)return!0;if(W.type==="object"){if(o2($,W))return!0}else if(W.anyOf){for(let Y=0;Y<W.anyOf.length;Y++)if(o2($,W.anyOf[Y]))return!0}}return!1}return $ in X},_X=Symbol.for("TypeBox.Transform"),t2=($)=>{if(!$)return;if($.type==="object"&&$.properties){let X=$.properties;for(let Z of Object.keys(X)){let Q=X[Z];if(Q.type==="object"){if(t2(Q))return!0}else if(Q.anyOf){for(let Y=0;Y<Q.anyOf.length;Y++)if(t2(Q.anyOf[Y]))return!0}if(_X in Q)return!0}return!1}return _X in $||$.properties&&_X in $.properties},Yq=/(?:return|=>) \S+\(/g,s2=($)=>{return($?.fn??$).constructor.name==="AsyncFunction"},h0=($)=>{let X=$?.fn??$;if(X.constructor.name==="AsyncFunction")return!0;let Z=X.toString();if(Z.includes("=> response.clone("))return!1;if(Z.includes("await"))return!0;if(Z.includes("async"))return!0;return!!Z.match(Yq)},p8=($)=>{let X=$?.fn??$;return X.constructor.name==="AsyncGeneratorFunction"||X.constructor.name==="GeneratorFunction"},Jq=({app:$,path:X,method:Z,localHook:Q,hooks:W,validator:Y,handler:J,allowMeta:z=!1,inference:w})=>{let G=typeof J==="function";if(!G){if(J=E0(J,{headers:$.setHeaders??{}}),W.parse.length===0&&W.transform.length===0&&W.beforeHandle.length===0&&W.afterHandle.length===0)return Function("a","return function () { return a.clone() }")(J)}let B=G?"handler(c)":"handler",H=W.afterResponse.length>0,O=W.trace.length>0,M="";if(w=VW(Object.assign(Q,{handler:J}),w),w.server)M+=`
Object.defineProperty(c, 'server', {
			get: function() { return getServer() }
		})
`;if(w.body)M+=`let isParsing = false
`;Y.createBody?.(),Y.createQuery?.(),Y.createHeaders?.(),Y.createParams?.(),Y.createCookie?.(),Y.createResponse?.();let F=w.query||!!Y.query,K=Z!=="$INTERNALWS"&&Z!=="GET"&&Z!=="HEAD"&&(w.body||!!Y.body||W.parse.length),_=$.setHeaders,b=_&&!!Object.keys(_).length,I=w.headers||Y.headers,S=w.cookie||!!Y.cookie,c=S?mW({validator:Y.cookie,defaultConfig:$.config.cookie,dynamic:!!$.config.aot,config:Y.cookie?.config??{},models:$.definitions.type}):void 0,d=c?.config,i="";if(d?.sign){if(!d.secrets)throw new Error(`t.Cookie required secret which is not set in (${Z}) ${X}.`);let j=!d.secrets?void 0:typeof d.secrets==="string"?d.secrets:d.secrets[0];if(i+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,d.sign===!0)i+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${j}')
			}`;else for(let P of d.sign)i+=`if(_setCookie['${P}']?.value) { c.set.cookie['${P}'].value = await signCookie(_setCookie['${P}'].value, '${j}') }
`;i+="}\n"}let t=$.config.normalize,{composeValidation:J0,composeResponseValidation:v}=Wq({normalize:t,validator:Y});if(I)M+=Qq?`c.headers = c.request.headers.toJSON()
`:`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(S){let j=(V,T)=>{let h=d?.[V]??T;if(!h)return typeof T==="string"?`${V}: "${T}",`:`${V}: ${T},`;if(typeof h==="string")return`${V}: '${h}',`;if(h instanceof Date)return`${V}: new Date(${h.getTime()}),`;return`${V}: ${h},`},P=d?`{
			secrets: ${d.secrets!==void 0?typeof d.secrets==="string"?`'${d.secrets}'`:"["+d.secrets.reduce((V,T)=>V+`'${T}',`,"")+"]":"undefined"},
			sign: ${d.sign===!0?!0:d.sign!==void 0?"["+d.sign.reduce((V,T)=>V+`'${T}',`,"")+"]":"undefined"},
			${j("domain")}
			${j("expires")}
			${j("httpOnly")}
			${j("maxAge")}
			${j("path","/")}
			${j("priority")}
			${j("sameSite")}
			${j("secure")}
		}`:"undefined";if(I)M+=`
c.cookie = await parseCookie(c.set, c.headers.cookie, ${P})
`;else M+=`
c.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${P})
`}if(F){let j=[];if(Y.query&&Y.query.schema.type==="object"){let P=Y.query.schema.properties;if(!l1(Y.query))for(let[V,T]of Object.entries(P)){let h=T;if(h&&nW.optional in h&&h.type==="array"&&h.items)h=h.items;let{type:i0,anyOf:r}=h,y1=i0==="array"||r?.some((d0)=>d0.type==="string"&&d0.format==="ArrayString");j.push({key:V,isArray:y1,isNestedObjectArray:y1&&h.items?.type==="object"||!!h.items?.anyOf?.some((d0)=>d0.type==="object"||d0.type==="array"),isObject:i0==="object"||r?.some((d0)=>d0.type==="string"&&d0.format==="ArrayString"),anyOf:!!r})}}if(!j.length)M+=`if(c.qi === -1) {
				c.query = {}
			} else {
				c.query = parseQueryFromURL(c.url.slice(c.qi + 1))
			}`;else M+=`if(c.qi !== -1) {
				let url = '&' + c.url.slice(c.qi + 1)

				${j.map(({key:P,isArray:V,isObject:T,isNestedObjectArray:h,anyOf:i0},r)=>{let y1=`${r===0?"let":""} memory = url.indexOf('&${P}=')
							let a${r}
`;if(V)return y1+(h?`while (memory !== -1) {
											const start = memory + ${P.length+2}
											memory = url.indexOf('&', start)

											if(a${r} === undefined)
												a${r} = ''
											else
												a${r} += ','

											let temp

											if(memory === -1) temp = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
											else temp = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											const charCode = temp.charCodeAt(0)
											if(charCode !== 91 && charCode !== 123)
												temp = '"' + temp + '"'

											a${r} += temp

											if(memory === -1) break

											memory = url.indexOf('&${P}=', memory)
											if(memory === -1) break
										}

										try {
										    if(a${r}.charCodeAt(0) === 91)
												a${r} = JSON.parse(a${r})
											else
												a${r} = JSON.parse('[' + a${r} + ']')
										} catch {}
`:`while (memory !== -1) {
											const start = memory + ${P.length+2}
											memory = url.indexOf('&', start)

											if(a${r} === undefined)
												a${r} = []

											if(memory === -1) {
												a${r}.push(decodeURIComponent(url.slice(start)).replace(/\\+/g, ' '))
												break
											}
											else a${r}.push(decodeURIComponent(url.slice(start, memory)).replace(/\\+/g, ' '))

											memory = url.indexOf('&${P}=', memory)
											if(memory === -1) break
										}
`);if(T)return y1+`if (memory !== -1) {
										const start = memory + ${P.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${r} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else a${r} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

										if (a${r} !== undefined) {
											try {
												a${r} = JSON.parse(a${r})
											} catch {}
										}
									}`;return y1+`if (memory !== -1) {
										const start = memory + ${P.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${r} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else {
											a${r} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											${i0?`
											let deepMemory = url.indexOf('&${P}=', memory)

											if(deepMemory !== -1) {
												a${r} = [a${r}]
												let first = true

												while(true) {
													const start = deepMemory + ${P.length+2}
													if(first)
														first = false
													else
														deepMemory = url.indexOf('&', start)

													let value
													if(deepMemory === -1) value = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
													else value = decodeURIComponent(url.slice(start, deepMemory).replace(/\\+/g, ' '))

													const vStart = value.charCodeAt(0)
													const vEnd = value.charCodeAt(value.length - 1)

													if((vStart === 91 && vEnd === 93) || (vStart === 123 && vEnd === 125))
														try {
															a${r}.push(JSON.parse(value))
														} catch {
														 	a${r}.push(value)
														}

													if(deepMemory === -1) break
												}
											}
												`:""}
										}
									}`}).join("\n")}

				c.query = {
					${j.map(({key:P},V)=>`'${P}': a${V}`).join(", ")}
				}
			} else {
				c.query = {}
			}`}if(O)M+="\nconst id = c[ELYSIA_REQUEST_ID]\n";let g=EX({trace:W.trace,addFn:(j)=>{M+=j}});M+="\ntry {\n";let $0=typeof J==="function"&&h0(J),T0=O||W.afterResponse.length>0?"c.response = ":"",f1=S||K||$0||W.parse.length>0||W.afterHandle.some(h0)||W.beforeHandle.some(h0)||W.transform.some(h0)||W.mapResponse.some(h0),l8=(typeof J==="function"?p8(J):!1)||W.beforeHandle.some(p8)||W.afterHandle.some(p8)||W.transform.some(p8),e2=w.cookie||w.set||I||O||Y.response||G&&b||l8,Q1=", c.request";M+=`c.route = \`${X}\`
`;let n8=g("parse",{total:W.parse.length});if(K){let j=W.parse.length||w.body||Y.body;if(M+="isParsing = true\n",W.type&&!W.parse.length)switch(W.type){case"json":case"application/json":if(j1(Y.body))M+="try { c.body = await c.request.json() } catch {}";else M+="c.body = await c.request.json()";break;case"text":case"text/plain":M+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":M+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":M+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":if(M+=`c.body = {}
`,j1(Y.body))M+="let form; try { form = await c.request.formData() } catch {}";else M+="const form = await c.request.formData()";M+=`
if(form)
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						} else form = {}
`;break}else if(j){if(M+="\n",M+=I?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",M+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)

					c.contentType = contentType
`,W.parse.length){M+=`let used = false
`;let P=g("parse",{total:W.parse.length});for(let V=0;V<W.parse.length;V++){let T=P.resolveChild(W.parse[V].fn.name),h=`bo${V}`;if(V!==0)M+=`if(!used) {
`;if(M+=`let ${h} = parse[${V}](c, contentType)
`,M+=`if(${h} instanceof Promise) ${h} = await ${h}
`,M+=`if(${h} !== undefined) { c.body = ${h}; used = true }
`,T(),V!==0)M+="}"}P.resolve()}if(M+="\ndelete c.contentType\n",W.parse.length)M+="if (!used) {";if(W.type&&!Array.isArray(W.type))switch(W.type){case"json":case"application/json":if(j1(Y.body))M+="try { c.body = await c.request.json() } catch {}";else M+="c.body = await c.request.json()";break;case"text":case"text/plain":M+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":M+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":M+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":M+=`c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}
`;break}else M+=`
					switch (contentType) {
						case 'application/json':
							${j1(Y.body)?"try { c.body = await c.request.json() } catch {}":"c.body = await c.request.json()"}
							break

						case 'text/plain':
							c.body = await c.request.text()
							break

						case 'application/x-www-form-urlencoded':
							c.body = parseQuery(await c.request.text())
							break

						case 'application/octet-stream':
							c.body = await c.request.arrayBuffer();
							break

						case 'multipart/form-data':
							c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}

							break
					}`;if(W.parse.length)M+="}";M+="}\n"}M+="\nisParsing = false\n"}if(n8.resolve(),W?.transform){let j=g("transform",{total:W.transform.length});if(W.transform.length)M+="\nlet transformed\n";for(let P=0;P<W.transform.length;P++){let V=W.transform[P],T=j.resolveChild(V.fn.name);if(M+=h0(V)?`transformed = await transform[${P}](c)
`:`transformed = transform[${P}](c)
`,V.subType==="mapDerive")M+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else {
					transformed.request = c.request
					transformed.store = c.store
					transformed.qi = c.qi
					transformed.path = c.path
					transformed.url = c.url
					transformed.redirect = c.redirect
					transformed.set = c.set
					transformed.error = c.error

					c = transformed
			}`;else M+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else
					Object.assign(c, transformed)
`;T()}j.resolve()}if(Y){if(M+="\n",Y.headers){if(t&&"Clean"in Y.headers&&!l1(Y.headers))M+="c.headers = validator.headers.Clean(c.headers);\n";if(o2("default",Y.headers.schema))for(let[j,P]of Object.entries(n.Default(Y.headers.schema,{}))){let V=typeof P==="object"?JSON.stringify(P):typeof P==="string"?`'${P}'`:P;if(V!==void 0)M+=`c.headers['${j}'] ??= ${V}
`}if(j1(Y.headers))M+="if(isNotEmpty(c.headers)) {";if(M+=`if(validator.headers.Check(c.headers) === false) {
				${J0("headers")}
			}`,t2(Y.headers.schema))M+=`c.headers = validator.headers.Decode(c.headers)
`;if(j1(Y.headers))M+="}"}if(Y.params){if(o2("default",Y.params.schema))for(let[j,P]of Object.entries(n.Default(Y.params.schema,{}))){let V=typeof P==="object"?JSON.stringify(P):typeof P==="string"?`'${P}'`:P;if(V!==void 0)M+=`c.params['${j}'] ??= ${V}
`}if(M+=`if(validator.params.Check(c.params) === false) {
				${J0("params")}
			}`,t2(Y.params.schema))M+=`
c.params = validator.params.Decode(c.params)
`}if(Y.query){if(t&&"Clean"in Y.query&&!l1(Y.query))M+="c.query = validator.query.Clean(c.query);\n";if(o2("default",Y.query.schema))for(let[j,P]of Object.entries(n.Default(Y.query.schema,{}))){let V=typeof P==="object"?JSON.stringify(P):typeof P==="string"?`'${P}'`:P;if(V!==void 0)M+=`if(c.query['${j}'] === undefined) c.query['${j}'] = ${V}
`}if(j1(Y.query))M+="if(isNotEmpty(c.query)) {";if(M+=`if(validator.query.Check(c.query) === false) {
          		${J0("query")}
			}`,t2(Y.query.schema))M+=`
c.query = validator.query.Decode(Object.assign({}, c.query))
`;if(j1(Y.query))M+="}"}if(Y.body){if(t&&"Clean"in Y.body&&!l1(Y.body))M+="c.body = validator.body.Clean(c.body);\n";let j=t2(Y.body.schema);if(j||j1(Y.body))M+=`
const isNotEmptyObject = c.body && (typeof c.body === "object" && isNotEmpty(c.body))
`;if(o2("default",Y.body.schema)){let P=n.Default(Y.body.schema,Y.body.schema.type==="object"?{}:void 0),V=typeof P==="object"?JSON.stringify(P):typeof P==="string"?`'${P}'`:P;if(M+=`if(validator.body.Check(c.body) === false) {
					if (typeof c.body === 'object') {
						c.body = Object.assign(${V}, c.body)
					} else { c.body = ${V} }`,j1(Y.body))M+=`
					    if(isNotEmptyObject && validator.body.Check(c.body) === false) {
            				${J0("body")}
             			}
                    }`;else M+=`
    				if(validator.body.Check(c.body) === false) {
        				${J0("body")}
         			}
                }`}else if(j1(Y.body))M+=`if(isNotEmptyObject && validator.body.Check(c.body) === false) {
         			${J0("body")}
          		}`;else M+=`if(validator.body.Check(c.body) === false) {
         			${J0("body")}
          		}`;if(j)M+=`
if(isNotEmptyObject) c.body = validator.body.Decode(c.body)
`}if(n1(c?.schema?.properties??c?.schema?.schema??{})){if(M+=`const cookieValue = {}
    			for(const [key, value] of Object.entries(c.cookie))
    				cookieValue[key] = value.value
`,o2("default",c.schema))for(let[j,P]of Object.entries(n.Default(c.schema,{})))M+=`cookieValue['${j}'] = ${typeof P==="object"?JSON.stringify(P):P}
`;if(j1(Y.cookie))M+="if(isNotEmpty(c.cookie)) {";if(M+=`if(validator.cookie.Check(cookieValue) === false) {
				${J0("cookie","cookieValue")}
			}`,t2(Y.cookie.schema))M+=`
for(const [key, value] of Object.entries(validator.cookie.Decode(cookieValue)))
					c.cookie[key].value = value
`;if(j1(Y.cookie))M+="}"}}if(W?.beforeHandle){let j=g("beforeHandle",{total:W.beforeHandle.length}),P=!1;for(let V=0;V<W.beforeHandle.length;V++){let T=W.beforeHandle[V],h=j.resolveChild(T.fn.name),i0=B8(T);if(T.subType==="resolve"||T.subType==="mapResolve"){if(!P)P=!0,M+="\nlet resolved\n";if(M+=h0(T)?`resolved = await beforeHandle[${V}](c);
`:`resolved = beforeHandle[${V}](c);
`,T.subType==="mapResolve")M+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else {
						resolved.request = c.request
						resolved.store = c.store
						resolved.qi = c.qi
						resolved.path = c.path
						resolved.url = c.url
						resolved.redirect = c.redirect
						resolved.set = c.set
						resolved.error = c.error

						c = resolved
					}`;else M+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else
						Object.assign(c, resolved)
`}else if(!i0)M+=h0(T)?`await beforeHandle[${V}](c);
`:`beforeHandle[${V}](c);
`,h();else{if(M+=h0(T)?`be = await beforeHandle[${V}](c);
`:`be = beforeHandle[${V}](c);
`,h("be"),M+=`if(be !== undefined) {
`,j.resolve(),W.afterHandle?.length){g("handle",{name:G?J.name:void 0}).resolve();let d0=g("afterHandle",{total:W.afterHandle.length});for(let C1=0;C1<W.afterHandle.length;C1++){let q=W.afterHandle[C1],E=B8(q),A=d0.resolveChild(q.fn.name);if(M+=`c.response = be
`,!E)M+=h0(q.fn)?`await afterHandle[${C1}](c, be)
`:`afterHandle[${C1}](c, be)
`;else M+=h0(q.fn)?`af = await afterHandle[${C1}](c)
`:`af = afterHandle[${C1}](c)
`,M+=`if(af !== undefined) { c.response = be = af }
`;A("af")}d0.resolve()}if(Y.response)M+=v("be");let y1=g("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+=`
c.response = be
`;for(let d0=0;d0<W.mapResponse.length;d0++){let C1=W.mapResponse[d0],q=y1.resolveChild(C1.fn.name);M+=`
if(mr === undefined) {
							mr = ${s2(C1)?"await":""} onMapResponse[${d0}](c)
							if(mr !== undefined) be = c.response = mr
						}
`,q()}}y1.resolve(),M+=i,M+=`return mapEarlyResponse(${T0} be, c.set ${Q1})}
`}}j.resolve()}if(W?.afterHandle.length){let j=g("handle",{name:G?J.name:void 0});if(W.afterHandle.length)M+=$0?`let r = c.response = await ${B};
`:`let r = c.response = ${B};
`;else M+=$0?`let r = await ${B};
`:`let r = ${B};
`;j.resolve();let P=g("afterHandle",{total:W.afterHandle.length});for(let T=0;T<W.afterHandle.length;T++){let h=W.afterHandle[T],i0=B8(h),r=P.resolveChild(h.fn.name);if(!i0)M+=h0(h.fn)?`await afterHandle[${T}](c)
`:`afterHandle[${T}](c)
`,r();else if(M+=h0(h.fn)?`af = await afterHandle[${T}](c)
`:`af = afterHandle[${T}](c)
`,r("af"),Y.response)M+="if(af !== undefined) {",P.resolve(),M+=v("af"),M+="c.response = af }";else M+="if(af !== undefined) {",P.resolve(),M+=`c.response = af}
`}if(P.resolve(),M+=`r = c.response
`,Y.response)M+=v();M+=i;let V=g("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length)for(let T=0;T<W.mapResponse.length;T++){let h=W.mapResponse[T],i0=V.resolveChild(h.fn.name);M+=`
mr = ${s2(h)?"await":""} onMapResponse[${T}](c)
				if(mr !== undefined) r = c.response = mr
`,i0()}if(V.resolve(),e2)M+=`return mapResponse(${T0} r, c.set ${Q1})
`;else M+=`return mapCompactResponse(${T0} r ${Q1})
`}else{let j=g("handle",{name:G?J.name:void 0});if(Y.response||W.mapResponse.length){if(M+=$0?`let r = await ${B};
`:`let r = ${B};
`,j.resolve(),Y.response)M+=v();g("afterHandle").resolve();let P=g("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = r\n";for(let V=0;V<W.mapResponse.length;V++){let T=W.mapResponse[V],h=P.resolveChild(T.fn.name);M+=`
if(mr === undefined) {
						mr = ${s2(T)?"await":""} onMapResponse[${V}](c)
    					if(mr !== undefined) r = c.response = mr
					}
`,h()}}if(P.resolve(),M+=i,J instanceof Response)M+=w.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${T0} ${B}.clone(), c.set ${Q1})
				else
					return ${B}.clone()`:`return ${B}.clone()`,M+="\n";else if(e2)M+=`return mapResponse(${T0} r, c.set ${Q1})
`;else M+=`return mapCompactResponse(${T0} r ${Q1})
`}else if(S||O){M+=$0?`let r = await ${B};
`:`let r = ${B};
`,j.resolve(),g("afterHandle").resolve();let P=g("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = r\n";for(let V=0;V<W.mapResponse.length;V++){let T=W.mapResponse[V],h=P.resolveChild(T.fn.name);M+=`
if(mr === undefined) {
							mr = ${s2(T)?"await":""} onMapResponse[${V}](c)
    						if(mr !== undefined) r = c.response = mr
						}
`,h()}}if(P.resolve(),M+=i,e2)M+=`return mapResponse(${T0} r, c.set ${Q1})
`;else M+=`return mapCompactResponse(${T0} r ${Q1})
`}else{j.resolve();let P=$0?`await ${B}`:B;if(g("afterHandle").resolve(),J instanceof Response)M+=w.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${T0} ${B}.clone(), c.set ${Q1})
				else
					return ${B}.clone()`:`return ${B}.clone()`,M+="\n";else if(e2)M+=`return mapResponse(${T0} ${P}, c.set ${Q1})
`;else M+=`return mapCompactResponse(${T0} ${P} ${Q1})
`}}if(M+=`
} catch(error) {`,K)M+=`
if(isParsing) error = new ParseError()
`;if(!f1)M+=`
return (async () => {
`;if(M+=`
const set = c.set
if (!set.status || set.status < 300) set.status = error?.status || 500
`,O)for(let j=0;j<W.trace.length;j++)M+=`report${j}?.resolve(error);reportChild${j}?.(error);
`;let w2=g("error",{total:W.error.length});if(W.error.length){M+=`
				c.error = error
				if(error instanceof TypeBoxError) {
					c.code = "VALIDATION"
					c.set.status = 422
				} else
					c.code = error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
				let er
			`;for(let j=0;j<W.error.length;j++){let P=w2.resolveChild(W.error[j].fn.name);if(h0(W.error[j]))M+=`
er = await handleErrors[${j}](c)
`;else M+=`
er = handleErrors[${j}](c)
if (er instanceof Promise) er = await er
`;P();let V=g("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length)for(let T=0;T<W.mapResponse.length;T++){let h=W.mapResponse[T],i0=V.resolveChild(h.fn.name);M+=`
c.response = er

							er = ${s2(h)?"await":""} onMapResponse[${T}](c)
							if(er instanceof Promise) er = await er
`,i0()}if(V.resolve(),M+=`er = mapEarlyResponse(er, set ${Q1})
`,M+="if (er) {",O){for(let T=0;T<W.trace.length;T++)M+=`
report${T}.resolve()
`;w2.resolve()}M+=`return er
}
`}}if(w2.resolve(),M+=`return handleError(c, error, true)
`,!f1)M+="})()";if(M+="}",H||O){if(M+=" finally { ",!f1)M+=";(async () => {";let j=g("afterResponse",{total:W.afterResponse.length});if(H)for(let P=0;P<W.afterResponse.length;P++){let V=j.resolveChild(W.afterResponse[P].fn.name);M+=`
await afterResponse[${P}](c);
`,V()}if(j.resolve(),!f1)M+="})();";M+="}"}M=`const {
		handler,
		handleError,
		hooks: {
			transform,
			resolve,
			beforeHandle,
			afterHandle,
			mapResponse: onMapResponse,
			parse,
			error: handleErrors,
			afterResponse,
			trace: _trace
		},
		validator,
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery,
			parseQueryFromURL,
			isNotEmpty
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError,
			ParseError
		},
		schema,
		definitions,
		ERROR_CODE,
		parseCookie,
		signCookie,
		decodeURIComponent,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer,
		TypeBoxError
	} = hooks

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)

	return ${f1?"async":""} function handle(c) {
		${W.beforeHandle.length?"let be":""}
		${W.afterHandle.length?"let af":""}
		${W.mapResponse.length?"let mr":""}

		${z?"c.schema = schema; c.defs = definitions":""}
		${M}
	}`;try{return Function("hooks",M)({handler:J,hooks:LW(W),validator:Y,handleError:$.handleError,utils:{mapResponse:E0,mapCompactResponse:j2,mapEarlyResponse:c0,parseQuery:CX,parseQueryFromURL:iW,isNotEmpty:n1},error:{NotFoundError:RX,ValidationError:L0,InternalServerError:$q,ParseError:Xq},schema:$.router.history,definitions:$.definitions.type,ERROR_CODE:u8,parseCookie:yW,signCookie:m8,decodeURIComponent:lW.default,ElysiaCustomStatusResponse:B2,ELYSIA_TRACE:VX,ELYSIA_REQUEST_ID:i8,getServer:()=>$.getServer(),TypeBoxError:m})}catch{let j=LW(W);console.log("[Composer] failed to generate optimized handler"),console.log("Please report the following to SaltyAom privately as it may include sensitive information about your codebase:"),console.log("---"),console.log({handler:typeof J==="function"?J.toString():J,hooks:{...j,transform:j?.transform?.map?.((P)=>P.toString()),resolve:j?.resolve?.map?.((P)=>P.toString()),beforeHandle:j?.beforeHandle?.map?.((P)=>P.toString()),afterHandle:j?.afterHandle?.map?.((P)=>P.toString()),mapResponse:j?.mapResponse?.map?.((P)=>P.toString()),parse:j?.parse?.map?.((P)=>P.toString()),error:j?.error?.map?.((P)=>P.toString()),afterResponse:j?.afterResponse?.map?.((P)=>P.toString()),stop:j?.stop?.map?.((P)=>P.toString())},validator:Y,definitions:$.definitions.type}),console.log("---"),process.exit(1)}},KW=($)=>{let X=$.config.handler?.standardHostname??!0,Z="",Q="",W=$.setHeaders;for(let K of Object.keys($.singleton.decorator))Z+=`,${K}: app.singleton.decorator.${K}`;let Y=$.router,J=$.event.trace.length>0,z=`
	const route = router.find(request.method, path) ${Y.http.root.ALL?'?? router.find("ALL", path)':""}

	if (route === null)
		return ${$.event.error.length?"app.handleError(ctx, notFound)":$.event.request.length?`new Response(error404Message, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`:"error404.clone()"}

	ctx.params = route.params
`;z+=`if(route.store.handler) return route.store.handler(ctx)
	return (route.store.handler = route.store.compile())(ctx)
`;let w="";for(let[K,{code:_,all:b,static:I}]of Object.entries(Y.static.http.map)){if(I)w+=`case '${K}':
switch(request.method) {
${_}
${b??"default: break map"}}

`;w+=`case '${K}':
switch(request.method) {
${_}
${b??"default: break map"}}

`}let G=$.event.request.some(h0);if(Q+=`const {
		app,
		mapEarlyResponse,
		NotFoundError,
		randomId,
		handleError,
		error,
		redirect,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer
	} = data

	const store = app.singleton.store
	const staticRouter = app.router.static.http
	const st = staticRouter.handlers
	const wsRouter = app.router.ws
	const router = app.router.http
	const trace = app.event.trace.map(x => typeof x === 'function' ? x : x.fn)

	const notFound = new NotFoundError()
	const hoc = app.extender.higherOrderFunctions.map(x => x.fn)

	${$.event.request.length?"const onRequest = app.event.request.map(x => x.fn)":""}
	${$.event.error.length?"":`
const error404Message = notFound.message.toString()
	const error404 = new Response(error404Message, { status: 404 });
`}

	${$.event.trace.length?`const ${$.event.trace.map((K,_)=>`tr${_} = app.event.trace[${_}].fn`).join(",")}`:""}

	${G?"async":""} function map(request) {
`,$.event.request.length)Q+="let re";if(Q+=`
const url = request.url
		const s = url.indexOf('/', ${X?11:7})
		const qi = url.indexOf('?', s + 1)
		let path
		if(qi === -1)
			path = url.substring(s)
		else
			path = url.substring(s, qi)
`,Q+=`${J?"const id = randomId()":""}
		const ctx = {
			request,
			store,
			qi,
			path,
			url,
			redirect,
			set: {
				headers: ${Object.keys(W??{}).length?"Object.assign({}, app.setHeaders)":"{}"},
				status: 200
			},
			error
			${$.inference.server?`, get server() {
							return getServer()
						}`:""}
			${J?",[ELYSIA_REQUEST_ID]: id":""}
			${Z}
		}
`,$.event.trace.length)Q+=`
ctx[ELYSIA_TRACE] = [${$.event.trace.map((K,_)=>`tr${_}(ctx)`).join(",")}]
`;let H=EX({context:"ctx",trace:$.event.trace,addFn(K){Q+=K}})("request",{attribute:"ctx",total:$.event.request.length});if($.event.request.length){Q+=`
 try {
`;for(let K=0;K<$.event.request.length;K++){let _=$.event.request[K],b=B8(_),I=h0(_),S=H.resolveChild($.event.request[K].fn.name);if(b)Q+=`re = mapEarlyResponse(
					${I?"await":""} onRequest[${K}](ctx),
					ctx.set,
					request
				)
`,S("re"),Q+=`if(re !== undefined) return re
`;else Q+=`${I?"await":""} onRequest[${K}](ctx)
`,S()}Q+=`} catch (error) {
			return app.handleError(ctx, error)
		}`}H.resolve();let O=$.router.static.ws,M=$.router.ws;if(Object.keys(O).length||M.history.length){Q+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[K,_]of Object.entries(O))Q+=`
					case '${K}':
						if(request.headers.get('upgrade') === 'websocket')
							return st[${_}](ctx)

						break`;Q+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = wsRouter.find('ws', path)

						if(route) {
							ctx.params = route.params

							if(route.store.handler)
							    return route.store.handler(ctx)

							return (route.store.handler = route.store.compile())(ctx)
						}
					}

					break
			}
		}
`}if(Q+=`
		map: switch(path) {
			${w}

			default:
				break
		}

		${z}
	}
`,$.extender.higherOrderFunctions.length){let K="map";for(let _=0;_<$.extender.higherOrderFunctions.length;_++)K=`hoc[${_}](${K}, request)`;Q+=`return function hocMap(request) { return ${K}(request) }`}else Q+="return map";let F=oW($);return $.handleError=F,Function("data",Q)({app:$,mapEarlyResponse:c0,NotFoundError:RX,randomId:cW,handleError:F,error:ew,redirect:uW,ELYSIA_TRACE:VX,ELYSIA_REQUEST_ID:i8,getServer:()=>$.getServer()})},oW=($)=>{let X=$.event,Z="";Z+=`const {
		app: { event: { error: onErrorContainer, afterResponse: resContainer, mapResponse: _onMapResponse, trace: _trace } },
		mapResponse,
		ERROR_CODE,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID
	} = inject

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)
	const onMapResponse = []

	for(let i = 0; i < _onMapResponse.length; i++)
		onMapResponse.push(_onMapResponse[i].fn ?? _onMapResponse[i])

	delete _onMapResponse

	const onError = onErrorContainer.map(x => x.fn)
	const res = resContainer.map(x => x.fn)

	return ${$.event.error.find(h0)||$.event.mapResponse.find(h0)?"async":""} function(context, error, skipGlobal) {`;let Q=$.event.trace.length>0;if(Q)Z+="\nconst id = context[ELYSIA_REQUEST_ID]\n";let W=EX({context:"context",trace:X.trace,addFn:(z)=>{Z+=z}});Z+=`
		const set = context.set
		let r

		if(!context.code)
			context.code = error.code ?? error[ERROR_CODE]

		if(!(context.error instanceof Error))
			context.error = error

		if(error instanceof ElysiaCustomStatusResponse) {
			error.status = error.code
			error.message = error.response
		}
`;let Y=Q||X.afterResponse.length>0||X.afterResponse.length>0?"context.response = ":"";for(let z=0;z<$.event.error.length;z++){let w=$.event.error[z],G=`${h0(w)?"await ":""}onError[${z}](context)`;if(Z+="\nif(skipGlobal !== true) {\n",B8(w)){Z+=`r = ${G}; if(r !== undefined) {
				if(r instanceof Response) return r

				if(r instanceof ElysiaCustomStatusResponse) {
					error.status = error.code
					error.message = error.response
				}

				if(set.status === 200) set.status = error.status
`;let B=W("mapResponse",{total:X.mapResponse.length,name:"context"});if(X.mapResponse.length)for(let H=0;H<X.mapResponse.length;H++){let O=X.mapResponse[H],M=B.resolveChild(O.fn.name);Z+=`
context.response = r
						r = ${s2(O)?"await":""} onMapResponse[${H}](context)
`,M()}B.resolve(),Z+=`return mapResponse(${Y} r, set, context.request)}
`}else Z+=G+"\n";Z+="\n}\n"}Z+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
	    const reportedError = error.error ?? error
		set.status = reportedError.status ?? 422
		return new Response(
			reportedError.message,
			{
				headers: Object.assign(
					{ 'content-type': 'application/json'},
					set.headers
				),
				status: set.status
			}
		)
	} else {
		if(error.code && typeof error.status === "number")
			return new Response(
				error.message,
				{ headers: set.headers, status: error.status }
			)
`;let J=W("mapResponse",{total:X.mapResponse.length,name:"context"});if(X.mapResponse.length)for(let z=0;z<X.mapResponse.length;z++){let w=X.mapResponse[z],G=J.resolveChild(w.fn.name);Z+=`
context.response = error
			error = ${s2(w)?"await":""} onMapResponse[${z}](context)
`,G()}return J.resolve(),Z+=`
return mapResponse(${Y} error, set, context.request)
}
}`,Function("inject",Z)({app:$,mapResponse:E0,ERROR_CODE:u8,ElysiaCustomStatusResponse:B2,ELYSIA_TRACE:VX,ELYSIA_REQUEST_ID:i8})},jW=($)=>async(X)=>{let Z=X.url,Q=Z.indexOf("/",11),W=Z.indexOf("?",Q+1),Y=W===-1?Z.substring(Q):Z.substring(Q,W),J={cookie:{},status:200,headers:{}},z=Object.assign({},$.singleton.decorator,{set:J,store:$.singleton.store,request:X,path:Y,qi:W,redirect:uW});try{for(let b=0;b<$.event.request.length;b++){let I=$.event.request[b].fn,S=I(z);if(S instanceof Promise)S=await S;if(S=c0(S,J),S)return z.response=S}let w=$.router.dynamic.find(X.method,Y)??$.router.dynamic.find("ALL",Y);if(!w)throw new RX;let{handle:G,hooks:B,validator:H,content:O}=w.store,M;if(X.method!=="GET"&&X.method!=="HEAD")if(O)switch(O){case"application/json":M=await X.json();break;case"text/plain":M=await X.text();break;case"application/x-www-form-urlencoded":M=CX(await X.text());break;case"application/octet-stream":M=await X.arrayBuffer();break;case"multipart/form-data":M={};let b=await X.formData();for(let I of b.keys()){if(M[I])continue;let S=b.getAll(I);if(S.length===1)M[I]=S[0];else M[I]=S}break}else{let b=X.headers.get("content-type");if(b){let I=b.indexOf(";");if(I!==-1)b=b.slice(0,I);z.contentType=b;for(let S=0;S<B.parse.length;S++){let c=B.parse[S].fn,d=c(z,b);if(d instanceof Promise)d=await d;if(d){M=d;break}}if(delete z.contentType,M===void 0)switch(b){case"application/json":M=await X.json();break;case"text/plain":M=await X.text();break;case"application/x-www-form-urlencoded":M=CX(await X.text());break;case"application/octet-stream":M=await X.arrayBuffer();break;case"multipart/form-data":M={};let S=await X.formData();for(let c of S.keys()){if(M[c])continue;let d=S.getAll(c);if(d.length===1)M[c]=d[0];else M[c]=d}break}}}z.body=M,z.params=w?.params||void 0,z.query=W===-1?{}:iW(Z.substring(W+1)),z.headers={};for(let[b,I]of X.headers.entries())z.headers[b]=I;let F=Object.assign({},$.config?.cookie,H?.cookie?.config),K=X.headers.get("cookie");z.cookie=await yW(z.set,K,F?{secrets:F.secrets!==void 0?typeof F.secrets==="string"?F.secrets:F.secrets.join(","):void 0,sign:F.sign===!0?!0:F.sign!==void 0?typeof F.sign==="string"?F.sign:F.sign.join(","):void 0}:void 0);for(let b=0;b<B.transform.length;b++){let I=B.transform[b],S=I.fn(z);if(I.subType==="derive")if(S instanceof Promise)Object.assign(z,await S);else Object.assign(z,S);else if(S instanceof Promise)await S}if(H){if(H.createHeaders?.()){let b={};for(let I in X.headers)b[I]=X.headers.get(I);if(H.headers.Check(b)===!1)throw new L0("header",H.headers,b)}else if(H.headers?.Decode)z.headers=H.headers.Decode(z.headers);if(H.createParams?.()?.Check(z.params)===!1)throw new L0("params",H.params,z.params);else if(H.params?.Decode)z.params=H.params.Decode(z.params);if(H.createQuery?.()?.Check(z.query)===!1)throw new L0("query",H.query,z.query);else if(H.query?.Decode)z.query=H.query.Decode(z.query);if(H.createCookie?.()){let b={};for(let[I,S]of Object.entries(z.cookie))b[I]=S.value;if(H.cookie.Check(b)===!1)throw new L0("cookie",H.cookie,b);else if(H.cookie?.Decode)b=H.cookie.Decode(b)}if(H.createBody?.()?.Check(M)===!1)throw new L0("body",H.body,M);else if(H.body?.Decode)z.body=H.body.Decode(M)}for(let b=0;b<B.beforeHandle.length;b++){let I=B.beforeHandle[b],S=I.fn(z);if(I.subType==="resolve"){if(S instanceof Promise)Object.assign(z,await S);else Object.assign(z,S);continue}else if(S instanceof Promise)S=await S;if(S!==void 0){z.response=S;for(let d=0;d<B.afterHandle.length;d++){let i=B.afterHandle[d].fn(z);if(i instanceof Promise)i=await i;if(i)S=i}let c=c0(S,z.set);if(c)return z.response=c}}let _=G(z);if(_ instanceof Promise)_=await _;if(!B.afterHandle.length){let b=_ instanceof B2?_.code:J.status?typeof J.status==="string"?U8[J.status]:J.status:200,I=H?.createResponse?.()?.[b];if(I?.Check(_)===!1)throw new L0("response",I,_);else if(I?.Decode)_=I.Decode(_)}else{z.response=_;for(let b=0;b<B.afterHandle.length;b++){let I=B.afterHandle[b].fn(z);if(I instanceof Promise)I=await I;let S=c0(I,z.set);if(S!==void 0){let c=H?.response?.[S.status];if(c?.Check(S)===!1)throw new L0("response",c,S);else if(c?.Decode)_=c.Decode(_);return z.response=S}}}if(z.set.cookie&&F?.sign){let b=!F.secrets?void 0:typeof F.secrets==="string"?F.secrets:F.secrets[0];if(F.sign===!0)for(let[I,S]of Object.entries(z.set.cookie))z.set.cookie[I].value=await m8(S.value,"${secret}");else{let I=H?.cookie?.schema?.properties;for(let S of F.sign){if(!(S in I))continue;if(z.set.cookie[S]?.value)z.set.cookie[S].value=await m8(z.set.cookie[S].value,b)}}}return z.response=E0(_,z.set)}catch(w){let G=w instanceof k8&&w.error?w.error:w;if(G.status)J.status=G.status;return $.handleError(z,G)}finally{for(let w of $.event.afterResponse)await w.fn(z)}},zq=($)=>async(X,Z)=>{let Q=Object.assign(X,{error:Z,code:Z.code});Q.set=X.set;for(let W=0;W<$.event.error.length;W++){let J=$.event.error[W].fn(Q);if(J instanceof Promise)J=await J;if(J!==void 0&&J!==null)return X.response=E0(J,X.set)}return new Response(typeof Z.cause==="string"?Z.cause:Z.message,{headers:X.set.headers,status:Z.status??500})},FV=class ${constructor(X={}){if(this.server=null,this.dependencies={},this._routes={},this._types={Prefix:"",Scoped:!1,Singleton:{},Definitions:{},Metadata:{}},this._ephemeral={},this._volatile={},this.version=SW,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={type:{},error:{}},this.extender={macros:[],higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return z8(z8(this.global,this.scoped),this.local)}},this.event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],mapResponse:[],afterResponse:[],trace:[],error:[],stop:[]},this.telemetry={stack:void 0},this.router={http:new NX,ws:new NX,dynamic:new NX,static:{http:{static:{},handlers:[],map:{},all:""},ws:{}},history:[]},this.routeTree=new Map,this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1},this.handle=async(Z)=>this.fetch(Z),this.fetch=(Z)=>{return(this.fetch=this.config.aot?KW(this):jW(this))(Z)},this.handleError=async(Z,Q)=>(this.handleError=this.config.aot?oW(this):zq(this))(Z,Q),this.outerErrorHandler=(Z)=>new Response(Z.message||Z.name||"Error",{status:Z?.status??500}),this.listen=(Z,Q)=>{if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.compile(),typeof Z==="string"){if(!jX(Z))throw new Error("Port must be a numeric value");Z=parseInt(Z)}let W=this.fetch,Y=typeof Z==="object"?{development:!c8,reusePort:!0,...this.config.serve||{},...Z||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...FW||{}},fetch:W,error:this.outerErrorHandler}:{development:!c8,reusePort:!0,...this.config.serve||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...FW||{}},port:Z,fetch:W,error:this.outerErrorHandler};this.server=Bun?.serve(Y);for(let J=0;J<this.event.start.length;J++)this.event.start[J].fn(this);if(Q)Q(this.server);return process.on("beforeExit",()=>{if(this.server){this.server.stop(),this.server=null;for(let J=0;J<this.event.stop.length;J++)this.event.stop[J].fn(this)}}),this.promisedModules.then(()=>{Bun?.gc(!1)}),this},this.stop=async(Z)=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server){if(this.server.stop(Z),this.server=null,this.event.stop.length)for(let Q=0;Q<this.event.stop.length;Q++)this.event.stop[Q].fn(this)}},X.tags)if(!X.detail)X.detail={tags:X.tags};else X.detail.tags=X.tags;if(X.nativeStaticResponse===void 0)X.nativeStaticResponse=!0;if(this.config={},this.applyConfig(X??{}),X?.analytic&&(X?.name||X?.seed!==void 0))this.telemetry.stack=new Error().stack}static{this.version=SW}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get _scoped(){return this.config.scoped}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getServer(){return this.server}get promisedModules(){if(!this._promisedModules)this._promisedModules=new rw;return this._promisedModules}env(X,Z=Bun?.env??process.env){if(q1(X,{dynamic:!0,additionalProperties:!0,coerce:!0}).Check(Z)===!1){let W=new L0("env",X,Z);throw new Error(W.all.map((Y)=>Y.summary).join("\n"))}return this}wrap(X){return this.extender.higherOrderFunctions.push({checksum:M8(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X}),this}applyMacro(X){if(this.extender.macros.length){let Z=tw({globalHook:this.event,localHook:X}),Q={events:{global:this.event,local:X},onParse:Z("parse"),onTransform:Z("transform"),onBeforeHandle:Z("beforeHandle"),onAfterHandle:Z("afterHandle"),mapResponse:Z("mapResponse"),onAfterResponse:Z("afterResponse"),onError:Z("error")};for(let W of this.extender.macros)ow(W.fn(Q),X)}}applyConfig(X){return this.config={prefix:"",aot:!0,strictPath:!1,global:!1,analytic:!1,normalize:!0,...X,cookie:{path:"/",...X?.cookie},experimental:X?.experimental??{},seed:X?.seed===void 0?"":X?.seed},this}get models(){let X={};for(let[Z,Q]of Object.entries(this.definitions.type))X[Z]=q1(Q);return X}add(X,Z,Q,W,{allowMeta:Y=!1,skipPrefix:J=!1}={allowMeta:!1,skipPrefix:!1}){if(W=aw(W),Z!==""&&Z.charCodeAt(0)!==47)Z="/"+Z;if(this.config.prefix&&!J&&!this.config.scoped)Z=this.config.prefix+Z;if(W?.type)switch(W.type){case"text":W.type="text/plain";break;case"json":W.type="application/json";break;case"formdata":W.type="multipart/form-data";break;case"urlencoded":W.type="application/x-www-form-urlencoded";break;case"arrayBuffer":W.type="application/octet-stream";break;default:break}let z=this.definitions.type,w=!this.config.aot,G={...this.validator.getCandidate()},B={body:W?.body??G?.body,headers:W?.headers??G?.headers,params:W?.params??G?.params,query:W?.query??G?.query,cookie:W?.cookie??G?.cookie,response:W?.response??G?.response},H=()=>B.cookie?mW({validator:B.cookie,defaultConfig:this.config.cookie,config:B.cookie?.config??{},dynamic:w,models:z}):void 0,O=this.config.normalize,M=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.schema===!0?{body:q1(B.body,{dynamic:w,models:z,normalize:O,additionalCoerce:UW()}),headers:q1(B.headers,{dynamic:w,models:z,additionalProperties:!this.config.normalize,coerce:!0,additionalCoerce:n2()}),params:q1(B.params,{dynamic:w,models:z,coerce:!0,additionalCoerce:n2()}),query:q1(B.query,{dynamic:w,models:z,normalize:O,coerce:!0,additionalCoerce:n2()}),cookie:H(),response:qW(B.response,{dynamic:w,models:z,normalize:O})}:{createBody(){if(this.body)return this.body;return this.body=q1(B.body,{dynamic:w,models:z,normalize:O,additionalCoerce:UW()})},createHeaders(){if(this.headers)return this.headers;return this.headers=q1(B.headers,{dynamic:w,models:z,additionalProperties:!O,coerce:!0,additionalCoerce:n2()})},createParams(){if(this.params)return this.params;return this.params=q1(B.params,{dynamic:w,models:z,coerce:!0,additionalCoerce:n2()})},createQuery(){if(this.query)return this.query;return this.query=q1(B.query,{dynamic:w,models:z,coerce:!0,additionalCoerce:n2()})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=H()},createResponse(){if(this.response)return this.response;return this.response=qW(B.response,{dynamic:w,models:z,normalize:O})}},F=Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(W=T1(W,G),W.tags)if(!W.detail)W.detail={tags:W.tags};else W.detail.tags=W.tags;if(n1(this.config.detail))W.detail=U1(Object.assign({},this.config.detail),W.detail);this.applyMacro(W);let K=T1(this.event,W);if(this.config.aot===!1){if(this.router.dynamic.add(X,Z,{validator:M,hooks:K,content:W?.type,handle:Q}),this.config.strictPath===!1)this.router.dynamic.add(X,F,{validator:M,hooks:K,content:W?.type,handle:Q});this.router.history.push({method:X,path:Z,composed:null,handler:Q,hooks:K});return}let _=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,b=OX(this.inference),I=typeof Q!=="function"?dw(Q,K,this.setHeaders):void 0,S=typeof Q!=="function"?vw(Q,K,this.setHeaders):void 0;if(this.config.nativeStaticResponse===!0&&S&&(X==="GET"||X==="ALL"))this.router.static.http.static[Z]=S();let c=()=>Jq({app:this,path:Z,method:X,localHook:T1(W),hooks:K,validator:M,handler:Q,allowMeta:Y,inference:b}),d=_?c():(v)=>{return c()(v)},i=this.router.history.length;if(this.routeTree.has(X+Z))for(let v=0;v<this.router.history.length;v++){let g=this.router.history[v];if(g.path===Z&&g.method===X){let $0=this.router.history.splice(v,1)[0];if($0&&this.routeTree.has($0?.method+$0?.path))this.routeTree.delete($0.method+$0.path)}}else this.routeTree.set(X+Z,i);this.router.history.push({method:X,path:Z,composed:d,handler:Q,hooks:K});let t=this.router.static.http,J0={handler:_?d:void 0,compile:c};if(X==="$INTERNALWS"){let v=this.config.strictPath?void 0:Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(Z.indexOf(":")===-1&&Z.indexOf("*")===-1){let g=t.handlers.length;if(t.handlers.push(($0)=>(t.handlers[g]=c())($0)),this.router.static.ws[Z]=g,v)this.router.static.ws[v]=g}else if(this.router.ws.add("ws",Z,J0),v)this.router.ws.add("ws",v,J0);return}if(Z.indexOf(":")===-1&&Z.indexOf("*")===-1){let v=t.handlers.length;if(t.handlers.push(I??(($0)=>(t.handlers[v]=c())($0))),!t.map[Z])t.map[Z]={code:""};let g=I?"":"ctx";if(X==="ALL")t.map[Z].all=`default: return st[${v}](${g})
`;else t.map[Z].code=`case '${X}': return st[${v}](${g})
${t.map[Z].code}`;if(!this.config.strictPath){if(!t.map[F])t.map[F]={code:""};if(this.config.nativeStaticResponse===!0&&S&&(X==="GET"||X==="ALL"))this.router.static.http.static[F]=S();if(X==="ALL")t.map[F].all=`default: return st[${v}](${g})
`;else t.map[F].code=`case '${X}': return st[${v}](${g})
${t.map[F].code}`}}else if(this.router.http.add(X,Z,J0),!this.config.strictPath){let v=Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(this.config.nativeStaticResponse===!0&&I&&(X==="GET"||X==="ALL"))this.router.static.http.static[v]=I();this.router.http.add(X,v,J0)}}headers(X){if(!X)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=U1(this.setHeaders,X),this}onStart(X){return this.on("start",X),this}onRequest(X){return this.on("request",X),this}onParse(X,Z){if(!Z)return this.on("parse",X);return this.on(X,"parse",Z)}onTransform(X,Z){if(!Z)return this.on("transform",X);return this.on(X,"transform",Z)}resolve(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"resolve",fn:Z};return this.onBeforeHandle(X,Q)}mapResolve(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"mapResolve",fn:Z};return this.onBeforeHandle(X,Q)}onBeforeHandle(X,Z){if(!Z)return this.on("beforeHandle",X);return this.on(X,"beforeHandle",Z)}onAfterHandle(X,Z){if(!Z)return this.on("afterHandle",X);return this.on(X,"afterHandle",Z)}mapResponse(X,Z){if(!Z)return this.on("mapResponse",X);return this.on(X,"mapResponse",Z)}onAfterResponse(X,Z){if(!Z)return this.on("afterResponse",X);return this.on(X,"afterResponse",Z)}trace(X,Z){if(!Z)Z=X,X={as:"local"};if(!Array.isArray(Z))Z=[Z];for(let Q of Z)this.on(X,"trace",Zq(Q));return this}error(X,Z){switch(typeof X){case"string":return Z.prototype[u8]=X,this.definitions.error[X]=Z,this;case"function":return this.definitions.error=X(this.definitions.error),this}for(let[Q,W]of Object.entries(X))W.prototype[u8]=Q,this.definitions.error[Q]=W;return this}onError(X,Z){if(!Z)return this.on("error",X);return this.on(X,"error",Z)}onStop(X){return this.on("stop",X),this}on(X,Z,Q){let W;switch(typeof X){case"string":W=X,Q=Z;break;case"object":if(W=Z,!Array.isArray(Z)&&typeof Z==="object")Q=Z;break}if(Array.isArray(Q))Q=g1(Q);else if(typeof Q==="function")Q=[{fn:Q}];else Q=[Q];let Y=Q;for(let J of Y)J.scope=typeof X==="string"?"local":X?.as??"local";if(W!=="trace")VW({[W]:Y.map((J)=>J.fn)},this.inference);for(let J of Y){let z=lw(J,"global",{skipIfHasType:!0});switch(W){case"start":this.event.start.push(z);break;case"request":this.event.request.push(z);break;case"parse":this.event.parse.push(z);break;case"transform":this.event.transform.push(z);break;case"beforeHandle":this.event.beforeHandle.push(z);break;case"afterHandle":this.event.afterHandle.push(z);break;case"mapResponse":this.event.mapResponse.push(z);break;case"afterResponse":this.event.afterResponse.push(z);break;case"trace":this.event.trace.push(z);break;case"error":this.event.error.push(z);break;case"stop":this.event.stop.push(z);break}}return this}propagate(){return e0(this.event.parse),e0(this.event.transform),e0(this.event.beforeHandle),e0(this.event.afterHandle),e0(this.event.mapResponse),e0(this.event.afterResponse),e0(this.event.trace),e0(this.event.error),this}as(X){let Z={plugin:"scoped",global:"global"}[X];if(e0(this.event.parse,Z),e0(this.event.transform,Z),e0(this.event.beforeHandle,Z),e0(this.event.afterHandle,Z),e0(this.event.mapResponse,Z),e0(this.event.afterResponse,Z),e0(this.event.trace,Z),e0(this.event.error,Z),X==="plugin")this.validator.scoped=z8(this.validator.scoped,this.validator.local),this.validator.local=null;else if(X==="global")this.validator.global=z8(this.validator.global,z8(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null;return this}group(X,Z,Q){let W=new $({...this.config,prefix:""});W.singleton={...this.singleton},W.definitions={...this.definitions},W.getServer=()=>this.getServer(),W.inference=OX(this.inference),W.extender={...this.extender};let Y=typeof Z==="object",J=(Y?Q:Z)(W);if(this.singleton=U1(this.singleton,W.singleton),this.definitions=U1(this.definitions,W.definitions),J.event.request.length)this.event.request=[...this.event.request||[],...J.event.request||[]];if(J.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...J.event.mapResponse||[]];return this.model(J.definitions.type),Object.values(W.router.history).forEach(({method:z,path:w,handler:G,hooks:B})=>{if(w=(Y?"":this.config.prefix)+X+w,Y){let H=Z,O=B;this.add(z,w,G,T1(H,{...O||{},error:!O.error?J.event.error:Array.isArray(O.error)?[...O.error||{},...J.event.error||{}]:[O.error,...J.event.error||{}]}))}else this.add(z,w,G,T1(B,{error:J.event.error}),{skipPrefix:!0})}),this}guard(X,Z){if(!Z){if(typeof X==="object"){this.applyMacro(X);let Y=X.as??"local";if(this.validator[Y]={body:X.body??this.validator[Y]?.body,headers:X.headers??this.validator[Y]?.headers,params:X.params??this.validator[Y]?.params,query:X.query??this.validator[Y]?.query,response:X.response??this.validator[Y]?.response,cookie:X.cookie??this.validator[Y]?.cookie},X.parse)this.on({as:Y},"parse",X.parse);if(X.transform)this.on({as:Y},"transform",X.transform);if(X.beforeHandle)this.on({as:Y},"beforeHandle",X.beforeHandle);if(X.afterHandle)this.on({as:Y},"afterHandle",X.afterHandle);if(X.mapResponse)this.on({as:Y},"mapResponse",X.mapResponse);if(X.afterResponse)this.on({as:Y},"afterResponse",X.afterResponse);if(X.error)this.on({as:Y},"error",X.error);if(X.detail)if(this.config.detail)this.config.detail=U1(Object.assign({},this.config.detail),X.detail);else this.config.detail=X.detail;if(X?.tags)if(!this.config.detail)this.config.detail={tags:X.tags};else this.config.detail.tags=X.tags;return this}return this.guard({},X)}let Q=new $({...this.config,prefix:""});Q.singleton={...this.singleton},Q.definitions={...this.definitions},Q.inference=OX(this.inference),Q.extender={...this.extender};let W=Z(Q);if(this.singleton=U1(this.singleton,Q.singleton),this.definitions=U1(this.definitions,Q.definitions),W.getServer=()=>this.server,W.event.request.length)this.event.request=[...this.event.request||[],...W.event.request||[]];if(W.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...W.event.mapResponse||[]];return this.model(W.definitions.type),Object.values(Q.router.history).forEach(({method:Y,path:J,handler:z,hooks:w})=>{this.add(Y,J,z,T1(X,{...w||{},error:!w.error?W.event.error:Array.isArray(w.error)?[...w.error||{},...W.event.error||[]]:[w.error,...W.event.error||[]]}))}),this}use(X,Z){if(Z?.scoped)return this.guard({},(Q)=>Q.use(X));if(Array.isArray(X)){let Q=this;for(let W of X)Q=this.use(W);return Q}if(X instanceof Promise)return this.promisedModules.add(X.then((Q)=>{if(typeof Q==="function")return Q(this);if(Q instanceof $)return this._use(Q).compile();if(typeof Q.default==="function")return Q.default(this);if(Q.default instanceof $)return this._use(Q.default);throw new Error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.')}).then((Q)=>Q.compile())),this;return this._use(X)}_use(X){if(typeof X==="function"){let Y=X(this);if(Y instanceof Promise)return this.promisedModules.add(Y.then((J)=>{if(J instanceof $){J.getServer=()=>this.getServer(),J.getGlobalRoutes=()=>this.getGlobalRoutes(),J.model(this.definitions.type),J.error(this.definitions.error);for(let{method:z,path:w,handler:G,hooks:B}of Object.values(J.router.history))this.add(z,w,G,T1(B,{error:J.event.error}));return J.compile(),J}if(typeof J==="function")return J(this);if(typeof J.default==="function")return J.default(this);return this._use(J)}).then((J)=>J.compile())),this;return Y}let{name:Z,seed:Q}=X.config;X.getServer=()=>this.getServer(),X.getGlobalRoutes=()=>this.getGlobalRoutes(),X.model(this.definitions.type),X.error(this.definitions.error);let W=X.config.scoped;if(W){if(Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let J=Q!==void 0?M8(Z+JSON.stringify(Q)):0;if(this.dependencies[Z].some(({checksum:z})=>J===z))return this;this.dependencies[Z].push(!this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:J,dependencies:X.dependencies}:{name:X.config.name,seed:X.config.seed,checksum:J,dependencies:X.dependencies,stack:X.telemetry.stack,routes:X.router.history,decorators:X.singleton.decorator,store:X.singleton.store,type:X.definitions.type,error:X.definitions.error,derive:X.event.transform.filter((z)=>z.subType==="derive").map((z)=>({fn:z.fn.toString(),stack:new Error().stack??""})),resolve:X.event.transform.filter((z)=>z.subType==="derive").map((z)=>({fn:z.fn.toString(),stack:new Error().stack??""}))})}X.extender.macros=this.extender.macros.concat(X.extender.macros);let Y=[];for(let J=0;J<X.extender.macros.length;J++){let z=this.extender.macros[J];if(Y.includes(z.checksum))X.extender.macros.splice(J,1),J--;Y.push(z.checksum)}if(X.onRequest((J)=>{Object.assign(J,this.singleton.decorator),Object.assign(J.store,this.singleton.store)}),X.event.trace.length)X.event.trace.push(...X.event.trace);if(!X.config.prefix)console.warn("It's recommended to use scoped instance with a prefix to prevent collision routing with other instance.");if(X.event.error.length)X.event.error.push(...this.event.error);if(X.config.aot)X.compile();if(W===!0&&X.config.prefix){this.mount(X.config.prefix+"/",X.fetch);for(let J of X.router.history)this.routeTree.set(J.method+`${X.config.prefix}${J.path}`,this.router.history.length),this.router.history.push({...J,path:`${X.config.prefix}${J.path}`,hooks:T1(J.hooks,{error:this.event.error})})}else{this.mount(X.fetch);for(let J of X.router.history)this.routeTree.set(J.method+`${X.config.prefix}${J.path}`,this.router.history.length),this.router.history.push({...J,path:`${X.config.prefix}${J.path}`,hooks:T1(J.hooks,{error:this.event.error})})}return this}else{if(this.headers(X.setHeaders),Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let J=Q!==void 0?M8(Z+JSON.stringify(Q)):0;if(!this.dependencies[Z].some(({checksum:z})=>J===z))this.extender.macros=this.extender.macros.concat(X.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions)}else this.extender.macros=this.extender.macros.concat(X.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions);PW(this.extender.macros),PW(this.extender.higherOrderFunctions);let Y=[];for(let J=0;J<this.extender.higherOrderFunctions.length;J++){let z=this.extender.higherOrderFunctions[J];if(z.checksum){if(Y.includes(z.checksum))this.extender.higherOrderFunctions.splice(J,1),J--;Y.push(z.checksum)}}this.inference={body:this.inference.body||X.inference.body,cookie:this.inference.cookie||X.inference.cookie,headers:this.inference.headers||X.inference.headers,query:this.inference.query||X.inference.query,set:this.inference.set||X.inference.set,server:this.inference.server||X.inference.server}}this.decorate(X.singleton.decorator),this.state(X.singleton.store),this.model(X.definitions.type),this.error(X.definitions.error),X.extender.macros=this.extender.macros.concat(X.extender.macros);for(let{method:Y,path:J,handler:z,hooks:w}of Object.values(X.router.history))this.add(Y,J,z,T1(w,{error:X.event.error}));if(!W)if(Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let Y=Q!==void 0?M8(Z+JSON.stringify(Q)):0;if(this.dependencies[Z].some(({checksum:J})=>Y===J))return this;this.dependencies[Z].push(!this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:Y,dependencies:X.dependencies}:{name:X.config.name,seed:X.config.seed,checksum:Y,dependencies:X.dependencies,stack:X.telemetry.stack,routes:X.router.history,decorators:X.singleton,store:X.singleton.store,type:X.definitions.type,error:X.definitions.error,derive:X.event.transform.filter((J)=>J?.subType==="derive").map((J)=>({fn:J.toString(),stack:new Error().stack??""})),resolve:X.event.transform.filter((J)=>J?.subType==="resolve").map((J)=>({fn:J.toString(),stack:new Error().stack??""}))}),this.event=GW(this.event,AW(X.event),Y)}else this.event=GW(this.event,AW(X.event));return this.validator.global=T1(this.validator.global,{...X.validator.global}),this.validator.local=T1(this.validator.local,{...X.validator.scoped}),this}macro(X){let Z={checksum:M8(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X};return this.extender.macros.push(Z),this}mount(X,Z){if(X instanceof $||typeof X==="function"||X.length===0||X==="/"){let Y=typeof X==="function"?X:X instanceof $?X.compile().fetch:Z instanceof $?Z.compile().fetch:Z,J=async({request:z,path:w})=>{if(z.method==="GET"||z.method==="HEAD"||!z.headers.get("content-type"))return Y(new Request(v8(z.url,w||"/"),z));return Y(new Request(v8(z.url,w||"/"),{...z,body:await z.arrayBuffer()}))};return this.all("/*",J,{type:"none"}),this}let Q=X.length;if(Z instanceof $)Z=Z.compile().fetch;let W=async({request:Y,path:J})=>{if(Y.method==="GET"||Y.method==="HEAD"||!Y.headers.get("content-type"))return Z(new Request(v8(Y.url,J.slice(Q)||"/"),Y));return Z(new Request(v8(Y.url,J.slice(Q)||"/"),{...Y,body:await Y.arrayBuffer()}))};return this.all(X,W,{type:"none"}),this.all(X+(X.endsWith("/")?"*":"/*"),W,{type:"none"}),this}get(X,Z,Q){return this.add("GET",X,Z,Q),this}post(X,Z,Q){return this.add("POST",X,Z,Q),this}put(X,Z,Q){return this.add("PUT",X,Z,Q),this}patch(X,Z,Q){return this.add("PATCH",X,Z,Q),this}delete(X,Z,Q){return this.add("DELETE",X,Z,Q),this}options(X,Z,Q){return this.add("OPTIONS",X,Z,Q),this}all(X,Z,Q){return this.add("ALL",X,Z,Q),this}head(X,Z,Q){return this.add("HEAD",X,Z,Q),this}connect(X,Z,Q){return this.add("CONNECT",X,Z,Q),this}route(X,Z,Q,W){return this.add(X.toUpperCase(),Z,Q,W,W?.config),this}ws(X,Z){let Q=Z.transformMessage?Array.isArray(Z.transformMessage)?Z.transformMessage:[Z.transformMessage]:void 0,W=null,Y=q1(Z?.body,{models:this.definitions.type,normalize:this.config.normalize}),J=q1(Z?.response,{models:this.definitions.type,normalize:this.config.normalize}),z=(w)=>{if(typeof w==="string"){let G=w?.charCodeAt(0);if(G===47||G===123)try{w=JSON.parse(w)}catch{}else if(jX(w))w=+w}if(Q?.length)for(let G=0;G<Q.length;G++){let B=Q[G](w);if(B!==void 0)w=B}return w};return this.route("$INTERNALWS",X,(w)=>{let{set:G,path:B,qi:H,headers:O,query:M,params:F}=w;if(W===null)W=this.getServer();if(W?.upgrade(w.request,{headers:typeof Z.upgrade==="function"?Z.upgrade(w):Z.upgrade,data:{validator:J,open(K){Z.open?.(new h8(K,w))},message:(K,_)=>{let b=z(_);if(Y?.Check(b)===!1)return void K.send(new L0("message",Y,b).message);Z.message?.(new h8(K,w),b)},drain(K){Z.drain?.(new h8(K,w))},close(K,_,b){Z.close?.(new h8(K,w),_,b)}}}))return;return G.status=400,"Expected a websocket connection"},{beforeHandle:Z.beforeHandle,transform:Z.transform,headers:Z.headers,params:Z.params,query:Z.query}),this}state(X,Z,Q){if(Z===void 0)Q=X,X={as:"append"},Z="";else if(Q===void 0){if(typeof X==="string")Q=Z,Z=X,X={as:"append"};else if(typeof X==="object")Q=Z,Z=""}let{as:W}=X;if(typeof Z!=="string")return this;switch(typeof Q){case"object":if(Z){if(Z in this.singleton.store)this.singleton.store[Z]=U1(this.singleton.store[Z],Q,{override:W==="override"});else this.singleton.store[Z]=Q;return this}if(Q===null)return this;return this.singleton.store=U1(this.singleton.store,Q,{override:W==="override"}),this;case"function":if(Z){if(W==="override"||!(Z in this.singleton.store))this.singleton.store[Z]=Q}else this.singleton.store=Q(this.singleton.store);return this;default:if(W==="override"||!(Z in this.singleton.store))this.singleton.store[Z]=Q;return this}}decorate(X,Z,Q){if(Z===void 0)Q=X,X={as:"append"},Z="";else if(Q===void 0){if(typeof X==="string")Q=Z,Z=X,X={as:"append"};else if(typeof X==="object")Q=Z,Z=""}let{as:W}=X;if(typeof Z!=="string")return this;switch(typeof Q){case"object":if(Z){if(Z in this.singleton.decorator)this.singleton.decorator[Z]=U1(this.singleton.decorator[Z],Q,{override:W==="override"});else this.singleton.decorator[Z]=Q;return this}if(Q===null)return this;return this.singleton.decorator=U1(this.singleton.decorator,Q,{override:W==="override"}),this;case"function":if(Z){if(W==="override"||!(Z in this.singleton.decorator))this.singleton.decorator[Z]=Q}else this.singleton.decorator=Q(this.singleton.decorator);return this;default:if(W==="override"||!(Z in this.singleton.decorator))this.singleton.decorator[Z]=Q;return this}}derive(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"derive",fn:Z};return this.onTransform(X,Q)}model(X,Z){switch(typeof X){case"object":return Object.entries(X).forEach(([Q,W])=>{if(!(Q in this.definitions.type))this.definitions.type[Q]=W}),this;case"function":return this.definitions.type=X(this.definitions.type),this}return this.definitions.type[X]=Z,this}mapDerive(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"mapDerive",fn:Z};return this.onTransform(X,Q)}affix(X,Z,Q){if(Q==="")return this;let W=["_","-"," "],Y=(G)=>G[0].toUpperCase()+G.slice(1),J=X==="prefix"?(G,B)=>W.includes(G.at(-1)??"")?G+B:G+Y(B):W.includes(Q.at(-1)??"")?(G,B)=>B+G:(G,B)=>B+Y(G),z=(G)=>{let B={};switch(G){case"decorator":for(let H in this.singleton.decorator)B[J(Q,H)]=this.singleton.decorator[H];this.singleton.decorator=B;break;case"state":for(let H in this.singleton.store)B[J(Q,H)]=this.singleton.store[H];this.singleton.store=B;break;case"model":for(let H in this.definitions.type)B[J(Q,H)]=this.definitions.type[H];this.definitions.type=B;break;case"error":for(let H in this.definitions.error)B[J(Q,H)]=this.definitions.error[H];this.definitions.error=B;break}},w=Array.isArray(Z)?Z:[Z];for(let G of w.some((B)=>B==="all")?["decorator","state","model","error"]:w)z(G);return this}prefix(X,Z){return this.affix("prefix",X,Z)}suffix(X,Z){return this.affix("suffix",X,Z)}compile(){if(this.fetch=this.config.aot?KW(this):jW(this),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}get modules(){return Promise.all(this.promisedModules.promises)}};var H$=class extends Error{constructor($,X){super(X+"");this.status=$,this.value=X}},Mq=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,Bq=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,wq=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,qq=($)=>$.trim().length!==0&&!Number.isNaN(Number($)),tW=($)=>{if(typeof $!="string")return null;let X=$.replace(/"/g,"");if(Mq.test(X)||Bq.test(X)||wq.test(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return Z}return null},Uq=($)=>{let X=$.charCodeAt(0),Z=$.charCodeAt($.length-1);return X===123&&Z===125||X===91&&Z===93},Gq=($)=>JSON.parse($,(X,Z)=>{return tW(Z)||Z}),N$=($)=>{if(!$)return $;if(qq($))return+$;if($==="true")return!0;if($==="false")return!1;let X=tW($);if(X)return X;if(Uq($))try{return Gq($)}catch{}return $},IX=($)=>{let X=$.data.toString();return X==="null"?null:N$(X)};var gV=typeof FileList>"u";var Aq=class{constructor($){this.url=$,this.ws=new WebSocket($)}ws;send($){return Array.isArray($)?($.forEach((X)=>this.send(X)),this):(this.ws.send(typeof $=="object"?JSON.stringify($):$.toString()),this)}on($,X,Z){return this.addEventListener($,X,Z)}off($,X,Z){return this.ws.removeEventListener($,X,Z),this}subscribe($,X){return this.addEventListener("message",$,X)}addEventListener($,X,Z){return this.ws.addEventListener($,(Q)=>{if($==="message"){let W=IX(Q);X({...Q,data:W})}else X(Q)},Z),this}removeEventListener($,X,Z){return this.off($,X,Z),this}close(){return this.ws.close(),this}},Hq=["get","post","put","delete","patch","options","head","connect","subscribe"],rW=["localhost","127.0.0.1","0.0.0.0"],kX=typeof FileList>"u",sW=($)=>kX?$ instanceof Blob:$ instanceof FileList||$ instanceof File,Nq=($)=>{if(!$)return!1;for(let X in $)if(sW($[X])||Array.isArray($[X])&&$[X].find(sW))return!0;return!1},xX=($)=>kX?$:new Promise((X)=>{let Z=new FileReader;Z.onload=()=>{let Q=new File([Z.result],$.name,{lastModified:$.lastModified,type:$.type});X(Q)},Z.readAsArrayBuffer($)}),a2=($,X,Z={},Q={})=>{if(Array.isArray($)){for(let W of $)if(!Array.isArray(W))Q=a2(W,X,Z,Q);else{let Y=W[0];if(typeof Y=="string")Q[Y.toLowerCase()]=W[1];else for(let[J,z]of Y)Q[J.toLowerCase()]=z}return Q}if(!$)return Q;switch(typeof $){case"function":if($ instanceof Headers)return a2($,X,Z,Q);let W=$(X,Z);return W?a2(W,X,Z,Q):Q;case"object":if($ instanceof Headers)return $.forEach((Y,J)=>{Q[J.toLowerCase()]=Y}),Q;for(let[Y,J]of Object.entries($))Q[Y.toLowerCase()]=J;return Q;default:return Q}};async function*Dq($){let X=$.body;if(!X)return;let Z=X.getReader(),Q=new TextDecoder;try{for(;;){let{done:W,value:Y}=await Z.read();if(W)break;let J=Q.decode(Y);yield N$(J)}}finally{Z.releaseLock()}}var G8=($,X,Z=[],Q)=>new Proxy(()=>{},{get(W,Y){return G8($,X,Y==="index"?Z:[...Z,Y],Q)},apply(W,Y,[J,z]){if(!J||z||typeof J=="object"&&Object.keys(J).length!==1||Hq.includes(Z.at(-1))){let w=[...Z],G=w.pop(),B="/"+w.join("/"),{fetcher:H=fetch,headers:O,onRequest:M,onResponse:F,fetch:K}=X,_=G==="get"||G==="head"||G==="subscribe";O=a2(O,B,z);let b=_?J?.query:z?.query,I="";if(b){let S=(c,d)=>{I+=(I?"&":"?")+`${encodeURIComponent(c)}=${encodeURIComponent(d)}`};for(let[c,d]of Object.entries(b)){if(Array.isArray(d)){for(let i of d)S(c,i);continue}if(typeof d=="object"){S(c,JSON.stringify(d));continue}S(c,`${d}`)}}if(G==="subscribe"){let S=$.replace(/^([^]+):\/\//,$.startsWith("https://")?"wss://":$.startsWith("http://")||rW.find((c)=>$.includes(c))?"ws://":"wss://")+B+I;return new Aq(S)}return(async()=>{let S={method:G?.toUpperCase(),body:J,...K,headers:O};S.headers={...O,...a2(_?J?.headers:z?.headers,B,S)};let c=_&&typeof J=="object"?J.fetch:z?.fetch;if(S={...S,...c},_&&delete S.body,M){Array.isArray(M)||(M=[M]);for(let v of M){let g=await v(B,S);typeof g=="object"&&(S={...S,...g,headers:{...S.headers,...a2(g.headers,B,S)}})}}if(_&&delete S.body,Nq(J)){let v=new FormData;for(let[g,$0]of Object.entries(S.body)){if(kX){v.append(g,$0);continue}if($0 instanceof File){v.append(g,await xX($0));continue}if($0 instanceof FileList){for(let T0=0;T0<$0.length;T0++)v.append(g,await xX($0[T0]));continue}if(Array.isArray($0)){for(let T0=0;T0<$0.length;T0++){let f1=$0[T0];v.append(g,f1 instanceof File?await xX(f1):f1)}continue}v.append(g,$0)}S.body=v}else typeof J=="object"?(S.headers["content-type"]="application/json",S.body=JSON.stringify(J)):J!=null&&(S.headers["content-type"]="text/plain");if(_&&delete S.body,M){Array.isArray(M)||(M=[M]);for(let v of M){let g=await v(B,S);typeof g=="object"&&(S={...S,...g,headers:{...S.headers,...a2(g.headers,B,S)}})}}let d=$+B+I,i=await(Q?.handle(new Request(d,S))??H(d,S)),t=null,J0=null;if(F){Array.isArray(F)||(F=[F]);for(let v of F)try{let g=await v(i.clone());if(g!=null){t=g;break}}catch(g){g instanceof H$?J0=g:J0=new H$(422,g);break}}if(t!==null)return{data:t,error:J0,response:i,status:i.status,headers:i.headers};switch(i.headers.get("Content-Type")?.split(";")[0]){case"text/event-stream":t=Dq(i);break;case"application/json":t=await i.json();break;case"application/octet-stream":t=await i.arrayBuffer();break;case"multipart/form-data":let v=await i.formData();t={},v.forEach((g,$0)=>{t[$0]=g});break;default:t=await i.text().then(N$)}return(i.status>=300||i.status<200)&&(J0=new H$(i.status,t),t=null),{data:t,error:J0,response:i,status:i.status,headers:i.headers}})()}return typeof J=="object"?G8($,X,[...Z,Object.values(J)[0]],Q):G8($,X,Z)}}),TX=($,X={})=>typeof $=="string"?(X.keepDomain||($.includes("://")||($=(rW.find((Z)=>$.includes(Z))?"http://":"https://")+$),$.endsWith("/")&&($=$.slice(0,-1))),G8($,X)):(typeof window<"u"&&console.warn("Elysia instance server found on client side, this is not recommended for security reason. Use generic type instead."),G8("http://e.ly",X,[],$));var aW="http://localhost:3000";var aV=TX(aW).api,A8=($)=>{return};var Lq={light:"light",dark:"dark"};A8(Lq);var Pq={log:"log",info:"info",warn:"warn",error:"error"};A8(Pq);var gX={en:"en",fr:"fr"};A8(gX);var Oq={};A8(Oq);var _q={lang:gX.en,Loading:"Loading",Error:"Error","not found":"not found","is not implemented yet":"is not implemented yet",Home:"Home"},YE=_q;export{YE as default};
